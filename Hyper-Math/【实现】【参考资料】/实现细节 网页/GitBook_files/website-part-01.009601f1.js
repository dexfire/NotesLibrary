webpackJsonp([59],{116:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=i(n);var a=r(1);function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){c(t,e);function t(){s(this,t);return u(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.step,n=t.children;return o.createElement(a.Modal,{size:a.Modal.SIZES.large},o.createElement(a.Modal.Header,{primary:true},o.createElement(a.Modal.Title,null,"Get Started"),o.createElement(a.Modal.Stepper,null,o.createElement(a.Modal.Stepper.Item,{completed:true},"Setup your organization"),o.createElement(a.Modal.Stepper.Item,{completed:r>=2},"Create a project"),o.createElement(a.Modal.Stepper.Item,{completed:r>=3},"Go live"))),n)};return t}(o.Component);t.default=l},197:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=p(a);var s=r(2);var u=r(1);var c=r(945);var l=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=n=function(e){v(t,e);function t(){h(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.org,a=n.space,s=n.children;return i.createElement(u.Modal.Body,{styles:[r.modalBody]},i.createElement(u.View,{styles:[u.View.MARGIN.S400Top,r.stepContainer]},s),i.createElement(l.default,{org:o,space:a,styles:[r.spacePreview]}))};return t}(i.Component),n.STYLES=s.StyleSheet.create({modalBody:{paddingTop:0,paddingBottom:0,paddingRight:0,display:"flex",flexDirection:"row",alignItems:"center"},stepContainer:{width:340},spacePreview:{alignSelf:"flex-end"}}),o);t.default=m},240:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AuthModal=t.RouteAuthAction=t.RouteForgotPassword=t.RouteSignIn=t.createAuthRoute=t.getAuthRoute=t.handleException=void 0;var n=r(2652);var o=h(n);var a=r(2654);var i=h(a);var s=r(2658);var u=h(s);var c=r(519);var l=h(c);var f=r(115);var p=r(241);function h(e){return e&&e.__esModule?e:{default:e}}t.handleException=f.handleException;t.getAuthRoute=p.getAuthRoute;t.createAuthRoute=p.createAuthRoute;t.RouteSignIn=u.default;t.RouteForgotPassword=o.default;t.RouteAuthAction=i.default;t.AuthModal=l.default},2630:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.onHotReload=t.bundleEntry=t.createStore=t.loadComponent=void 0;var n=r(257);var o=v(n);var a=r(572);var i=d(a);var s=r(573);var u=r(96);var c=r(10);var l=r(2631);var f=d(l);var p=r(2632);var h=d(p);function d(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}var m="website";function _(e){var t=e.config;var r=f.default.deserialize(e);var n=void 0;var a=new u.Backend(t,{initialUser:r.user,onUser:function e(t){n.dispatch(c.Flux.user.updateUser(t))},initialDatabaseState:r.database,onDatabaseState:function e(t){n.dispatch(c.Flux.database.updateDatabase(t))}});var s=[i.default.withExtraArgument(a)];a.database.setOnline(false);a.analytics.toggleIntercomLauncher(true);a.isClient&&false;n=o.createStore(h.default,r,o.applyMiddleware.apply(o,s));return n}function y(){return r(2633).default}function g(e){false}t.loadComponent=y;t.createStore=_;t.bundleEntry=m;t.onHotReload=g},2631:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var o=r(3);var a=r(96);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){u(t,e);function t(){i(this,t);return s(this,e.apply(this,arguments))}t.deserialize=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({user:o.AuthUser.deserialize(r.user),database:a.DatabaseState.deserialize(r.database),config:o.Config.deserialize(r.config)})};t.prototype.serialize=function e(){var t=this.user,r=this.database,n=this.config;return{user:t.serialize(),database:r.serialize(),config:n.serialize()}};return t}((0,n.Record)({user:new o.AuthUser,database:new a.DatabaseState,config:new o.Config}));t.default=c},2632:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(10);var o=r(808);t.default=(0,o.combineReducers)({user:n.Flux.user.reducer,database:n.Flux.database.reducer,config:n.Flux.config.reducer})},2633:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s;var u=r(0);var c=k(u);var l=r(5);var f=r(12);var p=r(13);var h=r(2);var d=r(10);var v=r(14);var m=r(1);var _=r(927);var y=r(240);var g=r(2663);var b=r(2815);var w=P(b);var E=r(947);var C=P(E);var S=r(2909);var j=P(S);var R=r(2914);var O=P(R);var x=r(2916);var T=P(x);function P(e){return e&&e.__esModule?e:{default:e}}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function L(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=(n=d.Connectors.authUser(),o=(0,l.connect)(function(e){var t=e.config,r=e.user;return{gaID:t.get("ga").website.id,user:r}}),(0,p.withRouter)(a=n(a=o(a=(s=i=function(e){L(t,e);function t(){F(this,t);return M(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.gaID,a=n.user;return c.createElement(f.IntlProvider,{locale:"en"},c.createElement(m.ColorPalette,{primary:m.colors.BLUE_BASE},c.createElement(m.PlaceholderPalette.Light,null,c.createElement(v.ErrorBoundary,null,c.createElement(m.View,{styles:[r.app]},c.createElement(O.default,null),c.createElement(v.GAProvider,{defaultTrackerID:o,userID:a.isLoggedIn?a.uid:null},c.createElement(v.ScrollToTop,null,c.createElement(p.Switch,null,c.createElement(p.Route,{exact:true,path:"/:mode(login|join|invite)/:org?/:space?",component:y.RouteSignIn}),a.isLoggedIn&&c.createElement(p.Route,{path:"/account/verify",component:j.default}),a.isLoggedIn&&a.requirePhoneVerification&&c.createElement(p.Route,null,function(e){var t=e.location;return c.createElement(p.Redirect,{to:{pathname:"/account/verify",state:{referrer:t}}})}),c.createElement(p.Route,{exact:true,path:"/new",component:C.default}),c.createElement(p.Route,{path:"/migrate",component:_.RouteMigrationWelcome}),c.createElement(p.Route,{path:"/@:domain",component:g.RouteOrganization}),c.createElement(p.Route,{path:"/forgot",component:y.RouteForgotPassword}),c.createElement(p.Route,{path:"/auth",component:y.RouteAuthAction}),c.createElement(p.Route,{path:"/account",component:g.RouteAccount}),(0,w.default)({isLoggedIn:a.isLoggedIn}),a.isLoggedIn&&c.createElement(p.Route,{path:"/",component:g.RouteDashboard}),c.createElement(p.Route,{component:v.ErrorPage.NotFound})))),c.createElement(T.default,null))))))};return t}(c.Component),i.STYLES=h.StyleSheet.create({app:{width:"100%",minHeight:"100vh",color:m.colors.TEXT_COLOR,background:m.colors.BG_BODY,display:"flex",flexDirection:"column"}}),s))||a)||a)||a);t.default=A},2663:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RouteDashboard=t.RouteOrganization=t.RouteAccount=void 0;var n=r(2664);var o=c(n);var a=r(2679);var i=c(a);var s=r(2812);var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}t.RouteAccount=o.default;t.RouteOrganization=i.default;t.RouteDashboard=u.default},2759:function(e,t,r){e.exports=r.p+"images/e793720801423d21776871e5e7baf99b.png"},2764:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=d(n);var a=r(1);var i=r(14);var s=r(949);var u=h(s);var c=r(116);var l=h(c);var f=r(197);var p=h(f);function h(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g="https://autocomplete.clearbit.com/v1/companies/suggest";var b=function(e){y(t,e);function t(){var r=this;var n,a,s;m(this,t);for(var c=arguments.length,l=Array(c),f=0;f<c;f++)l[f]=arguments[f];return s=(n=(a=_(this,e.call.apply(e,[this].concat(l))),a),a.state={logo:null},a.input=o.createRef(),a.fileInput=o.createRef(),a.onLogoURLChanged=function(){var e=v(regeneratorRuntime.mark(function e(t){var n,o,i,s,c;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:n=a.props,o=n.org,i=n.space,s=n.onChange;s({org:o.merge({logoURL:t}),space:i.merge({logoURL:t})});r.next=4;return(0,u.default)(t);case 4:c=r.sent;a.onColorChange(c);case 6:case"end":return r.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),a.onLogoChanged=function(e){var t=e[0];var r=new FileReader;a.setState({logo:t});r.onload=function(e){var t=e.target.result;a.onLogoURLChanged(t)};r.readAsDataURL(t)},a.onColorChange=function(e){var t=a.props,r=t.space,n=t.onChange;n({space:r.merge({colorPrimary:e})})},a.onUploadLogo=function(){a.fileInput.current&&i.FileUploader.promptFile(a.fileInput.current)},a.onNameChange=function(){var e=v(regeneratorRuntime.mark(function e(t){var n,o,i,s,u,c,l,f,p,h;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:n=a.props,o=n.org,i=n.space,s=n.onChange;u=a.state.logo;c=t.target.value;s({org:o.setBaseDomain(c).merge({name:c}),space:i.setBaseName("project").merge({name:c})});if(!(u||!c)){r.next=6;break}return r.abrupt("return");case 6:r.prev=6;r.next=9;return fetch(g+"?query="+c);case 9:l=r.sent;r.next=12;return l.json();case 12:f=r.sent;p=f[0];if(p){r.next=16;break}return r.abrupt("return");case 16:h=p.logo+"?size=800";a.onLogoURLChanged(h);r.next=22;break;case 20:r.prev=20;r.t0=r["catch"](6);case 22:case"end":return r.stop()}},e,r,[[6,20]])}));return function(t){return e.apply(this,arguments)}}(),n),_(a,s)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var t=this.props,r=t.space,n=t.org,s=t.onCancel,u=t.onPrev,c=t.onNext;return o.createElement(l.default,{step:1},o.createElement(p.default,{space:r,org:n},o.createElement(i.FileUploader,{ref:this.fileInput,onFiles:this.onLogoChanged}),o.createElement(a.Form.Group,{title:"Organization name",hint:n.logoURL&&o.createElement(a.Link,{onClick:this.onUploadLogo},"Upload another logo")},o.createElement(a.Form.Input,{inputRef:this.input,value:n.name,onChange:this.onNameChange,name:"company",placeholder:"Your app/company name"}),o.createElement(a.Form.Hint,null,"This will show up in email with your organization and your readers. It will usually be (or include) the name of your company."))),o.createElement(a.Modal.StepperFooter,{nextDisabled:!n.name,onCancel:s,onNext:c,onPrev:u}))};return t}(o.Component);t.default=b},2765:function(e,t,r){"use strict";var n=r(950);var o=r(2775);n.default.DefaultOpts.ImageClass=o.default;e.exports=n.default},2766:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(833);var o=r(950);var a=function(){function e(e,t){void 0===t&&(t={});this._src=e;this._opts=t;this._opts.filters=n(o.default.DefaultOpts.filters)}e.prototype.maxColorCount=function(e){this._opts.colorCount=e;return this};e.prototype.maxDimension=function(e){this._opts.maxDimension=e;return this};e.prototype.addFilter=function(e){this._opts.filters.push(e);return this};e.prototype.removeFilter=function(e){var t=this._opts.filters.indexOf(e);t>0&&this._opts.filters.splice(t);return this};e.prototype.clearFilters=function(){this._opts.filters=[];return this};e.prototype.quality=function(e){this._opts.quality=e;return this};e.prototype.useImageClass=function(e){this._opts.ImageClass=e;return this};e.prototype.useGenerator=function(e){this._opts.generator=e;return this};e.prototype.useQuantizer=function(e){this._opts.quantizer=e;return this};e.prototype.build=function(){return new o.default(this._src,this._opts)};e.prototype.getPalette=function(e){return this.build().getPalette(e)};e.prototype.getSwatches=function(e){return this.build().getPalette(e)};return e}();t.default=a},2767:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(2768);t.MMCQ=n.default},2768:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(951);var o=r(2769);var a=r(2770);var i=1e3;var s=.75;function u(e,t){var r=1;var n=0;while(n<i){n++;var o=e.pop();if(!o.count())continue;var a=o.split(),s=a[0],u=a[1];e.push(s);if(u){e.push(u);r++}if(r>=t||n>i)return}}var c=function(e,t){if(0===e.length||t.colorCount<2||t.colorCount>256)throw new Error("Wrong MMCQ parameters");var r=null;Array.isArray(t.filters)&&t.filters.length>0&&(r=function(e,r,n,o){for(var a=0,i=t.filters;a<i.length;a++){var s=i[a];if(!s(e,r,n,o))return true}return false});var i=o.default.build(e,r);var c=i.hist;var l=Object.keys(c).length;var f=new a.default(function(e,t){return e.count()-t.count()});f.push(i);u(f,s*t.colorCount);var p=new a.default(function(e,t){return e.count()*e.volume()-t.count()*t.volume()});p.contents=f.contents;u(p,t.colorCount-p.size());var h=[];while(p.size()){var d=p.pop();var v=d.avg();var m=v[0],_=v[1],y=v[2];null!==r&&r(m,_,y,255)||h.push(new n.Swatch(v,d.count()))}return h};t.default=c},2769:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(330);var o=function(){function e(e,t,r,n,o,a,i){this._volume=-1;this._count=-1;this.dimension={r1:e,r2:t,g1:r,g2:n,b1:o,b2:a};this.hist=i}e.build=function(t,r){var o=1<<3*n.SIGBITS;var a=new Uint32Array(o);var i;var s;var u;var c;var l;var f;var p;var h;var d;var v;i=u=l=0;s=c=f=Number.MAX_VALUE;var m=t.length/4;var _=0;while(_<m){var y=4*_;_++;p=t[y+0];h=t[y+1];d=t[y+2];v=t[y+3];if("function"===typeof r&&r(p,h,d,v))continue;p>>=n.RSHIFT;h>>=n.RSHIFT;d>>=n.RSHIFT;var g=n.getColorIndex(p,h,d);a[g]+=1;p>i&&(i=p);p<s&&(s=p);h>u&&(u=h);h<c&&(c=h);d>l&&(l=d);d<f&&(f=d)}return new e(s,i,c,u,f,l,a)};e.prototype.invalidate=function(){this._volume=this._count=-1;this._avg=null};e.prototype.volume=function(){if(this._volume<0){var e=this.dimension,t=e.r1,r=e.r2,n=e.g1,o=e.g2,a=e.b1,i=e.b2;this._volume=(r-t+1)*(o-n+1)*(i-a+1)}return this._volume};e.prototype.count=function(){if(this._count<0){var e=this.hist;var t=this.dimension,r=t.r1,o=t.r2,a=t.g1,i=t.g2,s=t.b1,u=t.b2;var c=0;for(var l=r;l<=o;l++)for(var f=a;f<=i;f++)for(var p=s;p<=u;p++){var h=n.getColorIndex(l,f,p);c+=e[h]}this._count=c}return this._count};e.prototype.clone=function(){var t=this.hist;var r=this.dimension,n=r.r1,o=r.r2,a=r.g1,i=r.g2,s=r.b1,u=r.b2;return new e(n,o,a,i,s,u,t)};e.prototype.avg=function(){if(!this._avg){var e=this.hist;var t=this.dimension,r=t.r1,o=t.r2,a=t.g1,i=t.g2,s=t.b1,u=t.b2;var c=0;var l=1<<8-n.SIGBITS;var f=void 0;var p=void 0;var h=void 0;f=p=h=0;for(var d=r;d<=o;d++)for(var v=a;v<=i;v++)for(var m=s;m<=u;m++){var _=n.getColorIndex(d,v,m);var y=e[_];c+=y;f+=y*(d+.5)*l;p+=y*(v+.5)*l;h+=y*(m+.5)*l}this._avg=c?[~~(f/c),~~(p/c),~~(h/c)]:[~~(l*(r+o+1)/2),~~(l*(a+i+1)/2),~~(l*(s+u+1)/2)]}return this._avg};e.prototype.contains=function(e){var t=e[0],r=e[1],o=e[2];var a=this.dimension,i=a.r1,s=a.r2,u=a.g1,c=a.g2,l=a.b1,f=a.b2;t>>=n.RSHIFT;r>>=n.RSHIFT;o>>=n.RSHIFT;return t>=i&&t<=s&&r>=u&&r<=c&&o>=l&&o<=f};e.prototype.split=function(){var e=this.hist;var t=this.dimension,r=t.r1,o=t.r2,a=t.g1,i=t.g2,s=t.b1,u=t.b2;var c=this.count();if(!c)return[];if(1===c)return[this.clone()];var l=o-r+1;var f=i-a+1;var p=u-s+1;var h=Math.max(l,f,p);var d=null;var v;var m;v=m=0;var _=null;if(h===l){_="r";d=new Uint32Array(o+1);for(var y=r;y<=o;y++){v=0;for(var g=a;g<=i;g++)for(var b=s;b<=u;b++){var w=n.getColorIndex(y,g,b);v+=e[w]}m+=v;d[y]=m}}else if(h===f){_="g";d=new Uint32Array(i+1);for(var g=a;g<=i;g++){v=0;for(var y=r;y<=o;y++)for(var b=s;b<=u;b++){var w=n.getColorIndex(y,g,b);v+=e[w]}m+=v;d[g]=m}}else{_="b";d=new Uint32Array(u+1);for(var b=s;b<=u;b++){v=0;for(var y=r;y<=o;y++)for(var g=a;g<=i;g++){var w=n.getColorIndex(y,g,b);v+=e[w]}m+=v;d[b]=m}}var E=-1;var C=new Uint32Array(d.length);for(var S=0;S<d.length;S++){var j=d[S];E<0&&j>m/2&&(E=S);C[S]=m-j}var R=this;function O(e){var t=e+"1";var r=e+"2";var n=R.dimension[t];var o=R.dimension[r];var a=R.clone();var i=R.clone();var s=E-n;var u=o-E;if(s<=u){o=Math.min(o-1,~~(E+u/2));o=Math.max(0,o)}else{o=Math.max(n,~~(E-1-s/2));o=Math.min(R.dimension[r],o)}while(!d[o])o++;var c=C[o];while(!c&&d[o-1])c=C[--o];a.dimension[r]=o;i.dimension[t]=o+1;return[a,i]}return O(_)};return e}();t.default=o},2770:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e){this._comparator=e;this.contents=[];this._sorted=false}e.prototype._sort=function(){if(!this._sorted){this.contents.sort(this._comparator);this._sorted=true}};e.prototype.push=function(e){this.contents.push(e);this._sorted=false};e.prototype.peek=function(e){this._sort();e="number"===typeof e?e:this.contents.length-1;return this.contents[e]};e.prototype.pop=function(){this._sort();return this.contents.pop()};e.prototype.size=function(){return this.contents.length};e.prototype.map=function(e){this._sort();return this.contents.map(e)};return e}();t.default=n},2771:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(2772);t.Default=n.default},2772:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(951);var o=r(330);var a=r(309);var i={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6,weightPopulation:1};function s(e){var t=0;e.forEach(function(e){t=Math.max(t,e.getPopulation())});return t}function u(e,t){return e.Vibrant===t||e.DarkVibrant===t||e.LightVibrant===t||e.Muted===t||e.DarkMuted===t||e.LightMuted===t}function c(e,t,r,n,o,a,i){function s(){var e=[];for(var t=0;t<arguments.length;t++)e[t]=arguments[t];var r=0;var n=0;for(var o=0;o<e.length;o+=2){var a=e[o];var i=e[o+1];r+=a*i;n+=i}return r/n}function u(e,t){return 1-Math.abs(e-t)}return s(u(e,t),i.weightSaturation,u(r,n),i.weightLuma,o/a,i.weightPopulation)}function l(e,t,r,n,o,a,i,s,l,f){var p=null;var h=0;t.forEach(function(t){var d=t.getHsl(),v=d[1],m=d[2];if(v>=s&&v<=l&&m>=o&&m<=a&&!u(e,t)){var _=c(v,i,m,n,t.getPopulation(),r,f);if(null===p||_>h){p=t;h=_}}});return p}function f(e,t,r){var n={};n.Vibrant=l(n,e,t,r.targetNormalLuma,r.minNormalLuma,r.maxNormalLuma,r.targetVibrantSaturation,r.minVibrantSaturation,1,r);n.LightVibrant=l(n,e,t,r.targetLightLuma,r.minLightLuma,1,r.targetVibrantSaturation,r.minVibrantSaturation,1,r);n.DarkVibrant=l(n,e,t,r.targetDarkLuma,0,r.maxDarkLuma,r.targetVibrantSaturation,r.minVibrantSaturation,1,r);n.Muted=l(n,e,t,r.targetNormalLuma,r.minNormalLuma,r.maxNormalLuma,r.targetMutesSaturation,0,r.maxMutesSaturation,r);n.LightMuted=l(n,e,t,r.targetLightLuma,r.minLightLuma,1,r.targetMutesSaturation,0,r.maxMutesSaturation,r);n.DarkMuted=l(n,e,t,r.targetDarkLuma,0,r.maxDarkLuma,r.targetMutesSaturation,0,r.maxMutesSaturation,r);return n}function p(e,t,r){if(null===e.Vibrant&&null!==e.DarkVibrant){var a=e.DarkVibrant.getHsl(),i=a[0],s=a[1],u=a[2];u=r.targetNormalLuma;e.Vibrant=new n.Swatch(o.hslToRgb(i,s,u),0)}if(null===e.DarkVibrant&&null!==e.Vibrant){var c=e.Vibrant.getHsl(),i=c[0],s=c[1],u=c[2];u=r.targetDarkLuma;e.DarkVibrant=new n.Swatch(o.hslToRgb(i,s,u),0)}}var h=function(e,t){t=a({},t,i);var r=s(e);var n=f(e,r,t);p(n,r,t);return n};t.default=h},2773:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(2774);t.Default=n.default},2774:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t,r,n){return n>=125&&!(e>250&&t>250&&r>250)}t.default=n},2775:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var o=r(523);var a=r(2776);var i=r(295);function s(e){var t=i.parse(e);return null===t.protocol&&null===t.host&&null===t.port}function u(e,t){var r=i.parse(e);var n=i.parse(t);return r.protocol===n.protocol&&r.hostname===n.hostname&&r.port===n.port}var c=function(e){n(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype._initCanvas=function(){var e=this.image;var t=this._canvas=document.createElement("canvas");var r=this._context=t.getContext("2d");t.className="vibrant-canvas";t.style.visibility="hidden";this._width=t.width=e.width;this._height=t.height=e.height;r.drawImage(e,0,0);document.body.appendChild(t)};t.prototype.load=function(e){var t=this;var r=null;var n=null;if("string"===typeof e){r=document.createElement("img");n=e}else{if(!(e instanceof HTMLImageElement))return o.reject(new Error("Cannot load buffer as an image in browser"));r=e;n=e.src}this.image=r;s(n)||u(window.location.href,n)||(r.crossOrigin="anonymous");"string"===typeof e&&(r.src=n);return new o(function(e,o){var a=function(){t._initCanvas();e(t)};r.onload=a;r.complete&&a();r.onerror=function(e){return o(new Error("Fail to load image: "+n))}})};t.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)};t.prototype.update=function(e){this._context.putImageData(e,0,0)};t.prototype.getWidth=function(){return this._width};t.prototype.getHeight=function(){return this._height};t.prototype.resize=function(e,t,r){var n=this,o=n._canvas,a=n._context,i=n.image;this._width=o.width=e;this._height=o.height=t;a.scale(r,r);a.drawImage(i,0,0)};t.prototype.getPixelCount=function(){return this._width*this._height};t.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)};t.prototype.remove=function(){this._canvas.parentNode.removeChild(this._canvas)};return t}(a.ImageBase);t.default=c},2776:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(){}e.prototype.scaleDown=function(e){var t=this.getWidth();var r=this.getHeight();var n=1;if(e.maxDimension>0){var o=Math.max(t,r);o>e.maxDimension&&(n=e.maxDimension/o)}else n=1/e.quality;n<1&&this.resize(t*n,r*n,n)};return e}();t.ImageBase=n},2777:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var i=r(0);var s=_(i);var u=r(5);var c=r(10);var l=r(1);var f=r(3);var p=r(116);var h=m(p);var d=r(197);var v=m(d);function m(e){return e&&e.__esModule?e:{default:e}}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(n=(0,u.connect)(function(e){var t=e.config;return{config:t}}),o=c.Connectors.database(function(e){var t=e.org;return{baseDomain:t.baseDomain?f.OrgBaseDomain.queryByDomain(t.baseDomain).setOptions({waitFetched:false,background:true}):null}}),n(a=o(a=function(e){b(t,e);function t(){var r,n,o;y(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(r=(n=g(this,e.call.apply(e,[this].concat(i))),n),n.state={value:n.props.org.baseDomain},n.input=s.createRef(),n.onBaseDomainChange=function(e){var t=n.props,r=t.org,o=t.onChange;var a=e.currentTarget.value;var i=r.setBaseDomain(a);n.setState({value:a});o({org:i})},n.onBlur=function(){var e=n.props,t=e.org,r=e.onChange;var o=n.state.value;if(!f.Organization.validateBaseDomain(o))return;var a=t.setBaseDomain(o);n.setState({value:a.baseDomain});r({org:a})},r),g(n,o)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var t=this.props,r=t.config,n=t.baseDomain,o=t.baseDomainFetched,a=t.space,i=t.org,u=t.onCancel,c=t.onPrev,p=t.onNext;var d=this.state.value;var m=!f.Organization.validateBaseDomain(d);var _=(m?"A organization URL may only contain alphanumeric or dashes '-' and 3-20 characters":n&&"This organization URL is already taken :(")||null;return s.createElement(h.default,{step:1},s.createElement(v.default,{org:i,space:a},s.createElement(l.Form.Group,{title:"Organization URL",error:_},s.createElement(l.Form.Input,{inputRef:this.input,hasError:Boolean(_),value:d,onChange:this.onBaseDomainChange,onBlur:this.onBlur},s.createElement(l.Form.InputAddOn,{style:{paddingLeft:"0px"}},".",r.domains.spaces)),s.createElement(l.Form.Hint,null,"Pick something short, memorable and recognizable for your organization's base address."),s.createElement(l.Form.Hint,null,"You can setup a custom domain later."))),s.createElement(l.Modal.StepperFooter,{nextDisabled:!i.baseDomain||n||!o||_,onCancel:u,onNext:p,onPrev:c}))};return t}(s.Component))||a)||a);t.default=w},2778:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=f(n);var a=r(1);var i=r(116);var s=l(i);var u=r(197);var c=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){d(t,e);function t(){var r,n,a;p(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(r=(n=h(this,e.call.apply(e,[this].concat(s))),n),n.input=o.createRef(),n.onNameChange=function(e){var t=n.props,r=t.space,o=t.onChange;var a=e.target.value;o({space:r.setBaseName(a).merge({name:a})})},r),h(n,a)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var t=this.props,r=t.org,n=t.space,i=t.onCancel,u=t.onPrev,l=t.onNext;return o.createElement(s.default,{step:2},o.createElement(c.default,{org:r,space:n},o.createElement(a.Form.Group,{title:"Project's Title"},o.createElement(a.Form.Input,{inputRef:this.input,value:n.name,onChange:this.onNameChange}),o.createElement(a.Form.Hint,null,"This will be shown in the header of this project website. It can differ from your organization name."))),o.createElement(a.Modal.StepperFooter,{onNext:l,onPrev:u,onCancel:i,nextDisabled:!n.name}))};return t}(o.Component);t.default=v},2779:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=v(a);var s=r(2);var u=r(1);var c=r(7);var l=r(116);var f=d(l);var p=r(197);var h=d(p);function d(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(o=n=function(e){y(t,e);function t(){var r,n,o;m(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=_(this,e.call.apply(e,[this].concat(i))),n),n.onVisibilityChange=function(e){var t=n.props,r=t.space,o=t.onChange;o({space:r.setVisibility(e)})},r),_(n,o)}t.prototype.render=function e(){var r=this;var n=t.STYLES;var o=this.props,a=o.org,s=o.space,l=o.onPrev,p=o.onSubmit,d=o.onCancel;var v=s.visibility;return i.createElement(f.default,{step:2},i.createElement(h.default,{org:a,space:s},i.createElement(u.Form.Group,{title:"Visibility Level"},i.createElement(u.Form.Radio,{name:"visibility",value:"private",checked:"private"==v,onChange:function e(){return r.onVisibilityChange("private")},styles:[u.View.MARGIN.S100Vertical]},i.createElement(u.View,null,i.createElement(c.IconLock,{styles:[n.radioIcon]}),i.createElement(u.Text,null,i.createElement("b",null,"Private"))),i.createElement(u.Text.TextH300,{styles:[n.description]},"The content will only be visible to your organization and yourself.")),i.createElement(u.Form.Radio,{name:"visibility",value:"unlisted",checked:"unlisted"==v,onChange:function e(){return r.onVisibilityChange("unlisted")},styles:[u.View.MARGIN.S100Bottom]},i.createElement(u.View,null,i.createElement(c.IconHide,{styles:[n.radioIcon]}),i.createElement(u.Text,null,i.createElement("b",null,"Unlisted"))),i.createElement(u.Text.TextH300,{styles:[n.description]},"The content will only be visible to those with the link. It won’t be indexed on Google.")),i.createElement(u.Form.Radio,{name:"visibility",value:"public",checked:"public"==v,onChange:function e(){return r.onVisibilityChange("public")},styles:[u.View.MARGIN.S100Bottom]},i.createElement(u.View,null,i.createElement(c.IconGlobe,{styles:[n.radioIcon]}),i.createElement(u.Text,null,i.createElement("b",null,"Public"))),i.createElement(u.Text.TextH300,{styles:[n.description]},"Your public content will be available publicly to anyone.")))),i.createElement(u.Modal.StepperFooter,{onNext:p,onPrev:l,onCancel:d}))};return t}(i.Component),n.STYLES=s.StyleSheet.create({radioIcon:{fontSize:u.font.SIZE_MEDIUM_LARGE,color:u.colors.TEXT_MUTED,marginRight:6},description:{color:u.colors.GREY_BASE}}),o);t.default=g},2780:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s;var u=r(0);var c=b(u);var l=r(5);var f=r(2);var p=r(10);var h=r(1);var d=r(3);var v=r(116);var m=g(v);var _=r(197);var y=g(_);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=18;var j=(n=(0,l.connect)(function(e){var t=e.config;return{config:t}}),o=p.Connectors.database(function(e){var t=e.org,r=e.space;return{orgSpace:t.uid&&r.baseName?d.OrgSpace.queryByName({orgID:t.uid,baseName:r.baseName}).setOptions({background:true}):null}}),n(a=o(a=(s=i=function(e){C(t,e);function t(){var r,n,o;w(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=E(this,e.call.apply(e,[this].concat(i))),n),n.state={value:n.props.space.baseName},n.input=c.createRef(),n.onBaseNameChange=function(e){var t=n.props,r=t.space,o=t.onChange;var a=e.target.value;n.setState({value:a});o({space:r.setBaseName(a)})},n.onBlur=function(){var e=n.props,t=e.space,r=e.onChange;var o=n.state.value;if(d.Space.validateBaseName(o))return;var a=t.setBaseName(o);n.setState({value:a.baseName});r({space:a})},r),E(n,o)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.config,a=n.space,i=n.org,s=n.orgSpace,u=n.orgSpaceFetched,l=n.onPrev,f=n.onNext,p=n.onCancel;var v=this.state.value;var _=!d.Space.validateBaseName(v);var g=(_?"A project URL may only contain alphanumeric or dashes '-' and 1-20 characters":s&&"This project URL is already taken.")||null;var b=i.getSpacesURL(o.domains.spaces).replace(/^https:\/\//,"")+"/";var w=b.length<S?b:"…"+b.slice(-S);return c.createElement(m.default,{step:2},c.createElement(y.default,{org:i,space:a},c.createElement(h.Form.Group,{title:"Project URL",error:g},c.createElement(h.Form.Input,{inputRef:this.input,hasError:Boolean(g),value:v,onChange:this.onBaseNameChange,onBlur:this.onBlur},c.createElement(h.Form.InputAddOn,{prefix:true,styles:r.spaceURLAddon},w)),c.createElement(h.Form.Hint,null,"A custom domain can be setup later for your project."))),c.createElement(h.Modal.StepperFooter,{onNext:f,onPrev:l,onCancel:p,nextDisabled:!a.baseName||s||i.uid&&!u||g}))};return t}(c.Component),i.STYLES=f.StyleSheet.create({spaceURLAddon:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"50%",paddingRight:0}}),s))||a)||a);t.default=j},2781:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s;var u=r(0);var c=j(u);var l=r(2);var f=r(5);var p=r(13);var h=r(1);var d=r(10);var v=r(3);var m=r(312);var _=S(m);var y=r(952);var g=S(y);var b=r(116);var w=S(b);var E=r(197);var C=S(E);function S(e){return e&&e.__esModule?e:{default:e}}function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=(n=(0,f.connect)(function(e){var t=e.config,r=e.user;return{config:t,user:r}}),o=d.Connectors.database(function(e){var t=e.org,r=e.user;return{membership:v.Membership.queryByID({orgID:t.uid,userID:r.uid}).setOptions({waitFetched:false}),invites:v.Invite.queryByOrg(t.uid).setOptions({waitFetched:false}),orgBaseDomain:v.OrgBaseDomain.queryByDomain(t.baseDomain).setOptions({waitFetched:false})}}),n(a=o(a=(s=i=function(e){x(t,e);function t(){var r,n,o;R(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=O(this,e.call.apply(e,[this].concat(i))),n),n.state={copiedURL:false},n.getInviteURL=function(){var e=n.props,t=e.invites,r=e.org,o=e.config;var a=t.find(function(e){return e.role==v.ROLES.WRITER});if(!a)return"";return o.urls.website+"/join/"+r.baseDomain+"/"+a.uid},n.onClick=function(e){e.preventDefault();n.input&&n.input.select();n.setState({copiedURL:(0,_.default)(n.getInviteURL())})},r),O(n,o)}t.prototype.render=function e(){var r=this;var n=t.STYLES;var o=this.props,a=o.space,i=o.config,s=o.org,u=o.membershipFetched,l=o.invitesFetched;var f=this.state.copiedURL;var d=a.getURL(s,i.domains.spaces);var v="/@"+s.baseDomain+"/spaces";if(!l||!u)return c.createElement(g.default,null);return c.createElement(w.default,{step:3},c.createElement(C.default,{org:s,space:a},c.createElement(h.View,{styles:[h.View.MARGIN.S200Bottom]},c.createElement(h.Text.DisplayH700,null,"Congratulations!")),c.createElement(h.View,{styles:[h.View.MARGIN.S200Bottom]},"Your documentation is now live at"," ",c.createElement(h.Link,{kind:"underline",href:d,target:"_blank"},c.createElement("b",null,d)),"."),c.createElement(h.View,{styles:[h.View.MARGIN.S200Bottom]},"Invite your organization members or start writing beautiful content right now."),c.createElement(h.Form.Group,null,c.createElement(h.Form.Input,{title:f?"URL was copied to clipboard!":"Copy to clipboard",readOnly:true,inputRef:function e(t){r.input=t},styles:[n.inviteInput],value:this.getInviteURL(),onClick:this.onClick}),c.createElement(h.Form.Hint,null,"Share this URL to invite organization members."))),c.createElement(h.Modal.Footer,null,c.createElement(h.View,null),c.createElement(h.View,null,c.createElement(h.Button,{component:p.Link,to:v,disabled:!a.name},"Go to your organization!"))))};return t}(c.Component),i.STYLES=l.StyleSheet.create({inviteInput:{cursor:"pointer"}}),s))||a)||a);t.default=T},2782:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=l(n);var a=r(14);var i=r(1);var s=r(116);var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){h(t,e);function t(){f(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){return o.createElement(u.default,{step:3},o.createElement(i.View,{styles:[i.View.PADDING.S700]},o.createElement(i.Alert,{styles:[i.Alert.STYLES.danger,i.View.MARGIN.none]},"An error happened while creating your project,"," ",o.createElement(i.Link,{kind:"underline",onClick:a.openSupportDialog},"get in touch")," ","with our support team.")))};return t}(o.Component);t.default=d},2815:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o=r(0);var a=l(o);var i=r(13);var s=r(48);var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}var f=(0,u.default)({loader:function e(){return Promise.resolve().then(function(){return r(954)})},modules:["./MarketingBundle"],webpack:function e(){return[954]},loading:function e(){return null}});function p(e){var t=e.isLoggedIn;return[!t&&a.createElement(i.Route,{key:"homepage",path:"/",exact:true,render:function e(t){return a.createElement(f,n({tab:"home"},t))}}),a.createElement(i.Route,{key:"pricing",path:"/pricing",exact:true,render:function e(t){return a.createElement(f,n({tab:"pricing"},t))}}),a.createElement(i.Route,{key:"about",path:"/about",exact:true,render:function e(t){return a.createElement(f,n({tab:"about"},t))}})]}t.default=p},2909:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(48);var o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return r(963)})},modules:["./AccountVerification"],webpack:function e(){return[963]},loading:function e(){return null}});t.default=i},2910:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r(0);var u=h(s);var c=r(2);var l=r(5);var f=r(10);r(13);var p=r(1);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=(n=(0,l.connect)(),n(o=(i=a=function(e){_(t,e);function t(){var r=this;var n,o,a;v(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=m(this,e.call.apply(e,[this].concat(s))),o),o.onClick=d(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.dispatch,a=t.previousLocation;r.next=3;return n(f.Flux.auth.redirectToWebsite(a.pathname));case 3:case"end":return r.stop()}},e,r)})),n),m(o,a)}t.prototype.render=function e(){var r=t.STYLES;return u.createElement(u.Fragment,null,u.createElement(p.Modal.Body,null,u.createElement(p.View,null,u.createElement(p.Text,{styles:[r.infoText]},"Your account has been correctly verified!"))),u.createElement(p.Modal.Footer,null,u.createElement(p.Button,{kind:"cancel",onClick:this.onClick},"Continue")))};return t}(u.Component),a.STYLES=c.StyleSheet.create({infoText:{color:p.colors.GREY_BASE}}),i))||o);t.default=y},2911:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r(283);var u=g(s);var c=r(0);var l=g(c);var f=r(5);var p=r(411);var h=r(2);var d=r(1);var v=r(10);var m=r(2912);var _=y(m);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(n=(0,f.connect)(),n(o=(i=a=function(e){E(t,e);function t(){var r,n,o;b(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=w(this,e.call.apply(e,[this].concat(i))),n),n.state={phone:"",countryCode:"US"},n.input=l.createRef(),n.onClick=function(){var e=n.props.onSubmit;var t=n.state,r=t.phone,o=t.countryCode;e(r,o,n.recaptchaVerifier)},n.onSignOut=function(e){e.preventDefault();var t=n.props.dispatch;t(v.Flux.user.signOut())},n.onChangeNumber=function(e){var t=e.target.value;n.setState(function(e){var r=e.countryCode;return{phone:new p.AsYouType(r).input(t)}})},n.onChangeCountry=function(e){n.setState({countryCode:e.target.value})},r),w(n,o)}t.prototype.componentDidMount=function e(){this.recaptchaVerifier=new u.auth.RecaptchaVerifier("phone-confirm-button",{size:"invisible"});this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.user,a=n.loading;var i=this.state,s=i.phone,u=i.countryCode;return l.createElement(l.Fragment,null,l.createElement(d.Modal.Body,null,l.createElement(d.View,{styles:[d.View.MARGIN.S200Bottom]},l.createElement(d.View,null,l.createElement(d.Text,{styles:[r.infoText]},"Take a moment to verify a phone number. It helps us confirm your identity and better secure your account.")),l.createElement(d.View,null,o.requirePhoneVerification&&l.createElement(d.Text,{styles:[r.infoText]},l.createElement(d.Link,{onClick:this.onSignOut},"Sign out.")))),l.createElement(d.Form.Group,{title:"Country"},l.createElement(d.Form.Select,{name:"country",value:u,autoComplete:"shipping country",disabled:a,onChange:this.onChangeCountry},_.default.map(function(e){var t=e.code,r=e.name;return l.createElement("option",{key:t,value:t},r)}))),l.createElement(d.Form.Group,{title:"Phone number",styles:[d.View.MARGIN.none]},l.createElement(d.Form.Input,{type:"tel",autoComplete:"tel",inputRef:this.input,value:s,readOnly:a,onChange:this.onChangeNumber}),l.createElement(d.Form.Hint,null,"By tapping the button, an SMS may be sent. Message & data rates may apply."))),l.createElement(d.Modal.Footer,null,l.createElement(d.Button,{id:"phone-confirm-button",styles:[d.Button.STYLES.block],onClick:this.onClick,disabled:a},a?l.createElement(d.Loading,null):"Send me a verification code")))};return t}(l.Component),a.STYLES=h.StyleSheet.create({infoText:{color:d.colors.GREY_BASE}}),i))||o);t.default=C},2912:function(e,t){e.exports=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia, Plurinational State of",code:"BO"},{name:"Bonaire, Sint Eustatius and Saba",code:"BQ"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, the Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"CÃ´te d'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"CuraÃ§ao",code:"CW"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and McDonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, the Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestine, State of",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"RÃ©union",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint BarthÃ©lemy",code:"BL"},{name:"Saint Helena, Ascension and Tristan da Cunha",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Martin (French part)",code:"MF"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Sint Maarten (Dutch part)",code:"SX"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"South Sudan",code:"SS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela, Bolivarian Republic of",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]},2913:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=c(a);var s=r(2);var u=r(1);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(o=n=function(e){p(t,e);function t(){var r,n,o;l(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return o=(r=(n=f(this,e.call.apply(e,[this].concat(s))),n),n.state={code:""},n.input=i.createRef(),n.onConfirm=function(){var e=n.props.onSubmit;var t=n.state.code;e(t)},n.onChange=function(e){n.setState({code:e.target.value})},r),f(n,o)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.loading,a=n.phone,s=n.onResendCode;var c=this.state.code;return i.createElement(i.Fragment,null,i.createElement(u.Modal.Body,null,i.createElement(u.View,{styles:[u.View.MARGIN.S200Bottom]},i.createElement(u.Text,{styles:[r.infoText]},"We've just sent you a text message to "+a+" with a one time verification code. It may take a few minutes.")),i.createElement(u.Form.Group,{title:"Enter your code",styles:[u.View.MARGIN.none]},i.createElement(u.Form.Input,{type:"text",inputRef:this.input,value:c,readOnly:o,onChange:this.onChange}))),i.createElement(u.Modal.Footer,null,i.createElement(u.Button,{kind:"link",disabled:o,onClick:s},"Send again"),i.createElement(u.Button,{disabled:o||!c,onClick:this.onConfirm},o?i.createElement(u.Loading,null):"Confirm")))};return t}(i.Component),n.STYLES=s.StyleSheet.create({infoText:{color:u.colors.GREY_BASE}}),o);t.default=h},2914:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=f(n);var a=r(26);var i=l(a);var s=r(1);var u=r(2915);var c=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){d(t,e);function t(){p(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){return o.createElement(i.default,{defer:false,titleTemplate:"%s - GitBook",defaultTitle:"GitBook"},o.createElement("html",{lang:"en"}),o.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),o.createElement("meta",{charSet:"utf-8"}),o.createElement("style",{type:"text/css"},s.resetCSS),o.createElement("style",{type:"text/css"},"@media only percy { #intercom-container { visibility: hidden; } }"),o.createElement("link",{rel:"stylesheet",href:s.font.SANS_SERIF_SRC}),o.createElement("link",{rel:"stylesheet",href:s.font.MONOSPACE_SRC}),o.createElement("link",{rel:"icon",href:c.default}),o.createElement("script",{src:"https://js.stripe.com/v3/",type:"text/javascript"}),o.createElement("script",null,"\n                    !function(){\n                        var script = document.createElement('script');\n                        script.async = true;\n                        script.src = 'https://risk.clearbit.com/v1/risk.js';\n                        var parent = document.getElementsByTagName('script')[0];\n                        parent.parentNode.insertBefore(script, parent);\n                    }();\n                "))};return t}(o.Component);t.default=v},2915:function(e,t,r){e.exports=r.p+"images/b1c4c86ca817a71628d2debe73be9a64.ico"},2916:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=l(a);var s=r(2);var u=r(1);var c=r(7);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=n=function(e){h(t,e);function t(){var r,n,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=p(this,e.call.apply(e,[this].concat(i))),n),n.state={enabled:true},r),p(n,o)}t.prototype.componentDidMount=function e(){var t=this;this.timeout=setTimeout(function(){t.interval&&clearInterval(t.interval)},3e4);this.interval=setInterval(function(){if(window.Intercom.booted){t.setState({enabled:false});t.interval&&clearInterval(t.interval);t.timeout&&clearTimeout(t.timeout)}},500)};t.prototype.componentWillUnmount=function e(){this.interval&&clearInterval(this.interval);this.timeout&&clearTimeout(this.timeout)};t.prototype.render=function e(){var r=t.STYLES;var n=this.state.enabled;if(!n)return null;return i.createElement(u.Button,{component:"a",href:"mailto:support@gitbook.com",styles:[u.tooltip.tooltipped,u.tooltip.delayed,u.tooltip.topLeft,r.contactUs],kind:"primary",size:"large",icon:i.createElement(c.IconMail,null),"aria-label":"support@gitbook.com"})};return t}(i.Component),n.STYLES=s.StyleSheet.create({contactUs:{position:"fixed",bottom:u.spacing.S300,right:u.spacing.S300,borderRadius:60}}),o);t.default=d},330:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(523);t.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50};t.SIGBITS=5;t.RSHIFT=8-t.SIGBITS;function o(){var e;var t;var r=new n(function(r,n){e=r;t=n});return{resolve:e,reject:t,promise:r}}t.defer=o;function a(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return null===t?null:[t[1],t[2],t[3]].map(function(e){return parseInt(e,16)})}t.hexToRgb=a;function i(e,t,r){return"#"+((1<<24)+(e<<16)+(t<<8)+r).toString(16).slice(1,7)}t.rgbToHex=i;function s(e,t,r){e/=255;t/=255;r/=255;var n=Math.max(e,t,r);var o=Math.min(e,t,r);var a;var i;var s=(n+o)/2;if(n===o)a=i=0;else{var u=n-o;i=s>.5?u/(2-n-o):u/(n+o);switch(n){case e:a=(t-r)/u+(t<r?6:0);break;case t:a=(r-e)/u+2;break;case r:a=(e-t)/u+4;break}a/=6}return[a,i,s]}t.rgbToHsl=s;function u(e,t,r){var n;var o;var a;function i(e,t,r){r<0&&(r+=1);r>1&&(r-=1);if(r<1/6)return e+6*(t-e)*r;if(r<.5)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(0===t)n=o=a=r;else{var s=r<.5?r*(1+t):r+t-r*t;var u=2*r-s;n=i(u,s,e+1/3);o=i(u,s,e);a=i(u,s,e-1/3)}return[255*n,255*o,255*a]}t.hslToRgb=u;function c(e,t,r){e/=255;t/=255;r/=255;e=e>.04045?Math.pow((e+.005)/1.055,2.4):e/12.92;t=t>.04045?Math.pow((t+.005)/1.055,2.4):t/12.92;r=r>.04045?Math.pow((r+.005)/1.055,2.4):r/12.92;e*=100;t*=100;r*=100;var n=.4124*e+.3576*t+.1805*r;var o=.2126*e+.7152*t+.0722*r;var a=.0193*e+.1192*t+.9505*r;return[n,o,a]}t.rgbToXyz=c;function l(e,t,r){var n=95.047;var o=100;var a=108.883;e/=n;t/=o;r/=a;e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;t=t>.008856?Math.pow(t,1/3):7.787*t+16/116;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116;var i=116*t-16;var s=500*(e-t);var u=200*(t-r);return[i,s,u]}t.xyzToCIELab=l;function f(e,t,r){var n=c(e,t,r),o=n[0],a=n[1],i=n[2];return l(o,a,i)}t.rgbToCIELab=f;function p(e,t){var r=1;var n=1;var o=1;var a=e[0],i=e[1],s=e[2];var u=t[0],c=t[1],l=t[2];var f=a-u;var p=i-c;var h=s-l;var d=Math.sqrt(i*i+s*s);var v=Math.sqrt(c*c+l*l);var m=u-a;var _=v-d;var y=Math.sqrt(f*f+p*p+h*h);var g=Math.sqrt(y)>Math.sqrt(Math.abs(m))+Math.sqrt(Math.abs(_))?Math.sqrt(y*y-m*m-_*_):0;var b=1+.045*d;var w=1+.015*d;m/=r;_/=n*b;g/=o*w;return Math.sqrt(m*m+_*_+g*g)}t.deltaE94=p;function h(e,t){var r=f.apply(void 0,e);var n=f.apply(void 0,t);return p(r,n)}t.rgbDiff=h;function d(e,t){var r=a(e);var n=a(t);return h(r,n)}t.hexDiff=d;function v(e){if(e<t.DELTAE94_DIFF_STATUS.NA)return"N/A";if(e<=t.DELTAE94_DIFF_STATUS.PERFECT)return"Perfect";if(e<=t.DELTAE94_DIFF_STATUS.CLOSE)return"Close";if(e<=t.DELTAE94_DIFF_STATUS.GOOD)return"Good";if(e<t.DELTAE94_DIFF_STATUS.SIMILAR)return"Similar";return"Wrong"}t.getColorDiffStatus=v;function m(e,r,n){return(e<<2*t.SIGBITS)+(r<<t.SIGBITS)+n}t.getColorIndex=m},523:function(e,t,r){(function(t,r,n){!function(t){var r;true;e.exports=t()}(function(){var e,o,a;return function e(t,r,n){function o(i,s){if(!r[i]){if(!t[i]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[i].exports}var a="function"==typeof _dereq_&&_dereq_;for(var i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e);var n=r.promise();r.setHowMany(1);r.setUnwrap();r.init();return n}e.any=function(e){return r(e)};e.prototype.any=function(){return r(this)}}},{}],2:[function(e,r,n){"use strict";var o;try{throw new Error}catch(e){o=e}var a=e("./schedule");var i=e("./queue");var s=e("./util");function u(){this._customScheduler=false;this._isTickUsed=false;this._lateQueue=new i(16);this._normalQueue=new i(16);this._haveDrainedQueues=false;this._trampolineEnabled=true;var e=this;this.drainQueues=function(){e._drainQueues()};this._schedule=a}u.prototype.setScheduler=function(e){var t=this._schedule;this._schedule=e;this._customScheduler=true;return t};u.prototype.hasCustomScheduler=function(){return this._customScheduler};u.prototype.enableTrampoline=function(){this._trampolineEnabled=true};u.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=false)};u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};u.prototype.fatalError=function(e,r){if(r){t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n");t.exit(2)}else this.throwLater(e)};u.prototype.throwLater=function(e,t){if(1===arguments.length){t=e;e=function(){throw t}}if("undefined"!==typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}};function c(e,t,r){this._lateQueue.push(e,t,r);this._queueTick()}function l(e,t,r){this._normalQueue.push(e,t,r);this._queueTick()}function f(e){this._normalQueue._pushOne(e);this._queueTick()}if(s.hasDevTools){u.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?c.call(this,e,t,r):this._schedule(function(){setTimeout(function(){e.call(t,r)},100)})};u.prototype.invoke=function(e,t,r){this._trampolineEnabled?l.call(this,e,t,r):this._schedule(function(){e.call(t,r)})};u.prototype.settlePromises=function(e){this._trampolineEnabled?f.call(this,e):this._schedule(function(){e._settlePromises()})}}else{u.prototype.invokeLater=c;u.prototype.invoke=l;u.prototype.settlePromises=f}u.prototype._drainQueue=function(e){while(e.length()>0){var t=e.shift();if("function"!==typeof t){t._settlePromises();continue}var r=e.shift();var n=e.shift();t.call(r,n)}};u.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=true;this._drainQueue(this._lateQueue)};u.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues)}};u.prototype._reset=function(){this._isTickUsed=false};r.exports=u;r.exports.firstLineError=o},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var o=false;var a=function(e,t){this._reject(t)};var i=function(e,t){t.promiseRejectionQueued=true;t.bindingPromise._then(a,a,null,this,e)};var s=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)};var u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(a){if(!o){o=true;e.prototype._propagateFrom=n.propagateFromFunction();e.prototype._boundValue=n.boundValueFunction()}var c=r(a);var l=new e(t);l._propagateFrom(this,1);var f=this._target();l._setBoundTo(c);if(c instanceof e){var p={promiseRejectionQueued:false,promise:l,target:f,bindingPromise:c};f._then(t,i,void 0,l,p);c._then(s,u,void 0,l,p);l._setOnCancel(c)}else l._resolveCallback(f);return l};e.prototype._setBoundTo=function(e){if(void 0!==e){this._bitField=2097152|this._bitField;this._boundTo=e}else this._bitField=-2097153&this._bitField};e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)};e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";var n;"undefined"!==typeof Promise&&(n=Promise);function o(){try{Promise===a&&(Promise=n)}catch(e){}return a}var a=e("./promise")();a.noConflict=o;t.exports=a},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var o=n(null);var a=n(null);o[" size"]=a[" size"]=0}t.exports=function(t){var r=e("./util");var n=r.canEvaluate;var o=r.isIdentifier;var a;var i;var s;var u;var c;false;function l(e,n){var o;null!=e&&(o=e[n]);if("function"!==typeof o){var a="Object "+r.classString(e)+" has no method '"+r.toString(n)+"'";throw new t.TypeError(a)}return o}function f(e){var t=this.pop();var r=l(e,t);return r.apply(e,this)}t.prototype.call=function(e){var t=[].slice.call(arguments,1);var r;false;t.push(e);return this._then(f,void 0,void 0,t,void 0)};function p(e){return e[this]}function h(e){var t=+this;t<0&&(t=Math.max(0,t+e.length));return e[t]}t.prototype.get=function(e){var t="number"===typeof e;var r;if(t)r=h;else if(n){var o=i(e);r=null!==o?o:p}else r=p;return this._then(r,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var a=e("./util");var i=a.tryCatch;var s=a.errorObj;var u=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");var e=this;var t=e;while(e._isCancellable()){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel();e._setWillBeCancelled();t=e;e=r}};t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--};t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0};t.prototype._cancelBy=function(e){if(e===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return true}this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true}return false};t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()};t.prototype._cancel=function(){if(!this._isCancellable())return;this._setCancelled();u.invoke(this._cancelPromises,this,void 0)};t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()};t.prototype._unsetOnCancel=function(){this._onCancelField=void 0};t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()};t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};t.prototype._doInvokeOnCancel=function(e,t){if(a.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"===typeof e){if(!t){var n=i(e).call(this._boundValue());if(n===s){this._attachExtraTrace(n.e);u.throwLater(n.e)}}}else e._resultCancelled(this)};t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel();u.invoke(this._doInvokeOnCancel,this,e)};t.prototype._invokeInternalOnCancel=function(){if(this._isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel()}};t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util");var n=e("./es5").keys;var o=r.tryCatch;var a=r.errorObj;function i(e,i,s){return function(u){var c=s._boundValue();e:for(var l=0;l<e.length;++l){var f=e[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(i).call(c,u)}else if("function"===typeof f){var p=o(f).call(c,u);if(p===a)return p;if(p)return o(i).call(c,u)}else if(r.isObject(u)){var h=n(f);for(var d=0;d<h.length;++d){var v=h[d];if(f[v]!=u[v])continue e}return o(i).call(c,u)}}return t}}return i}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){var t=false;var r=[];e.prototype._promiseCreated=function(){};e.prototype._pushContext=function(){};e.prototype._popContext=function(){return null};e._peekContext=e.prototype._peekContext=function(){};function n(){this._trace=new n.CapturedTrace(a())}n.prototype._pushContext=function(){if(void 0!==this._trace){this._trace._promiseCreated=null;r.push(this._trace)}};n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop();var t=e._promiseCreated;e._promiseCreated=null;return t}return null};function o(){if(t)return new n}function a(){var e=r.length-1;if(e>=0)return r[e];return}n.CapturedTrace=null;n.create=o;n.deactivateLongStackTraces=function(){};n.activateLongStackTraces=function(){var r=e.prototype._pushContext;var o=e.prototype._popContext;var i=e._peekContext;var s=e.prototype._peekContext;var u=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r;e.prototype._popContext=o;e._peekContext=i;e.prototype._peekContext=s;e.prototype._promiseCreated=u;t=false};t=true;e.prototype._pushContext=n.prototype._pushContext;e.prototype._popContext=n.prototype._popContext;e._peekContext=e.prototype._peekContext=a;e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}};return n}},{}],9:[function(e,r,n){"use strict";r.exports=function(r,n){var o=r._getDomain;var a=r._async;var i=e("./errors").Warning;var s=e("./util");var u=s.canAttachTrace;var c;var l;var f=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var p=/\((?:timers\.js):\d+:\d+\)/;var h=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/;var d=null;var v=null;var m=false;var _;var y=!!(0!=s.env("BLUEBIRD_DEBUG")&&true);var g=!!(0!=s.env("BLUEBIRD_WARNINGS")&&(y||s.env("BLUEBIRD_WARNINGS")));var b=!!(0!=s.env("BLUEBIRD_LONG_STACK_TRACES")&&(y||s.env("BLUEBIRD_LONG_STACK_TRACES")));var w=0!=s.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(g||!!s.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288};r.prototype._ensurePossibleRejectionHandled=function(){if(0!==(524288&this._bitField))return;this._setRejectionIsUnhandled();a.invokeLater(this._notifyUnhandledRejection,this,void 0)};r.prototype._notifyUnhandledRejectionIsHandled=function(){$("rejectionHandled",c,void 0,this)};r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField};r.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)};r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified();$("unhandledRejection",l,e,this)}};r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField};r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField};r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0};r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField};r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0};r.prototype._warn=function(e,t,r){return H(e,t,r||this)};r.onPossiblyUnhandledRejection=function(e){var t=o();l="function"===typeof e?null===t?e:s.domainBind(t,e):void 0};r.onUnhandledRejectionHandled=function(e){var t=o();c="function"===typeof e?null===t?e:s.domainBind(t,e):void 0};var E=function(){};r.longStackTraces=function(){if(a.haveItemsQueued()&&!ie.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ie.longStackTraces&&J()){var e=r.prototype._captureStackTrace;var t=r.prototype._attachExtraTrace;ie.longStackTraces=true;E=function(){if(a.haveItemsQueued()&&!ie.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=e;r.prototype._attachExtraTrace=t;n.deactivateLongStackTraces();a.enableTrampoline();ie.longStackTraces=false};r.prototype._captureStackTrace=B;r.prototype._attachExtraTrace=N;n.activateLongStackTraces();a.disableTrampolineIfNecessary()}};r.hasLongStackTraces=function(){return ie.longStackTraces&&J()};var C=function(){try{if("function"===typeof CustomEvent){var e=new CustomEvent("CustomEvent");s.global.dispatchEvent(e);return function(e,t){var r=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:true});return!s.global.dispatchEvent(r)}}if("function"===typeof Event){var e=new Event("CustomEvent");s.global.dispatchEvent(e);return function(e,t){var r=new Event(e.toLowerCase(),{cancelable:true});r.detail=t;return!s.global.dispatchEvent(r)}}var e=document.createEvent("CustomEvent");e.initCustomEvent("testingtheevent",false,true,{});s.global.dispatchEvent(e);return function(e,t){var r=document.createEvent("CustomEvent");r.initCustomEvent(e.toLowerCase(),false,true,t);return!s.global.dispatchEvent(r)}}catch(e){}return function(){return false}}();var S=function(){if(s.isNode)return function(){return t.emit.apply(t,arguments)};if(!s.global)return function(){return false};return function(e){var t="on"+e.toLowerCase();var r=s.global[t];if(!r)return false;r.apply(s.global,[].slice.call(arguments,1));return true}}();function j(e,t){return{promise:t}}var R={promiseCreated:j,promiseFulfilled:j,promiseRejected:j,promiseResolved:j,promiseCancelled:j,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:j};var O=function(e){var t=false;try{t=S.apply(null,arguments)}catch(e){a.throwLater(e);t=true}var r=false;try{r=C(e,R[e].apply(null,arguments))}catch(e){a.throwLater(e);r=true}return r||t};r.config=function(e){e=Object(e);"longStackTraces"in e&&(e.longStackTraces?r.longStackTraces():!e.longStackTraces&&r.hasLongStackTraces()&&E());if("warnings"in e){var t=e.warnings;ie.warnings=!!t;w=ie.warnings;s.isObject(t)&&"wForgottenReturn"in t&&(w=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ie.cancellation){if(a.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=M;r.prototype._propagateFrom=L;r.prototype._onCancel=k;r.prototype._setOnCancel=F;r.prototype._attachCancellationCallback=P;r.prototype._execute=T;I=L;ie.cancellation=true}if("monitoring"in e)if(e.monitoring&&!ie.monitoring){ie.monitoring=true;r.prototype._fireEvent=O}else if(!e.monitoring&&ie.monitoring){ie.monitoring=false;r.prototype._fireEvent=x}return r};function x(){return false}r.prototype._fireEvent=x;r.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}};r.prototype._onCancel=function(){};r.prototype._setOnCancel=function(e){};r.prototype._attachCancellationCallback=function(e){};r.prototype._captureStackTrace=function(){};r.prototype._attachExtraTrace=function(){};r.prototype._clearCancellationData=function(){};r.prototype._propagateFrom=function(e,t){};function T(e,t,r){var n=this;try{e(t,r,function(e){if("function"!==typeof e)throw new TypeError("onCancel must be a function, got: "+s.toString(e));n._attachCancellationCallback(e)})}catch(e){return e}}function P(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?s.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function k(){return this._onCancelField}function F(e){this._onCancelField=e}function M(){this._cancellationParent=void 0;this._onCancelField=void 0}function L(e,t){if(0!==(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0);e._branchesRemainingToCancel=r+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function A(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}var I=A;function D(){var e=this._boundTo;if(void 0!==e&&e instanceof r)return e.isFulfilled()?e.value():void 0;return e}function B(){this._trace=new oe(this._peekContext())}function N(e,t){if(u(e)){var r=this._trace;void 0!==r&&t&&(r=r._parent);if(void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=Q(e);s.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n"));s.notEnumerableProp(e,"__stackCleaned__",true)}}}function U(e,t,r,n,o){if(void 0===e&&null!==t&&w){if(void 0!==o&&o._returnedNonUndefined())return;if(0===(65535&n._bitField))return;r&&(r+=" ");var a="";var i="";if(t._trace){var s=t._trace.stack.split("\n");var u=Y(s);for(var c=u.length-1;c>=0;--c){var l=u[c];if(!p.test(l)){var f=l.match(h);f&&(a="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0){var d=u[0];for(var c=0;c<s.length;++c)if(s[c]===d){c>0&&(i="\n"+s[c-1]);break}}}var v="a promise was created in a "+r+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+i;n._warn(v,true,t)}}function V(e,t){var r=e+" is deprecated and will be removed in a future version.";t&&(r+=" Use "+t+" instead.");return H(r)}function H(e,t,n){if(!ie.warnings)return;var o=new i(e);var a;if(t)n._attachExtraTrace(o);else if(ie.longStackTraces&&(a=r._peekContext()))a.attachExtraTrace(o);else{var s=Q(o);o.stack=s.message+"\n"+s.stack.join("\n")}O("warning",o)||K(o,"",true)}function G(e,t){for(var r=0;r<t.length-1;++r){t[r].push("From previous event:");t[r]=t[r].join("\n")}r<t.length&&(t[r]=t[r].join("\n"));return e+"\n"+t.join("\n")}function z(e){for(var t=0;t<e.length;++t)if(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0]){e.splice(t,1);t--}}function q(e){var t=e[0];for(var r=1;r<e.length;++r){var n=e[r];var o=t.length-1;var a=t[o];var i=-1;for(var s=n.length-1;s>=0;--s)if(n[s]===a){i=s;break}for(var s=i;s>=0;--s){var u=n[s];if(t[o]!==u)break;t.pop();o--}t=n}}function Y(e){var t=[];for(var r=0;r<e.length;++r){var n=e[r];var o="    (No stack trace)"===n||d.test(n);var a=o&&ee(n);if(o&&!a){m&&" "!==n.charAt(0)&&(n="    "+n);t.push(n)}}return t}function W(e){var t=e.stack.replace(/\s+$/g,"").split("\n");for(var r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||d.test(n))break}r>0&&"SyntaxError"!=e.name&&(t=t.slice(r));return t}function Q(e){var t=e.stack;var r=e.toString();t="string"===typeof t&&t.length>0?W(e):["    (No stack trace)"];return{message:r,stack:"SyntaxError"==e.name?t:Y(t)}}function K(e,t,r){if("undefined"!==typeof console){var n;if(s.isObject(e)){var o=e.stack;n=t+v(o,e)}else n=t+String(e);"function"===typeof _?_(n,r):"function"!==typeof console.log&&"object"!==typeof console.log||console.log(n)}}function $(e,t,r,n){var o=false;try{if("function"===typeof t){o=true;"rejectionHandled"===e?t(n):t(r,n)}}catch(e){a.throwLater(e)}"unhandledRejection"===e?O(e,r,n)||o||K(r,"Unhandled rejection "):O(e,n)}function X(e){var t;if("function"===typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"===typeof e.toString?e.toString():s.toString(e);var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(t))try{var n=JSON.stringify(e);t=n}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+Z(t)+">, no stack trace)"}function Z(e){var t=41;if(e.length<t)return e;return e.substr(0,t-3)+"..."}function J(){return"function"===typeof ae}var ee=function(){return false};var te=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function re(e){var t=e.match(te);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function ne(e,t){if(!J())return;var r=e.stack.split("\n");var n=t.stack.split("\n");var o=-1;var a=-1;var i;var s;for(var u=0;u<r.length;++u){var c=re(r[u]);if(c){i=c.fileName;o=c.line;break}}for(var u=0;u<n.length;++u){var c=re(n[u]);if(c){s=c.fileName;a=c.line;break}}if(o<0||a<0||!i||!s||i!==s||o>=a)return;ee=function(e){if(f.test(e))return true;var t=re(e);if(t&&t.fileName===i&&o<=t.line&&t.line<=a)return true;return false}}function oe(e){this._parent=e;this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ae(this,oe);t>32&&this.uncycle()}s.inherits(oe,Error);n.CapturedTrace=oe;oe.prototype.uncycle=function(){var e=this._length;if(e<2)return;var t=[];var r={};for(var n=0,o=this;void 0!==o;++n){t.push(o);o=o._parent}e=this._length=n;for(var n=e-1;n>=0;--n){var a=t[n].stack;void 0===r[a]&&(r[a]=n)}for(var n=0;n<e;++n){var i=t[n].stack;var s=r[i];if(void 0!==s&&s!==n){if(s>0){t[s-1]._parent=void 0;t[s-1]._length=1}t[n]._parent=void 0;t[n]._length=1;var u=n>0?t[n-1]:this;if(s<e-1){u._parent=t[s+1];u._parent.uncycle();u._length=u._parent._length+1}else{u._parent=void 0;u._length=1}var c=u._length+1;for(var l=n-2;l>=0;--l){t[l]._length=c;c++}return}}};oe.prototype.attachExtraTrace=function(e){if(e.__stackCleaned__)return;this.uncycle();var t=Q(e);var r=t.message;var n=[t.stack];var o=this;while(void 0!==o){n.push(Y(o.stack.split("\n")));o=o._parent}q(n);z(n);s.notEnumerableProp(e,"stack",G(r,n));s.notEnumerableProp(e,"__stackCleaned__",true)};var ae=function e(){var t=/^\s*at\s*/;var r=function(e,t){if("string"===typeof e)return e;if(void 0!==t.name&&void 0!==t.message)return t.toString();return X(t)};if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){Error.stackTraceLimit+=6;d=t;v=r;var n=Error.captureStackTrace;ee=function(e){return f.test(e)};return function(e,t){Error.stackTraceLimit+=6;n(e,t);Error.stackTraceLimit-=6}}var o=new Error;if("string"===typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0){d=/@/;v=r;m=true;return function e(t){t.stack=(new Error).stack}}var a;try{throw new Error}catch(e){a="stack"in e}if(!("stack"in o)&&a&&"number"===typeof Error.stackTraceLimit){d=t;v=r;return function e(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6}}v=function(e,t){if("string"===typeof e)return e;if(("object"===typeof t||"function"===typeof t)&&void 0!==t.name&&void 0!==t.message)return t.toString();return X(t)};return null}([]);if("undefined"!==typeof console&&"undefined"!==typeof console.warn){_=function(e){console.warn(e)};s.isNode&&t.stderr.isTTY?_=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:s.isNode||"string"!==typeof(new Error).stack||(_=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")})}var ie={warnings:g,longStackTraces:false,cancellation:false,monitoring:false};b&&r.longStackTraces();return{longStackTraces:function(){return ie.longStackTraces},warnings:function(){return ie.warnings},cancellation:function(){return ie.cancellation},monitoring:function(){return ie.monitoring},propagateFromFunction:function(){return I},boundValueFunction:function(){return D},checkForgottenReturns:U,setBounds:ne,warn:H,deprecated:V,CapturedTrace:oe,fireDomEvent:C,fireGlobalEvent:S}}},{"./errors":12,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(r){r instanceof e&&r.suppressUnhandledRejections();return this._then(t,void 0,void 0,{value:r},void 0)};e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)};e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1];var n=function(){throw t};return this.caught(e,n)};e.prototype.catchReturn=function(r){if(arguments.length<=1){r instanceof e&&r.suppressUnhandledRejections();return this._then(void 0,t,void 0,{value:r},void 0)}var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var o=function(){return n};return this.caught(r,o)}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce;var n=e.all;function o(){return n(this)}function a(e,n){return r(e,n,t,t)}e.prototype.each=function(e){return r(this,e,t,0)._then(o,void 0,void 0,this,void 0)};e.prototype.mapSeries=function(e){return r(this,e,t,t)};e.each=function(e,n){return r(e,n,t,0)._then(o,void 0,void 0,e,void 0)};e.mapSeries=a}},{}],12:[function(e,t,r){"use strict";var n=e("./es5");var o=n.freeze;var a=e("./util");var i=a.inherits;var s=a.notEnumerableProp;function u(e,t){function r(n){if(!(this instanceof r))return new r(n);s(this,"message","string"===typeof n?n:t);s(this,"name",e);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}i(r,Error);return r}var c,l;var f=u("Warning","warning");var p=u("CancellationError","cancellation error");var h=u("TimeoutError","timeout error");var d=u("AggregateError","aggregate error");try{c=TypeError;l=RangeError}catch(e){c=u("TypeError","type error");l=u("RangeError","range error")}var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" ");for(var m=0;m<v.length;++m)"function"===typeof Array.prototype[v[m]]&&(d.prototype[v[m]]=Array.prototype[v[m]]);n.defineProperty(d.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});d.prototype["isOperational"]=true;var _=0;d.prototype.toString=function(){var e=Array(4*_+1).join(" ");var t="\n"+e+"AggregateError of:\n";_++;e=Array(4*_+1).join(" ");for(var r=0;r<this.length;++r){var n=this[r]===this?"[Circular AggregateError]":this[r]+"";var o=n.split("\n");for(var a=0;a<o.length;++a)o[a]=e+o[a];n=o.join("\n");t+=n+"\n"}_--;return t};function y(e){if(!(this instanceof y))return new y(e);s(this,"name","OperationalError");s(this,"message",e);this.cause=e;this["isOperational"]=true;if(e instanceof Error){s(this,"message",e.message);s(this,"stack",e.stack)}else Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}i(y,Error);var g=Error["__BluebirdErrorTypes__"];if(!g){g=o({CancellationError:p,TimeoutError:h,OperationalError:y,RejectionError:y,AggregateError:d});n.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:false,enumerable:false,configurable:false})}t.exports={Error:Error,TypeError:c,RangeError:l,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!!(!r||r.writable||r.set)}};else{var o={}.hasOwnProperty;var a={}.toString;var i={}.constructor.prototype;var s=function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t};var u=function(e,t){return{value:e[t]}};var c=function(e,t,r){e[t]=r.value;return e};var l=function(e){return e};var f=function(e){try{return Object(e).constructor.prototype}catch(e){return i}};var p=function(e){try{return"[object Array]"===a.call(e)}catch(e){return false}};t.exports={isArray:p,keys:s,names:s,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:f,isES5:n,propertyIsWritable:function(){return true}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)};e.filter=function(e,n,o){return r(e,n,o,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util");var a=t.CancellationError;var i=o.errorObj;var s=e("./catch_filter")(n);function u(e,t,r){this.promise=e;this.type=t;this.handler=r;this.called=false;this.cancelPromise=null}u.prototype.isFinallyHandler=function(){return 0===this.type};function c(e){this.finallyHandler=e}c.prototype._resultCancelled=function(){l(this.finallyHandler)};function l(e,t){if(null!=e.cancelPromise){arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel();e.cancelPromise=null;return true}return false}function f(){return h.call(this,this.promise._target()._settledValue())}function p(e){if(l(this,e))return;i.e=e;return i}function h(e){var o=this.promise;var s=this.handler;if(!this.called){this.called=true;var u=this.isFinallyHandler()?s.call(o._boundValue()):s.call(o._boundValue(),e);if(u===n)return u;if(void 0!==u){o._setReturnedNonUndefined();var h=r(u,o);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var d=new a("late cancellation observer");o._attachExtraTrace(d);i.e=d;return i}h.isPending()&&h._attachCancellationCallback(new c(this))}return h._then(f,p,void 0,this,void 0)}}}if(o.isRejected()){l(this);i.e=e;return i}l(this);return e}t.prototype._passThrough=function(e,t,r,n){if("function"!==typeof e)return this.then();return this._then(r,n,void 0,new u(this,t,e),void 0)};t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,h,h)};t.prototype.tap=function(e){return this._passThrough(e,1,h)};t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,h);var n=new Array(r-1),a=0,i;for(i=0;i<r-1;++i){var u=arguments[i];if(!o.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(u)));n[a++]=u}n.length=a;var c=arguments[i];return this._passThrough(s(n,c,this),1,void 0,h)};return u}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,a,i){var s=e("./errors");var u=s.TypeError;var c=e("./util");var l=c.errorObj;var f=c.tryCatch;var p=[];function h(e,r,n){for(var a=0;a<r.length;++a){n._pushContext();var i=f(r[a])(e);n._popContext();if(i===l){n._pushContext();var s=t.reject(l.e);n._popContext();return s}var u=o(i,n);if(u instanceof t)return u}return null}function d(e,r,o,a){if(i.cancellation()){var s=new t(n);var u=this._finallyPromise=new t(n);this._promise=s.lastly(function(){return u});s._captureStackTrace();s._setOnCancel(this)}else{var c=this._promise=new t(n);c._captureStackTrace()}this._stack=a;this._generatorFunction=e;this._receiver=r;this._generator=void 0;this._yieldHandlers="function"===typeof o?[o].concat(p):p;this._yieldedPromise=null;this._cancellationPhase=false}c.inherits(d,a);d.prototype._isResolved=function(){return null===this._promise};d.prototype._cleanup=function(){this._promise=this._generator=null;if(i.cancellation()&&null!==this._finallyPromise){this._finallyPromise._fulfill();this._finallyPromise=null}};d.prototype._promiseCancelled=function(){if(this._isResolved())return;var e="undefined"!==typeof this._generator["return"];var r;if(e){this._promise._pushContext();r=f(this._generator["return"]).call(this._generator,void 0);this._promise._popContext()}else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n;this._promise._attachExtraTrace(n);this._promise._pushContext();r=f(this._generator["throw"]).call(this._generator,n);this._promise._popContext()}this._cancellationPhase=true;this._yieldedPromise=null;this._continue(r)};d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null;this._promise._pushContext();var t=f(this._generator.next).call(this._generator,e);this._promise._popContext();this._continue(t)};d.prototype._promiseRejected=function(e){this._yieldedPromise=null;this._promise._attachExtraTrace(e);this._promise._pushContext();var t=f(this._generator["throw"]).call(this._generator,e);this._promise._popContext();this._continue(t)};d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null;e.cancel()}};d.prototype.promise=function(){return this._promise};d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._promiseFulfilled(void 0)};d.prototype._continue=function(e){var r=this._promise;if(e===l){this._cleanup();return this._cancellationPhase?r.cancel():r._rejectCallback(e.e,false)}var n=e.value;if(true===e.done){this._cleanup();return this._cancellationPhase?r.cancel():r._resolveCallback(n)}var a=o(n,this._promise);if(!(a instanceof t)){a=h(a,this._yieldHandlers,this._promise);if(null===a){this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return}}a=a._target();var i=a._bitField;if(0===(50397184&i)){this._yieldedPromise=a;a._proxy(this,null)}else 0!==(33554432&i)?t._async.invoke(this._promiseFulfilled,this,a._value()):0!==(16777216&i)?t._async.invoke(this._promiseRejected,this,a._reason()):this._promiseCancelled()};t.coroutine=function(e,t){if("function"!==typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler;var n=d;var o=(new Error).stack;return function(){var t=e.apply(this,arguments);var a=new n(void 0,void 0,r,o);var i=a.promise();a._generator=t;a._promiseFulfilled(void 0);return i}};t.coroutine.addYieldHandler=function(e){if("function"!==typeof e)throw new u("expecting a function but got "+c.classString(e));p.push(e)};t.spawn=function(e){i.deprecated("Promise.spawn()","Promise.coroutine()");if("function"!==typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new d(e,this);var o=n.promise();n._run(t.spawn);return o}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,a,i){var s=e("./util");var u=s.canEvaluate;var c=s.tryCatch;var l=s.errorObj;var f;var p;var h;var d;var v;var m;var _;var y;false;t.join=function(){var e=arguments.length-1;var t;if(e>0&&"function"===typeof arguments[e]){t=arguments[e];var n;var o;var a;var i;var s;var u;var c;var l;false}var f=[].slice.call(arguments);t&&f.pop();var n=new r(f).promise();return void 0!==t?n.spread(t):n}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,a,i){var s=t._getDomain;var u=e("./util");var c=u.tryCatch;var l=u.errorObj;var f=t._async;function p(e,t,r,n){this.constructor$(e);this._promise._captureStackTrace();var o=s();this._callback=null===o?t:u.domainBind(o,t);this._preservedValues=n===a?new Array(this.length()):null;this._limit=r;this._inFlight=0;this._queue=[];f.invoke(this._asyncInit,this,void 0)}u.inherits(p,r);p.prototype._asyncInit=function(){this._init$(void 0,-2)};p.prototype._init=function(){};p.prototype._promiseFulfilled=function(e,r){var n=this._values;var a=this.length();var s=this._preservedValues;var u=this._limit;if(r<0){r=-1*r-1;n[r]=e;if(u>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return true}}else{if(u>=1&&this._inFlight>=u){n[r]=e;this._queue.push(r);return false}null!==s&&(s[r]=e);var f=this._promise;var p=this._callback;var h=f._boundValue();f._pushContext();var d=c(p).call(h,e,r,a);var v=f._popContext();i.checkForgottenReturns(d,v,null!==s?"Promise.filter":"Promise.map",f);if(d===l){this._reject(d.e);return true}var m=o(d,this._promise);if(m instanceof t){m=m._target();var _=m._bitField;if(0===(50397184&_)){u>=1&&this._inFlight++;n[r]=m;m._proxy(this,-1*(r+1));return false}if(0===(33554432&_)){if(0!==(16777216&_)){this._reject(m._reason());return true}this._cancel();return true}d=m._value()}n[r]=d}var y=++this._totalResolved;if(y>=a){null!==s?this._filter(n,s):this._resolve(n);return true}return false};p.prototype._drainQueue=function(){var e=this._queue;var t=this._limit;var r=this._values;while(e.length>0&&this._inFlight<t){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}};p.prototype._filter=function(e,t){var r=t.length;var n=new Array(r);var o=0;for(var a=0;a<r;++a)e[a]&&(n[o++]=t[a]);n.length=o;this._resolve(n)};p.prototype.preservedValues=function(){return this._preservedValues};function h(e,r,o,a){if("function"!==typeof r)return n("expecting a function but got "+u.classString(r));var i=0;if(void 0!==o){if("object"!==typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(o)));if("number"!==typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(o.concurrency)));i=o.concurrency}i="number"===typeof i&&isFinite(i)&&i>=1?i:0;return new p(e,r,i,a).promise()}t.prototype.map=function(e,t){return h(this,e,t,null)};t.map=function(e,t,r,n){return h(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,a){var i=e("./util");var s=i.tryCatch;t.method=function(e){if("function"!==typeof e)throw new t.TypeError("expecting a function but got "+i.classString(e));return function(){var n=new t(r);n._captureStackTrace();n._pushContext();var o=s(e).apply(this,arguments);var i=n._popContext();a.checkForgottenReturns(o,i,"Promise.method",n);n._resolveFromSyncValue(o);return n}};t.attempt=t["try"]=function(e){if("function"!==typeof e)return o("expecting a function but got "+i.classString(e));var n=new t(r);n._captureStackTrace();n._pushContext();var u;if(arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1];var l=arguments[2];u=i.isArray(c)?s(e).apply(l,c):s(e).call(l,c)}else u=s(e)();var f=n._popContext();a.checkForgottenReturns(u,f,"Promise.try",n);n._resolveFromSyncValue(u);return n};t.prototype._resolveFromSyncValue=function(e){e===i.errorObj?this._rejectCallback(e.e,false):this._resolveCallback(e,true)}}},{"./util":36}],20:[function(e,t,r){"use strict";var n=e("./util");var o=n.maybeWrapAsError;var a=e("./errors");var i=a.OperationalError;var s=e("./es5");function u(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}var c=/^(?:name|message|stack|cause)$/;function l(e){var t;if(u(e)){t=new i(e);t.name=e.name;t.message=e.message;t.stack=e.stack;var r=s.keys(e);for(var o=0;o<r.length;++o){var a=r[o];c.test(a)||(t[a]=e[a])}return t}n.markAsOriginatingFromRejection(e);return e}function f(e,t){return function(r,n){if(null===e)return;if(r){var a=l(o(r));e._attachExtraTrace(a);e._reject(a)}else if(t){var i=[].slice.call(arguments,1);e._fulfill(i)}else e._fulfill(n);e=null}}t.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util");var n=t._async;var o=r.tryCatch;var a=r.errorObj;function i(e,t){var i=this;if(!r.isArray(e))return s.call(i,e,t);var u=o(t).apply(i._boundValue(),[null].concat(e));u===a&&n.throwLater(u.e)}function s(e,t){var r=this;var i=r._boundValue();var s=void 0===e?o(t).call(i,null):o(t).call(i,null,e);s===a&&n.throwLater(s.e)}function u(e,t){var r=this;if(!e){var i=new Error(e+"");i.cause=e;e=i}var s=o(t).call(r._boundValue(),e);s===a&&n.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=s;void 0!==t&&Object(t).spread&&(r=i);this._then(r,u,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,r,n){"use strict";r.exports=function(){var n=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")};var o=function(){return new k.PromiseInspection(this._target())};var a=function(e){return k.reject(new d(e))};function i(){}var s={};var u=e("./util");var c;c=u.isNode?function(){var e=t.domain;void 0===e&&(e=null);return e}:function(){return null};u.notEnumerableProp(k,"_getDomain",c);var l=e("./es5");var f=e("./async");var p=new f;l.defineProperty(k,"_async",{value:p});var h=e("./errors");var d=k.TypeError=h.TypeError;k.RangeError=h.RangeError;var v=k.CancellationError=h.CancellationError;k.TimeoutError=h.TimeoutError;k.OperationalError=h.OperationalError;k.RejectionError=h.OperationalError;k.AggregateError=h.AggregateError;var m=function(){};var _={};var y={};var g=e("./thenables")(k,m);var b=e("./promise_array")(k,m,g,a,i);var w=e("./context")(k);var E=w.create;var C=e("./debuggability")(k,w);var S=C.CapturedTrace;var j=e("./finally")(k,g,y);var R=e("./catch_filter")(y);var O=e("./nodeback");var x=u.errorObj;var T=u.tryCatch;function P(e,t){if(null==e||e.constructor!==k)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!==typeof t)throw new d("expecting a function but got "+u.classString(t))}function k(e){e!==m&&P(this,e);this._bitField=0;this._fulfillmentHandler0=void 0;this._rejectionHandler0=void 0;this._promise0=void 0;this._receiver0=void 0;this._resolveFromExecutor(e);this._promiseCreated();this._fireEvent("promiseCreated",this)}k.prototype.toString=function(){return"[object Promise]"};k.prototype.caught=k.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var r=new Array(t-1),n=0,o;for(o=0;o<t-1;++o){var i=arguments[o];if(!u.isObject(i))return a("Catch statement predicate: expecting an object but got "+u.classString(i));r[n++]=i}r.length=n;e=arguments[o];return this.then(void 0,R(r,e,this))}return this.then(void 0,e)};k.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)};k.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!==typeof e&&"function"!==typeof t){var r=".then() only accepts functions but was passed: "+u.classString(e);arguments.length>1&&(r+=", "+u.classString(t));this._warn(r)}return this._then(e,t,void 0,void 0,void 0)};k.prototype.done=function(e,t){var r=this._then(e,t,void 0,void 0,void 0);r._setIsFinal()};k.prototype.spread=function(e){if("function"!==typeof e)return a("expecting a function but got "+u.classString(e));return this.all()._then(e,void 0,void 0,_,void 0)};k.prototype.toJSON=function(){var e={isFulfilled:false,isRejected:false,fulfillmentValue:void 0,rejectionReason:void 0};if(this.isFulfilled()){e.fulfillmentValue=this.value();e.isFulfilled=true}else if(this.isRejected()){e.rejectionReason=this.reason();e.isRejected=true}return e};k.prototype.all=function(){arguments.length>0&&this._warn(".all() was passed arguments but it does not take any");return new b(this).promise()};k.prototype.error=function(e){return this.caught(u.originatesFromRejection,e)};k.getNewLibraryCopy=r.exports;k.is=function(e){return e instanceof k};k.fromNode=k.fromCallback=function(e){var t=new k(m);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs;var n=T(e)(O(t,r));n===x&&t._rejectCallback(n.e,true);t._isFateSealed()||t._setAsyncGuaranteed();return t};k.all=function(e){return new b(e).promise()};k.cast=function(e){var t=g(e);if(!(t instanceof k)){t=new k(m);t._captureStackTrace();t._setFulfilled();t._rejectionHandler0=e}return t};k.resolve=k.fulfilled=k.cast;k.reject=k.rejected=function(e){var t=new k(m);t._captureStackTrace();t._rejectCallback(e,true);return t};k.setScheduler=function(e){if("function"!==typeof e)throw new d("expecting a function but got "+u.classString(e));return p.setScheduler(e)};k.prototype._then=function(e,t,r,n,o){var a=void 0!==o;var i=a?o:new k(m);var s=this._target();var l=s._bitField;if(!a){i._propagateFrom(this,3);i._captureStackTrace();void 0===n&&0!==(2097152&this._bitField)&&(n=0===(50397184&l)?s===this?void 0:this._boundTo:this._boundValue());this._fireEvent("promiseChained",this,i)}var f=c();if(0===(50397184&l))s._addCallbacks(e,t,i,n,f);else{var h,d,_=s._settlePromiseCtx;if(0!==(33554432&l)){d=s._rejectionHandler0;h=e}else if(0!==(16777216&l)){d=s._fulfillmentHandler0;h=t;s._unsetRejectionIsUnhandled()}else{_=s._settlePromiseLateCancellationObserver;d=new v("late cancellation observer");s._attachExtraTrace(d);h=t}p.invoke(_,s,{handler:null===f?h:"function"===typeof h&&u.domainBind(f,h),promise:i,receiver:n,value:d})}return i};k.prototype._length=function(){return 65535&this._bitField};k.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)};k.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)};k.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e};k.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField;this._fireEvent("promiseFulfilled",this)};k.prototype._setRejected=function(){this._bitField=16777216|this._bitField;this._fireEvent("promiseRejected",this)};k.prototype._setFollowing=function(){this._bitField=67108864|this._bitField;this._fireEvent("promiseResolved",this)};k.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField};k.prototype._isFinal=function(){return(4194304&this._bitField)>0};k.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField};k.prototype._setCancelled=function(){this._bitField=65536|this._bitField;this._fireEvent("promiseCancelled",this)};k.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField};k.prototype._setAsyncGuaranteed=function(){if(p.hasCustomScheduler())return;this._bitField=134217728|this._bitField};k.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t===s)return;if(void 0===t&&this._isBound())return this._boundValue();return t};k.prototype._promiseAt=function(e){return this[4*e-4+2]};k.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]};k.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]};k.prototype._boundValue=function(){};k.prototype._migrateCallback0=function(e){var t=e._bitField;var r=e._fulfillmentHandler0;var n=e._rejectionHandler0;var o=e._promise0;var a=e._receiverAt(0);void 0===a&&(a=s);this._addCallbacks(r,n,o,a,null)};k.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t);var n=e._rejectionHandlerAt(t);var o=e._promiseAt(t);var a=e._receiverAt(t);void 0===a&&(a=s);this._addCallbacks(r,n,o,a,null)};k.prototype._addCallbacks=function(e,t,r,n,o){var a=this._length();if(a>=65531){a=0;this._setLength(0)}if(0===a){this._promise0=r;this._receiver0=n;"function"===typeof e&&(this._fulfillmentHandler0=null===o?e:u.domainBind(o,e));"function"===typeof t&&(this._rejectionHandler0=null===o?t:u.domainBind(o,t))}else{var i=4*a-4;this[i+2]=r;this[i+3]=n;"function"===typeof e&&(this[i+0]=null===o?e:u.domainBind(o,e));"function"===typeof t&&(this[i+1]=null===o?t:u.domainBind(o,t))}this._setLength(a+1);return a};k.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)};k.prototype._resolveCallback=function(e,t){if(0!==(117506048&this._bitField))return;if(e===this)return this._rejectCallback(n(),false);var r=g(e,this);if(!(r instanceof k))return this._fulfill(e);t&&this._propagateFrom(r,2);var o=r._target();if(o===this){this._reject(n());return}var a=o._bitField;if(0===(50397184&a)){var i=this._length();i>0&&o._migrateCallback0(this);for(var s=1;s<i;++s)o._migrateCallbackAt(this,s);this._setFollowing();this._setLength(0);this._setFollowee(o)}else if(0!==(33554432&a))this._fulfill(o._value());else if(0!==(16777216&a))this._reject(o._reason());else{var u=new v("late cancellation observer");o._attachExtraTrace(u);this._reject(u)}};k.prototype._rejectCallback=function(e,t,r){var n=u.ensureErrorObject(e);var o=n===e;if(!o&&!r&&C.warnings()){var a="a promise was rejected with a non-error: "+u.classString(e);this._warn(a,true)}this._attachExtraTrace(n,!!t&&o);this._reject(e)};k.prototype._resolveFromExecutor=function(e){if(e===m)return;var t=this;this._captureStackTrace();this._pushContext();var r=true;var n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,r)});r=false;this._popContext();void 0!==n&&t._rejectCallback(n,true)};k.prototype._settlePromiseFromHandler=function(e,t,r,n){var o=n._bitField;if(0!==(65536&o))return;n._pushContext();var a;if(t===_)if(r&&"number"===typeof r.length)a=T(e).apply(this._boundValue(),r);else{a=x;a.e=new d("cannot .spread() a non-array: "+u.classString(r))}else a=T(e).call(t,r);var i=n._popContext();o=n._bitField;if(0!==(65536&o))return;if(a===y)n._reject(r);else if(a===x)n._rejectCallback(a.e,false);else{C.checkForgottenReturns(a,i,"",n,this);n._resolveCallback(a)}};k.prototype._target=function(){var e=this;while(e._isFollowing())e=e._followee();return e};k.prototype._followee=function(){return this._rejectionHandler0};k.prototype._setFollowee=function(e){this._rejectionHandler0=e};k.prototype._settlePromise=function(e,t,r,n){var a=e instanceof k;var s=this._bitField;var u=0!==(134217728&s);if(0!==(65536&s)){a&&e._invokeInternalOnCancel();if(r instanceof j&&r.isFinallyHandler()){r.cancelPromise=e;T(t).call(r,n)===x&&e._reject(x.e)}else t===o?e._fulfill(o.call(r)):r instanceof i?r._promiseCancelled(e):a||e instanceof b?e._cancel():r.cancel()}else if("function"===typeof t)if(a){u&&e._setAsyncGuaranteed();this._settlePromiseFromHandler(t,r,n,e)}else t.call(r,n,e);else if(r instanceof i)r._isResolved()||(0!==(33554432&s)?r._promiseFulfilled(n,e):r._promiseRejected(n,e));else if(a){u&&e._setAsyncGuaranteed();0!==(33554432&s)?e._fulfill(n):e._reject(n)}};k.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler;var r=e.promise;var n=e.receiver;var o=e.value;"function"===typeof t?r instanceof k?this._settlePromiseFromHandler(t,n,o,r):t.call(n,o,r):r instanceof k&&r._reject(o)};k.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)};k.prototype._settlePromise0=function(e,t,r){var n=this._promise0;var o=this._receiverAt(0);this._promise0=void 0;this._receiver0=void 0;this._settlePromise(n,e,o,t)};k.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0};k.prototype._fulfill=function(e){var t=this._bitField;if((117506048&t)>>>16)return;if(e===this){var r=n();this._attachExtraTrace(r);return this._reject(r)}this._setFulfilled();this._rejectionHandler0=e;(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():p.settlePromises(this))};k.prototype._reject=function(e){var t=this._bitField;if((117506048&t)>>>16)return;this._setRejected();this._fulfillmentHandler0=e;if(this._isFinal())return p.fatalError(e,u.isNode);(65535&t)>0?p.settlePromises(this):this._ensurePossibleRejectionHandled()};k.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r);var o=this._promiseAt(r);var a=this._receiverAt(r);this._clearCallbackDataAtIndex(r);this._settlePromise(o,n,a,t)}};k.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r);var o=this._promiseAt(r);var a=this._receiverAt(r);this._clearCallbackDataAtIndex(r);this._settlePromise(o,n,a,t)}};k.prototype._settlePromises=function(){var e=this._bitField;var t=65535&e;if(t>0){if(0!==(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e);this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e);this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()};k.prototype._settledValue=function(){var e=this._bitField;if(0!==(33554432&e))return this._rejectionHandler0;if(0!==(16777216&e))return this._fulfillmentHandler0};function F(e){this.promise._resolveCallback(e)}function M(e){this.promise._rejectCallback(e,false)}k.defer=k.pending=function(){C.deprecated("Promise.defer","new Promise");var e=new k(m);return{promise:e,resolve:F,reject:M}};u.notEnumerableProp(k,"_makeSelfResolutionError",n);e("./method")(k,m,g,a,C);e("./bind")(k,m,g,C);e("./cancel")(k,b,a,C);e("./direct_resolve")(k);e("./synchronous_inspection")(k);e("./join")(k,b,g,m,p,c);k.Promise=k;k.version="3.5.0";e("./map.js")(k,b,a,g,m,C);e("./call_get.js")(k);e("./using.js")(k,a,g,E,m,C);e("./timers.js")(k,m,C);e("./generators.js")(k,a,m,g,i,C);e("./nodeify.js")(k);e("./promisify.js")(k,m);e("./props.js")(k,b,g,a);e("./race.js")(k,m,g,a);e("./reduce.js")(k,b,a,g,m,C);e("./settle.js")(k,b,C);e("./some.js")(k,b,a);e("./filter.js")(k,m);e("./each.js")(k,m);e("./any.js")(k);u.toFastProperties(k);u.toFastProperties(k.prototype);function L(e){var t=new k(m);t._fulfillmentHandler0=e;t._rejectionHandler0=e;t._promise0=e;t._receiver0=e}L({a:1});L({b:2});L({c:3});L(1);L(function(){});L(void 0);L(false);L(new k(m));C.setBounds(f.firstLineError,u.lastLineError);return k}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,a){var i=e("./util");var s=i.isArray;function u(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function c(e){var n=this._promise=new t(r);e instanceof t&&n._propagateFrom(e,3);n._setOnCancel(this);this._values=e;this._length=0;this._totalResolved=0;this._init(void 0,-2)}i.inherits(c,a);c.prototype.length=function(){return this._length};c.prototype.promise=function(){return this._promise};c.prototype._init=function e(r,a){var s=n(this._values,this._promise);if(s instanceof t){s=s._target();var c=s._bitField;this._values=s;if(0===(50397184&c)){this._promise._setAsyncGuaranteed();return s._then(e,this._reject,void 0,this,a)}if(0===(33554432&c))return 0!==(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}s=i.asArray(s);if(null===s){var l=o("expecting an array or an iterable object but got "+i.classString(s)).reason();this._promise._rejectCallback(l,false);return}if(0===s.length){-5===a?this._resolveEmptyArray():this._resolve(u(a));return}this._iterate(s)};c.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r;this._values=this.shouldCopyValues()?new Array(r):this._values;var o=this._promise;var a=false;var i=null;for(var s=0;s<r;++s){var u=n(e[s],o);if(u instanceof t){u=u._target();i=u._bitField}else i=null;if(a)null!==i&&u.suppressUnhandledRejections();else if(null!==i)if(0===(50397184&i)){u._proxy(this,s);this._values[s]=u}else a=0!==(33554432&i)?this._promiseFulfilled(u._value(),s):0!==(16777216&i)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s);else a=this._promiseFulfilled(u,s)}a||o._setAsyncGuaranteed()};c.prototype._isResolved=function(){return null===this._values};c.prototype._resolve=function(e){this._values=null;this._promise._fulfill(e)};c.prototype._cancel=function(){if(this._isResolved()||!this._promise._isCancellable())return;this._values=null;this._promise._cancel()};c.prototype._reject=function(e){this._values=null;this._promise._rejectCallback(e,false)};c.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;if(r>=this._length){this._resolve(this._values);return true}return false};c.prototype._promiseCancelled=function(){this._cancel();return true};c.prototype._promiseRejected=function(e){this._totalResolved++;this._reject(e);return true};c.prototype._resultCancelled=function(){if(this._isResolved())return;var e=this._values;this._cancel();if(e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()};c.prototype.shouldCopyValues=function(){return true};c.prototype.getActualLength=function(e){return e};return c}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){var n={};var o=e("./util");var a=e("./nodeback");var i=o.withAppended;var s=o.maybeWrapAsError;var u=o.canEvaluate;var c=e("./errors").TypeError;var l="Async";var f={__isPromisified__:true};var p=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var h=new RegExp("^(?:"+p.join("|")+")$");var d=function(e){return o.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function v(e){return!h.test(e)}function m(e){try{return true===e.__isPromisified__}catch(e){return false}}function _(e,t,r){var n=o.getDataPropertyOrDefault(e,t+r,f);return!!n&&m(n)}function y(e,t,r){for(var n=0;n<e.length;n+=2){var o=e[n];if(r.test(o)){var a=o.replace(r,"");for(var i=0;i<e.length;i+=2)if(e[i]===a)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}}function g(e,t,r,n){var a=o.inheritedDataKeys(e);var i=[];for(var s=0;s<a.length;++s){var u=a[s];var c=e[u];var l=n===d||d(u,c,e);"function"!==typeof c||m(c)||_(e,u,t)||!n(u,c,e,l)||i.push(u,c)}y(i,t,r);return i}var b=function(e){return e.replace(/([$])/,"\\$")};var w;var E;var C;var S;var j;false;function R(e,u,c,l,f,p){var h=function(){return this}();var d=e;"string"===typeof d&&(e=l);function v(){var o=u;u===n&&(o=this);var c=new t(r);c._captureStackTrace();var l="string"===typeof d&&this!==h?this[d]:e;var f=a(c,p);try{l.apply(o,i(arguments,f))}catch(e){c._rejectCallback(s(e),true,true)}c._isFateSealed()||c._setAsyncGuaranteed();return c}o.notEnumerableProp(v,"__isPromisified__",true);return v}var O=u?w:R;function x(e,t,r,a,i){var s=new RegExp(b(t)+"$");var u=g(e,t,s,r);for(var c=0,l=u.length;c<l;c+=2){var f=u[c];var p=u[c+1];var h=f+t;if(a===O)e[h]=O(f,n,f,p,t,i);else{var d=a(p,function(){return O(f,n,f,p,t,i)});o.notEnumerableProp(d,"__isPromisified__",true);e[h]=d}}o.toFastProperties(e);return e}function T(e,t,r){return O(e,t,void 0,e,null,r)}t.promisify=function(e,t){if("function"!==typeof e)throw new c("expecting a function but got "+o.classString(e));if(m(e))return e;t=Object(t);var r=void 0===t.context?n:t.context;var a=!!t.multiArgs;var i=T(e,r,a);o.copyDescriptors(e,i,v);return i};t.promisifyAll=function(e,t){if("function"!==typeof e&&"object"!==typeof e)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var r=!!t.multiArgs;var n=t.suffix;"string"!==typeof n&&(n=l);var a=t.filter;"function"!==typeof a&&(a=d);var i=t.promisifier;"function"!==typeof i&&(i=O);if(!o.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");var s=o.inheritedDataKeys(e);for(var u=0;u<s.length;++u){var f=e[s[u]];if("constructor"!==s[u]&&o.isClass(f)){x(f.prototype,n,a,i,r);x(f,n,a,i,r)}}return x(e,n,a,i,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var a=e("./util");var i=a.isObject;var s=e("./es5");var u;"function"===typeof Map&&(u=Map);var c=function(){var e=0;var t=0;function r(r,n){this[e]=r;this[e+t]=n;e++}return function n(o){t=o.size;e=0;var a=new Array(2*o.size);o.forEach(r,a);return a}}();var l=function(e){var t=new u;var r=e.length/2|0;for(var n=0;n<r;++n){var o=e[r+n];var a=e[n];t.set(o,a)}return t};function f(e){var t=false;var r;if(void 0!==u&&e instanceof u){r=c(e);t=true}else{var n=s.keys(e);var o=n.length;r=new Array(2*o);for(var a=0;a<o;++a){var i=n[a];r[a]=e[i];r[a+o]=i}}this.constructor$(r);this._isMap=t;this._init$(void 0,t?-6:-3)}a.inherits(f,r);f.prototype._init=function(){};f.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;if(r>=this._length){var n;if(this._isMap)n=l(this._values);else{n={};var o=this.length();for(var a=0,i=this.length();a<i;++a)n[this._values[a+o]]=this._values[a]}this._resolve(n);return true}return false};f.prototype.shouldCopyValues=function(){return false};f.prototype.getActualLength=function(e){return e>>1};function p(e){var r;var a=n(e);if(!i(a))return o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n");r=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new f(a).promise();a instanceof t&&r._propagateFrom(a,2);return r}t.prototype.props=function(){return p(this)};t.props=function(e){return p(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e,t,r,n,o){for(var a=0;a<o;++a){r[a+n]=e[a+t];e[a+t]=void 0}}function o(e){this._capacity=e;this._length=0;this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e};o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var r=this._front+t&this._capacity-1;this[r]=e;this._length=t+1};o.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n)){this._pushOne(e);this._pushOne(t);this._pushOne(r);return}var o=this._front+n-3;this._checkCapacity(n);var a=this._capacity-1;this[o+0&a]=e;this[o+1&a]=t;this[o+2&a]=r;this._length=n};o.prototype.shift=function(){var e=this._front,t=this[e];this[e]=void 0;this._front=e+1&this._capacity-1;this._length--;return t};o.prototype.length=function(){return this._length};o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)};o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var r=this._front;var o=this._length;var a=r+o&t-1;n(this,0,this,t,a)};t.exports=o},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var a=e("./util");var i=function(e){return e.then(function(t){return s(t,e)})};function s(e,s){var u=n(e);if(u instanceof t)return i(u);e=a.asArray(e);if(null===e)return o("expecting an array or an iterable object but got "+a.classString(e));var c=new t(r);void 0!==s&&c._propagateFrom(s,3);var l=c._fulfill;var f=c._reject;for(var p=0,h=e.length;p<h;++p){var d=e[p];if(void 0===d&&!(p in e))continue;t.cast(d)._then(l,f,void 0,c,null)}return c}t.race=function(e){return s(e,void 0)};t.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,a,i){var s=t._getDomain;var u=e("./util");var c=u.tryCatch;function l(e,r,n,o){this.constructor$(e);var i=s();this._fn=null===i?r:u.domainBind(i,r);if(void 0!==n){n=t.resolve(n);n._attachCancellationCallback(this)}this._initialValue=n;this._currentCancellable=null;this._eachValues=o===a?Array(this._length):0===o?null:void 0;this._promise._captureStackTrace();this._init$(void 0,-5)}u.inherits(l,r);l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==a&&this._eachValues.push(e)};l.prototype._eachComplete=function(e){null!==this._eachValues&&this._eachValues.push(e);return this._eachValues};l.prototype._init=function(){};l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)};l.prototype.shouldCopyValues=function(){return false};l.prototype._resolve=function(e){this._promise._resolveCallback(e);this._values=null};l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();if(this._isResolved())return;this._resultCancelled$();this._currentCancellable instanceof t&&this._currentCancellable.cancel();this._initialValue instanceof t&&this._initialValue.cancel()};l.prototype._iterate=function(e){this._values=e;var r;var n;var o=e.length;if(void 0!==this._initialValue){r=this._initialValue;n=0}else{r=t.resolve(e[0]);n=1}this._currentCancellable=r;if(!r.isRejected())for(;n<o;++n){var a={accum:null,value:e[n],index:n,length:o,array:this};r=r._then(h,void 0,void 0,a,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0));r._then(f,f,void 0,r,this)};t.prototype.reduce=function(e,t){return p(this,e,t,null)};t.reduce=function(e,t,r,n){return p(e,t,r,n)};function f(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function p(e,t,r,o){if("function"!==typeof t)return n("expecting a function but got "+u.classString(t));var a=new l(e,t,r,o);return a.promise()}function h(e){this.accum=e;this.array._gotAccum(e);var r=o(this.value,this.array._promise);if(r instanceof t){this.array._currentCancellable=r;return r._then(d,void 0,void 0,this,void 0)}return d.call(this,r)}function d(e){var r=this.array;var n=r._promise;var o=c(r._fn);n._pushContext();var a;a=void 0!==r._eachValues?o.call(n._boundValue(),e,this.index,this.length):o.call(n._boundValue(),this.accum,e,this.index,this.length);a instanceof t&&(r._currentCancellable=a);var s=n._popContext();i.checkForgottenReturns(a,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",n);return a}}},{"./util":36}],29:[function(e,o,a){"use strict";var i=e("./util");var s;var u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};var c=i.getNativePromise();if(i.isNode&&"undefined"===typeof MutationObserver){var l=r.setImmediate;var f=t.nextTick;s=i.isRecentNode?function(e){l.call(r,e)}:function(e){f.call(t,e)}}else if("function"===typeof c&&"function"===typeof c.resolve){var p=c.resolve();s=function(e){p.then(e)}}else s="undefined"===typeof MutationObserver||"undefined"!==typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!==typeof n?function(e){n(e)}:"undefined"!==typeof setTimeout?function(e){setTimeout(e,0)}:u:function(){var e=document.createElement("div");var t={attributes:true};var r=false;var n=document.createElement("div");var o=new MutationObserver(function(){e.classList.toggle("foo");r=false});o.observe(n,t);var a=function(){if(r)return;r=true;n.classList.toggle("foo")};return function r(n){var o=new MutationObserver(function(){o.disconnect();n()});o.observe(e,t);a()}}();o.exports=s},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=t.PromiseInspection;var a=e("./util");function i(e){this.constructor$(e)}a.inherits(i,r);i.prototype._promiseResolved=function(e,t){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){this._resolve(this._values);return true}return false};i.prototype._promiseFulfilled=function(e,t){var r=new o;r._bitField=33554432;r._settledValueField=e;return this._promiseResolved(t,r)};i.prototype._promiseRejected=function(e,t){var r=new o;r._bitField=16777216;r._settledValueField=e;return this._promiseResolved(t,r)};t.settle=function(e){n.deprecated(".settle()",".reflect()");return new i(e).promise()};t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util");var a=e("./errors").RangeError;var i=e("./errors").AggregateError;var s=o.isArray;var u={};function c(e){this.constructor$(e);this._howMany=0;this._unwrap=false;this._initialized=false}o.inherits(c,r);c.prototype._init=function(){if(!this._initialized)return;if(0===this._howMany){this._resolve([]);return}this._init$(void 0,-5);var e=s(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))};c.prototype.init=function(){this._initialized=true;this._init()};c.prototype.setUnwrap=function(){this._unwrap=true};c.prototype.howMany=function(){return this._howMany};c.prototype.setHowMany=function(e){this._howMany=e};c.prototype._promiseFulfilled=function(e){this._addFulfilled(e);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values);return true}return false};c.prototype._promiseRejected=function(e){this._addRejected(e);return this._checkOutcome()};c.prototype._promiseCancelled=function(){if(this._values instanceof t||null==this._values)return this._cancel();this._addRejected(u);return this._checkOutcome()};c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var e=new i;for(var t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);e.length>0?this._reject(e):this._cancel();return true}return false};c.prototype._fulfilled=function(){return this._totalResolved};c.prototype._rejected=function(){return this._values.length-this.length()};c.prototype._addRejected=function(e){this._values.push(e)};c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e};c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};c.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)};c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function l(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new c(e);var o=r.promise();r.setHowMany(t);r.init();return o}t.some=function(e,t){return l(e,t)};t.prototype.some=function(e){return l(this,e)};t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){if(void 0!==e){e=e._target();this._bitField=e._bitField;this._settledValueField=e._isFateSealed()?e._settledValue():void 0}else{this._bitField=0;this._settledValueField=void 0}}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()};var n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()};var o=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)};var a=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)};var i=t.prototype.isPending=function(){return 0===(50397184&this._bitField)};var s=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)};e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)};e.prototype._isCancelled=function(){return this._target().__isCancelled()};e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)};e.prototype.isPending=function(){return i.call(this._target())};e.prototype.isRejected=function(){return a.call(this._target())};e.prototype.isFulfilled=function(){return o.call(this._target())};e.prototype.isResolved=function(){return s.call(this._target())};e.prototype.value=function(){return r.call(this._target())};e.prototype.reason=function(){var e=this._target();e._unsetRejectionIsUnhandled();return n.call(e)};e.prototype._value=function(){return this._settledValue()};e.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue()};e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util");var o=n.errorObj;var a=n.isObject;function i(e,n){if(a(e)){if(e instanceof t)return e;var i=u(e);if(i===o){n&&n._pushContext();var s=t.reject(i.e);n&&n._popContext();return s}if("function"===typeof i){if(l(e)){var s=new t(r);e._then(s._fulfill,s._reject,void 0,s,null);return s}return f(e,i,n)}}return e}function s(e){return e.then}function u(e){try{return s(e)}catch(e){o.e=e;return o}}var c={}.hasOwnProperty;function l(e){try{return c.call(e,"_promise0")}catch(e){return false}}function f(e,a,i){var s=new t(r);var u=s;i&&i._pushContext();s._captureStackTrace();i&&i._popContext();var c=true;var l=n.tryCatch(a).call(e,f,p);c=false;if(s&&l===o){s._rejectCallback(l.e,true,true);s=null}function f(e){if(!s)return;s._resolveCallback(e);s=null}function p(e){if(!s)return;s._rejectCallback(e,c,true);s=null}return u}return i}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util");var a=t.TimeoutError;function i(e){this.handle=e}i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(e){return u(+this).thenReturn(e)};var u=t.delay=function(e,o){var a;var u;if(void 0!==o){a=t.resolve(o)._then(s,null,null,e,void 0);n.cancellation()&&o instanceof t&&a._setOnCancel(o)}else{a=new t(r);u=setTimeout(function(){a._fulfill()},+e);n.cancellation()&&a._setOnCancel(new i(u));a._captureStackTrace()}a._setAsyncGuaranteed();return a};t.prototype.delay=function(e){return u(e,this)};var c=function(e,t,r){var n;n="string"!==typeof t?t instanceof Error?t:new a("operation timed out"):new a(t);o.markAsOriginatingFromRejection(n);e._attachExtraTrace(n);e._reject(n);null!=r&&r.cancel()};function l(e){clearTimeout(this.handle);return e}function f(e){clearTimeout(this.handle);throw e}t.prototype.timeout=function(e,t){e=+e;var r,o;var a=new i(setTimeout(function e(){r.isPending()&&c(r,t,o)},e));if(n.cancellation()){o=this.then();r=o._then(l,f,void 0,a,void 0);r._setOnCancel(a)}else r=this._then(l,f,void 0,a,void 0);return r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,a,i){var s=e("./util");var u=e("./errors").TypeError;var c=e("./util").inherits;var l=s.errorObj;var f=s.tryCatch;var p={};function h(e){setTimeout(function(){throw e},0)}function d(e){var t=n(e);t!==e&&"function"===typeof e._isDisposable&&"function"===typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer());return t}function v(e,r){var o=0;var i=e.length;var s=new t(a);function u(){if(o>=i)return s._fulfill();var a=d(e[o++]);if(a instanceof t&&a._isDisposable()){try{a=n(a._getDisposer().tryDispose(r),e.promise)}catch(e){return h(e)}if(a instanceof t)return a._then(u,h,null,null,null)}u()}u();return s}function m(e,t,r){this._data=e;this._promise=t;this._context=r}m.prototype.data=function(){return this._data};m.prototype.promise=function(){return this._promise};m.prototype.resource=function(){if(this.promise().isFulfilled())return this.promise().value();return p};m.prototype.tryDispose=function(e){var t=this.resource();var r=this._context;void 0!==r&&r._pushContext();var n=t!==p?this.doDispose(t,e):null;void 0!==r&&r._popContext();this._promise._unsetDisposable();this._data=null;return n};m.isDisposer=function(e){return null!=e&&"function"===typeof e.resource&&"function"===typeof e.tryDispose};function _(e,t,r){this.constructor$(e,t,r)}c(_,m);_.prototype.doDispose=function(e,t){var r=this.data();return r.call(e,e,t)};function y(e){if(m.isDisposer(e)){this.resources[this.index]._setDisposable(e);return e.promise()}return e}function g(e){this.length=e;this.promise=null;this[e-1]=null}g.prototype._resultCancelled=function(){var e=this.length;for(var r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}};t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var o=arguments[e-1];if("function"!==typeof o)return r("expecting a function but got "+s.classString(o));var a;var u=true;if(2===e&&Array.isArray(arguments[0])){a=arguments[0];e=a.length;u=false}else{a=arguments;e--}var c=new g(e);for(var p=0;p<e;++p){var h=a[p];if(m.isDisposer(h)){var d=h;h=h.promise();h._setDisposable(d)}else{var _=n(h);_ instanceof t&&(h=_._then(y,null,null,{resources:c,index:p},void 0))}c[p]=h}var b=new Array(c.length);for(var p=0;p<b.length;++p)b[p]=t.resolve(c[p]).reflect();var w=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected()){l.e=r.error();return l}if(!r.isFulfilled()){w.cancel();return}e[t]=r.value()}E._pushContext();o=f(o);var n=u?o.apply(void 0,e):o(e);var a=E._popContext();i.checkForgottenReturns(n,a,"Promise.using",E);return n});var E=w.lastly(function(){var e=new t.PromiseInspection(w);return v(c,e)});c.promise=E;E._setOnCancel(c);return E};t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField;this._disposer=e};t.prototype._isDisposable=function(){return(131072&this._bitField)>0};t.prototype._getDisposer=function(){return this._disposer};t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField;this._disposer=void 0};t.prototype.disposer=function(e){if("function"===typeof e)return new _(e,this,o());throw new u}}},{"./errors":12,"./util":36}],36:[function(e,n,o){"use strict";var a=e("./es5");var i="undefined"==typeof navigator;var s={e:{}};var u;var c="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r?r:void 0!==this?this:null;function l(){try{var e=u;u=null;return e.apply(this,arguments)}catch(e){s.e=e;return s}}function f(e){u=e;return l}var p=function(e,t){var r={}.hasOwnProperty;function n(){this.constructor=e;this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}n.prototype=t.prototype;e.prototype=new n;return e.prototype};function h(e){return null==e||true===e||false===e||"string"===typeof e||"number"===typeof e}function d(e){return"function"===typeof e||"object"===typeof e&&null!==e}function v(e){if(!h(e))return e;return new Error(O(e))}function m(e,t){var r=e.length;var n=new Array(r+1);var o;for(o=0;o<r;++o)n[o]=e[o];n[o]=t;return n}function _(e,t,r){if(!a.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);if(null!=n)return null==n.get&&null==n.set?n.value:r}function y(e,t,r){if(h(e))return e;var n={value:r,configurable:true,enumerable:false,writable:true};a.defineProperty(e,t,n);return e}function g(e){throw e}var b=function(){var e=[Array.prototype,Object.prototype,Function.prototype];var t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return true;return false};if(a.isES5){var r=Object.getOwnPropertyNames;return function(e){var n=[];var o=Object.create(null);while(null!=e&&!t(e)){var i;try{i=r(e)}catch(e){return n}for(var s=0;s<i.length;++s){var u=i[s];if(o[u])continue;o[u]=true;var c=Object.getOwnPropertyDescriptor(e,u);null!=c&&null==c.get&&null==c.set&&n.push(u)}e=a.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var o=[];e:for(var a in r)if(n.call(r,a))o.push(a);else{for(var i=0;i<e.length;++i)if(n.call(e[i],a))continue e;o.push(a)}return o}}();var w=/this\s*\.\s*\S+\s*=/;function E(e){try{if("function"===typeof e){var t=a.names(e.prototype);var r=a.isES5&&t.length>1;var n=t.length>0&&!(1===t.length&&"constructor"===t[0]);var o=w.test(e+"")&&a.names(e).length>0;if(r||n||o)return true}return false}catch(e){return false}}function C(e){function t(){}t.prototype=e;var r=8;while(r--)new t;return e}var S=/^[a-z$_][a-z$_0-9]*$/i;function j(e){return S.test(e)}function R(e,t,r){var n=new Array(e);for(var o=0;o<e;++o)n[o]=t+o+r;return n}function O(e){try{return e+""}catch(e){return"[no string representation]"}}function x(e){return null!==e&&"object"===typeof e&&"string"===typeof e.message&&"string"===typeof e.name}function T(e){try{y(e,"isOperational",true)}catch(e){}}function P(e){if(null==e)return false;return e instanceof Error["__BluebirdErrorTypes__"].OperationalError||true===e["isOperational"]}function k(e){return x(e)&&a.propertyIsWritable(e,"stack")}var F=function(){return"stack"in new Error?function(e){if(k(e))return e;return new Error(O(e))}:function(e){if(k(e))return e;try{throw new Error(O(e))}catch(e){return e}}}();function M(e){return{}.toString.call(e)}function L(e,t,r){var n=a.names(e);for(var o=0;o<n.length;++o){var i=n[o];if(r(i))try{a.defineProperty(t,i,a.getDescriptor(e,i))}catch(e){}}}var A=function(e){if(a.isArray(e))return e;return null};if("undefined"!==typeof Symbol&&Symbol.iterator){var I="function"===typeof Array.from?function(e){return Array.from(e)}:function(e){var t=[];var r=e[Symbol.iterator]();var n;while(!(n=r.next()).done)t.push(n.value);return t};A=function(e){if(a.isArray(e))return e;if(null!=e&&"function"===typeof e[Symbol.iterator])return I(e);return null}}var D="undefined"!==typeof t&&"[object process]"===M(t).toLowerCase();var B="undefined"!==typeof t&&"undefined"!==typeof t.env;function N(e){return B?t.env[e]:void 0}function U(){if("function"===typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function V(e,t){return e.bind(t)}var H={isClass:E,isIdentifier:j,inheritedDataKeys:b,getDataPropertyOrDefault:_,thrower:g,isArray:a.isArray,asArray:A,notEnumerableProp:y,isPrimitive:h,isObject:d,isError:x,canEvaluate:i,errorObj:s,tryCatch:f,inherits:p,withAppended:m,maybeWrapAsError:v,toFastProperties:C,filledRange:R,toString:O,canAttachTrace:k,ensureErrorObject:F,originatesFromRejection:P,markAsOriginatingFromRejection:T,classString:M,copyDescriptors:L,hasDevTools:"undefined"!==typeof chrome&&chrome&&"function"===typeof chrome.loadTimes,isNode:D,hasEnvVariables:B,env:N,global:c,getNativePromise:U,domainBind:V};H.isRecentNode=H.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}();H.isNode&&H.toFastProperties(t);try{throw new Error}catch(e){H.lastLineError=e}n.exports=H},{"./es5":13}]},{},[4])(4)});"undefined"!==typeof window&&null!==window?window.P=window.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise)}).call(t,r(39),r(18),r(89).setImmediate)},78:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.deleteOrganization=t.startMigration=t.deleteTeam=t.updateTeamName=t.updateMembersTeams=t.updateMemberTeams=t.createTeam=t.transferOwnership=t.removeMember=t.updateMemberRole=t.updateOrgLogo=t.updateOrgCustomDomain=t.updateOrgBaseDomain=t.updateOrgName=t.createOrgSpace=void 0;var n=function(){var e=i(regeneratorRuntime.mark(function e(t){var r=t.space,n=t.org,o=t.logo,i=t.shouldCreateOrg,s=t.backend;var u,c,l,f,p,h,d,v;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:u=s.auth,c=s.storage;l=a.StoragePaths.spaceUpload({spaceID:r.uid,filename:o.name});f=a.StoragePaths.orgUpload({orgID:n.uid,filename:o.name});t.next=5;return Promise.all([i?c.uploadFile(f,o,{user:u.getCurrentUser()}):{},c.uploadFile(l,o,{user:u.getCurrentUser()})]);case 5:p=t.sent;h=p[0].downloadURL;d=void 0===h?null:h;v=p[1].downloadURL;return t.abrupt("return",{org:d&&o?n.merge({logoURL:d}):n,space:o?r.merge({logoURL:v}):r});case 10:case"end":return t.stop()}},e,this)}));return function t(r){return e.apply(this,arguments)}}();var o=r(3);var a=r(96);function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function s(e){var t=this;return function(){var r=i(regeneratorRuntime.mark(function r(a,i,s){var u,c,l,f,p,h,d,v,m,_;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:u=s.database,c=s.auth,l=s.analytics;f=e.logo;p=e.org,h=e.space;d=!p.uid;v=!d||!/^data:image/.test(p.logoURL)&&f?p.logoURL:null;d&&(p=p.regenerateUID().merge({logoURL:v}));h=h.regenerateUID().merge({orgID:p.uid,logoURL:v});m=o.Revision.createInitialRevision(c.getCurrentUser());h=h.merge({primaryRevision:m.uid});_=h.toCreateUpdate().set(o.Revision.queryByID({spaceID:h.uid,revisionID:m.uid}),m);d&&_.merge(p.toCreateUpdate());r.next=13;return u.commit(_);case 13:d&&l.trackCreateOrg(p,h);l.trackCreateSpace(p,h);if(f){r.next=17;break}return r.abrupt("return",{org:p.merge({logoURL:v}),space:h.merge({logoURL:v})});case 17:return r.abrupt("return",n({space:h,org:p,logo:f,shouldCreateOrg:d,backend:s}));case 18:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function u(e,t){return function(r,n,o){var a=o.database;return a.updateDocument(e.query(),{name:t})}}function c(e,t){return function(r,n,o){var a=o.database;return a.commit(e.toBaseDomainUpdate(t))}}function l(e,t){var r=this;return function(){var n=i(regeneratorRuntime.mark(function n(o,a,i){var s=i.database,u=i.analytics;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return s.commit(e.toCustomDomainUpdate(t));case 2:u.trackSetupCustomDomain(e);case 3:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function f(e,t){return function(r,n,o){var i=o.database,s=o.storage,u=o.auth;var c=a.StoragePaths.orgUpload({orgID:e.uid,filename:t.name});return s.uploadFile(c,t,{user:u.getCurrentUser()}).then(function(t){return i.updateDocument(e.query(),{logoURL:t.downloadURL})})}}function p(e,t,r){return function(n,o,a){var i=a.database,s=a.storage;var u=t.merge({role:r});return i.commit(u.toUpdate(e.uid))}}function h(e,t){return function(r,n,o){var a=o.database,i=o.storage;return a.commit(t.toDeleteUpdate(e.uid))}}function d(e,t){return function(r,n,o){var a=o.database;return a.commit(e.toTransferOwnershipUpdate(t.uid))}}function v(e,t){var r=this;return function(){var n=i(regeneratorRuntime.mark(function n(o,a,i){var s=i.database,u=i.analytics;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return s.commit(t.toCreateUpdate(e.uid));case 2:u.trackCreateTeam(e);case 3:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function m(e,t){return function(r,n,o){var a=o.database;return a.updateDocument(t.query(e.uid),{teams:t.teams.map(function(e){return e.serialize()}).toJS()})}}function _(e,t){return function(r,n,o){var a=o.database;return Promise.all(t.map(function(t){return r(m(e,t))}).toArray())}}function y(e,t){return function(r,n,o){var a=o.database;return a.updateDocument(t.query(e.uid),{name:t.name})}}function g(e,t){return function(r,n,o){var a=o.database;return a.deleteDocument(t.query(e.uid))}}function b(e){return function(t,r,n){var o=n.analytics;return o.trackStartMigration(e)}}function w(e){var t=this;return function(){var r=i(regeneratorRuntime.mark(function r(n,o,a){var i=a.database,s=a.analytics;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.commit(e.toDeleteUpdate());case 2:s.trackDeleteOrg(e);case 3:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}t.createOrgSpace=s;t.updateOrgName=u;t.updateOrgBaseDomain=c;t.updateOrgCustomDomain=l;t.updateOrgLogo=f;t.updateMemberRole=p;t.removeMember=h;t.transferOwnership=d;t.createTeam=v;t.updateMemberTeams=m;t.updateMembersTeams=_;t.updateTeamName=y;t.deleteTeam=g;t.startMigration=b;t.deleteOrganization=w},927:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RouteMigrationWelcome=t.RouteMigration=void 0;var n=r(48);var o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return r(928)})},modules:["./RouteMigration"],webpack:function e(){return[928]},loading:function e(){return null}});var s=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return r(930)})},modules:["./RouteMigrationWelcome"],webpack:function e(){return[930]},loading:function e(){return null}});t.RouteMigration=i;t.RouteMigrationWelcome=s},935:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t){return function(r,n,o){var a=o.auth;return a.verifyPhoneNumber(e,t)}}function o(e,t,r){return function(n,o,a){var i=a.auth;return i.reauthenticateWithPhone(e,t,r)}}function a(){return function(e,t,r){var n=r.auth;return n.unlinkPhone()}}t.verifyPhoneNumber=n;t.reauthenticateWithPhone=o;t.unlinkPhone=a},945:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,i,s,u;var c=r(0);var l=g(c);var f=r(5);var p=r(2);var h=r(1);var d=r(2759);var v=y(d);var m=r(2760);var _=y(m);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(o=(0,f.connect)(function(e){var t=e.user,r=e.config;return{user:t,config:r}}),a=h.Skeleton.connectToSkeleton(function(e){var t=e.isLoading;return{placeholder:t}}),o(i=a(i=(u=s=function(e){E(t,e);function t(){b(this,t);return w(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.space,a=n.org,i=n.config,s=n.children,u=n.withPopover,c=n.placeholder,f=n.styles;if(c)return l.createElement(h.View,{styles:r.placeholder});var d=o.baseName?o.getURL(a,i.domains.spaces):a.getSpacesURL(i.domains.spaces);var v=o.logoURL||_.default;var m=o.name||a.name||"Acme";var y=o.colorPrimary||"rgb(244, 124, 36)";var g=d.replace(/^https:\/\//,"");return l.createElement("div",{className:(0,p.css)(r.background,f)},l.createElement("img",{alt:"Favicon",src:v,className:(0,p.css)(r.favicon)}),l.createElement("div",{className:(0,p.css)(r.fieldPageTitle)},"How To - "+m),l.createElement("div",{className:(0,p.css)(r.fieldURL)},g),l.createElement("div",{className:(0,p.css)(r.content)},l.createElement("div",{className:(0,p.css)(r.header)},l.createElement("img",{alt:"Logo",src:v,className:(0,p.css)(r.headerLogo)}),l.createElement("h1",{className:(0,p.css)(r.headerTitle)},m),l.createElement("div",{className:(0,p.css)(r.headerLink),style:{color:y}},"Downloads"),l.createElement("div",{className:(0,p.css)(r.headerLink),style:{color:y,borderBottomColor:y}},"API")),l.createElement("div",{className:(0,p.css)(r.sidebar)})),u&&l.createElement("div",{className:(0,p.css)([r.popover,r.popoverTitle])},l.createElement(h.Text.UIH400,null,s)))};return t}(l.Component),s.STYLES=p.StyleSheet.create({background:{position:"relative",background:"url("+v.default+")",width:535,minHeight:280,backgroundSize:1070},placeholder:n({marginTop:40,marginLeft:40,width:495,minHeight:260,borderTopLeftRadius:8,background:h.colors.PLACEHOLDER_BG},h.animations.placeholder),popover:{position:"absolute",zIndex:10,backgroundColor:h.colors.BLUE_BASE,padding:h.boxes.PADDING_NORMAL,color:"#fff",borderRadius:h.boxes.RADIUS_NORMAL,maxWidth:300,boxShadow:"0px 3px 3px rgba(0,0,0,0.1)"},popoverTitle:{top:180,left:35},favicon:{userSelect:"none",position:"absolute",top:48,left:148,display:"block",width:16,height:16,borderRadius:2},fieldPageTitle:{userSelect:"none",position:"absolute",top:49,left:172,maxWidth:170,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",lineHeight:1,fontSize:"14px",fontFamily:"-apple-system, Helvetica"},fieldURL:{userSelect:"none",position:"absolute",top:76,left:250,width:"calc(100% - 250px)",fontSize:"14px",fontFamily:"-apple-system, Helvetica",whiteSpace:"nowrap"},content:{userSelect:"none",position:"absolute",top:106,left:56,right:0,bottom:0,background:"#fff"},header:{display:"flex",flexDirection:"row",alignItems:"center",padding:"0px 20px",background:"#fff",borderBottom:"1px solid #d4dadf",boxShadow:"0 3px 8px 0 rgba(0,0,0,0.03)"},headerLogo:{flex:"0 32px",width:32,height:32,margin:"10px 0px",display:"block",borderRadius:3},headerTitle:{margin:0,marginLeft:12,marginRight:20,color:h.colors.BLACK,fontSize:"28px",whiteSpace:"nowrap"},headerLink:{alignSelf:"stretch",display:"flex",alignItems:"center",padding:"0px 20px",fontWeight:500,fontSize:"16px",borderTop:"3px solid transparent",borderBottom:"3px solid transparent"},sidebar:{position:"absolute",top:53,left:0,bottom:0,width:200,background:h.colors.BG_BODY,borderRight:"1px solid "+h.colors.BORDER_LIGHT}}),u))||i)||i);t.default=C},947:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(48);var o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return r(948)})},modules:["./RouteNewSpace"],webpack:function e(){return[948]},loading:function e(){return null}});t.default=i},948:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,u;var c=r(0);var l=B(c);var f=r(26);var p=D(f);var h=r(13);var d=r(5);var v=r(1);var m=r(3);var _=r(78);var y=r(240);var g=r(2764);var b=D(g);var w=r(2777);var E=D(w);var C=r(2778);var S=D(C);var j=r(2779);var R=D(j);var O=r(2780);var x=D(O);var T=r(2781);var P=D(T);var k=r(952);var F=D(k);var M=r(2782);var L=D(M);var A=r(949);var I=D(A);function D(e){return e&&e.__esModule?e:{default:e}}function B(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function N(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function H(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var G=[b.default,E.default,S.default,x.default,R.default];var z=(n=v.Skeleton.connectToSkeleton(),o=(0,d.connect)(function(e){var t=e.user;return{user:t}}),(0,h.withRouter)(a=n(a=o(a=(s=i=function(e){H(t,e);function t(r){U(this,t);var n=V(this,e.call(this,r));u.call(n);var o=n.props,a=o.org,i=o.user;var s=a||new m.Organization({createdBy:i.uid});n.state={loading:false,error:null,step:a?2:0,space:new m.Space({orgID:s.uid,createdBy:i.uid,logoURL:s.logoURL}),org:s};return n}t.prototype.componentDidMount=function e(){var t=this;var r=this.props.org;r&&r.logoURL&&(0,I.default)(r.logoURL).then(function(e){t.setState(function(t){var r=t.space;return{space:r.merge({colorPrimary:e})}})})};t.prototype.componentWillReceiveProps=function e(t){var r=this;if(this.props.org!=t.org){var n=t.org,o=t.user;this.setState({org:t.org,space:new m.Space({orgID:n.uid,createdBy:o.uid,logoURL:n.logoURL})});n.logoURL&&(0,I.default)(n.logoURL).then(function(e){r.setState(function(t){var r=t.space;return{space:r.merge({colorPrimary:e})}})})}};t.prototype.render=function e(){var t=this.props,r=t.user,n=t.membership,o=t.org,a=t.location,i=t.isLoading;var s=this.state,u=s.org,c=s.space;var f=this.state,d=f.loading,v=f.error;var m=this.state.step;c.uid&&(m=G.length);var _=m<G.length?G[m]:P.default;if(!r.isLoggedIn)return l.createElement(h.Redirect,{to:(0,y.createAuthRoute)({toLocation:a.pathname})});if(o&&!r.isSiteAdmin&&!i&&(!n||!n.canAdmin))return l.createElement(h.Redirect,{to:"/@"+o.baseDomain+"/"});return l.createElement(l.Fragment,null,l.createElement(p.default,{title:"Get started"}),d&&l.createElement(F.default,null),!d&&v&&l.createElement(L.default,null),!d&&!v&&l.createElement(_,{org:u,space:c,onChange:this.onChange,onCancel:this.onCancel,onPrev:m>(u.uid?2:0)?this.onPrevStep:null,onNext:this.onNextStep,onSubmit:this.onSubmit}))};return t}(l.Component),u=function e(){var t=this;this.onChange=function(e){t.setState(e)};this.onCancel=function(){var e=t.props,r=e.history,n=e.org;r.push(n?"/@"+n.baseDomain+"/spaces":"/account/")};this.onPrevStep=function(){t.setState(function(e){var t=e.org,r=e.step;return{step:Math.max(r-1,t.uid?2:0)}})};this.onNextStep=function(){t.setState(function(e){var t=e.step;return{step:Math.min(t+1,G.length)}})};this.onSubmit=N(regeneratorRuntime.mark(function e(){var r,n,o,a,i,s,u,c,l;return regeneratorRuntime.wrap(function e(f){while(1)switch(f.prev=f.next){case 0:r=t.props.dispatch;n=t.state,o=n.org,a=n.space;t.setState({loading:true});i=null;if(!a.logoURL){f.next=18;break}f.prev=5;f.next=8;return fetch(a.logoURL);case 8:s=f.sent;f.next=11;return s.blob();case 11:i=f.sent;i.name="logo.png";f.next=18;break;case 15:f.prev=15;f.t0=f["catch"](5);console.error("Failed to fetch "+a.logoURL);case 18:f.prev=18;f.next=21;return r((0,_.createOrgSpace)({org:o,space:a,logo:i}));case 21:u=f.sent;c=u.org;l=u.space;t.setState({org:c,space:l});f.next=31;break;case 27:f.prev=27;f.t1=f["catch"](18);t.setState({error:f.t1});throw f.t1;case 31:f.prev=31;t.setState({loading:false});return f.finish(31);case 34:case"end":return f.stop()}},e,t,[[5,15],[18,27,31,34]])}))},s))||a)||a)||a);t.default=z},949:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(2765);var o=a(n);function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function s(e){var t=this;return new Promise(function(r,n){var a=new Image;a.onload=i(regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return o.from(a).getPalette();case 3:n=t.sent;t.next=6;return n.Vibrant.getHex();case 6:i=t.sent;r(i);t.next=13;break;case 10:t.prev=10;t.t0=t["catch"](0);r("#3884FF");case 13:case"end":return t.stop()}},e,t,[[0,10]])}));a.onerror=function(){n(new Error("Failed to get primary color from logo URL "+e))};a.crossOrigin="Anonymous";a.src=e})}t.default=s},950:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(523);var o=r(309);var a=r(2766);var i=r(330);var s=r(2767);var u=r(2771);var c=r(2773);var l=function(){function e(t,r){this._src=t;this.opts=o({},r,e.DefaultOpts)}e.from=function(e){return new a.default(e)};e.prototype._process=function(e){var t=this;var r=this.opts;var o=r.quantizer,a=r.generator;e.scaleDown(r);var i=e.getImageData();return n.resolve(o(i.data,r)).then(function(e){return n.resolve(a(e))}).tap(function(e){return t._palette=e}).finally(function(){return e.remove()})};e.prototype.palette=function(){return this.swatches()};e.prototype.swatches=function(){return this._palette};e.prototype.getPalette=function(e){var t=this;var r=new this.opts.ImageClass;return r.load(this._src).then(function(e){return t._process(e)}).asCallback(e)};return e}();l.Builder=a.default;l.Quantizer=s;l.Generator=u;l.Filter=c;l.Util=i;l.DefaultOpts={colorCount:64,quality:5,generator:u.Default,ImageClass:null,quantizer:s.MMCQ,filters:[c.Default]};t.default=l},951:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(330);var o=function(){function e(e,t){this._rgb=e;this._population=t}e.prototype.getRgb=function(){return this._rgb};e.prototype.getHsl=function(){if(!this._hsl){var e=this._rgb,t=e[0],r=e[1],o=e[2];this._hsl=n.rgbToHsl(t,r,o)}return this._hsl};e.prototype.getPopulation=function(){return this._population};e.prototype.getHex=function(){if(!this._hex){var e=this._rgb,t=e[0],r=e[1],o=e[2];this._hex=n.rgbToHex(t,r,o)}return this._hex};e.prototype.getYiq=function(){if(!this._yiq){var e=this._rgb;this._yiq=(299*e[0]+587*e[1]+114*e[2])/1e3}return this._yiq};e.prototype.getTitleTextColor=function(){return this.getYiq()<200?"#fff":"#000"};e.prototype.getBodyTextColor=function(){return this.getYiq()<150?"#fff":"#000"};return e}();t.Swatch=o},952:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=p(a);var s=r(2);var u=r(1);var c=r(116);var l=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=n=function(e){v(t,e);function t(){h(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;return i.createElement(l.default,{step:3},i.createElement(u.View,{styles:[r.container]},i.createElement(u.Loading,null)))};return t}(i.Component),n.STYLES=s.StyleSheet.create({container:{flex:1,height:240,display:"flex",alignItems:"center",fontSize:32,color:u.colors.BLUE_BASE}}),o);t.default=m},963:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=b(a);var s=r(26);var u=g(s);var c=r(411);var l=r(5);var f=r(935);var p=r(240);var h=r(2910);var d=g(h);var v=r(2911);var m=g(v);var _=r(2913);var y=g(_);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function w(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(n=(0,l.connect)(function(e){var t=e.user;return{user:t}}),n(o=function(e){S(t,e);function t(){var r=this;var n,o,a;E(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=C(this,e.call.apply(e,[this].concat(s))),o),o.state={loading:false,error:null,phone:"",verificationId:null},o.onSubmitPhone=function(){var e=w(regeneratorRuntime.mark(function e(t,n,a){var i,s,u;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:i=o.props.dispatch;if(!o.state.loading){r.next=3;break}return r.abrupt("return");case 3:s=void 0;r.prev=4;s=(0,c.formatNumber)((0,c.parseNumber)(t,n),"E.164");r.next=12;break;case 8:r.prev=8;r.t0=r["catch"](4);o.setState({error:new Error("The phone number is formatted incorrectly.")});return r.abrupt("return");case 12:o.setState({loading:true,error:null});r.prev=13;r.next=16;return i((0,f.verifyPhoneNumber)(s,a));case 16:u=r.sent;o.setState({phone:s,verificationId:u});r.next=23;break;case 20:r.prev=20;r.t1=r["catch"](13);o.onError(r.t1);case 23:r.prev=23;o.setState({loading:false});return r.finish(23);case 26:case"end":return r.stop()}},e,r,[[4,8],[13,20,23,26]])}));return function(t,r,n){return e.apply(this,arguments)}}(),o.onSubmitCode=function(){var e=w(regeneratorRuntime.mark(function e(t){var n,a,i,s;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:n=o.props.dispatch;a=o.state,i=a.phone,s=a.verificationId;if(!(!i||!s)){r.next=4;break}return r.abrupt("return");case 4:o.setState({loading:true,error:null});r.prev=5;r.next=8;return n((0,f.reauthenticateWithPhone)(i,t,s));case 8:r.next=13;break;case 10:r.prev=10;r.t0=r["catch"](5);o.onError(r.t0);case 13:r.prev=13;o.setState({loading:false});return r.finish(13);case 16:case"end":return r.stop()}},e,r,[[5,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),o.onError=function(e){(0,p.handleException)(e,function(e){o.setState({error:e})})},o.onResendCode=function(){o.setState({error:null,verificationId:null})},n),C(o,a)}t.prototype.render=function e(){var t=this.props,r=t.user,n=t.location;var o=this.state,a=o.error,s=o.loading,c=o.phone,l=o.verificationId;var f=!c||!l;var h=(n.state||{}).referrer||{pathname:"/"};return i.createElement(i.Fragment,null,i.createElement(u.default,{title:"Verify your account"}),i.createElement(p.AuthModal,{title:"Verify your account",error:a},r.hasPhoneVerified&&i.createElement(d.default,{previousLocation:h}),!r.hasPhoneVerified&&f&&i.createElement(m.default,{user:r,phone:c,loading:s,onSubmit:this.onSubmitPhone}),!r.hasPhoneVerified&&!f&&i.createElement(y.default,{phone:c,loading:s,onResendCode:this.onResendCode,onSubmit:this.onSubmitCode})))};return t}(i.Component))||o);t.default=j}});