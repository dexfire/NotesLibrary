webpackJsonp([5],{1369:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=r(27);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){u(t,e);function t(){o(this,t);return a(this,e.apply(this,arguments))}t.queryByVersion=function e(t){var r=t.spaceID,n=t.versionID;return this.query(["spaces",r,"redirects",(0,i.escapeKey)(n)])};t.queryByURL=function e(t){var r=t.spaceID,n=t.versionID,o=t.url;return this.queryByVersion({spaceID:r,versionID:n}).doc((0,i.escapeKey)(o))};t.prototype.query=function e(r){var n=r.spaceID,i=r.versionID;return t.queryByURL({spaceID:n,versionID:i,url:this.url})};t.create=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r instanceof t)return r;return new t(n({},r,{createdAt:new Date(r.createdAt||Date.now())}))};t.deserialize=function e(r){return t.create(r)};t.prototype.serialize=function e(){return{url:this.url,pageID:this.pageID,createdAt:this.createdAt.getTime()}};return t}((0,i.DatabaseModel)("pageRedirect",{url:"",pageID:"",createdAt:new Date}));t.default=s},1441:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=r(666);var o=c(i);var a=r(1442);var u=r(1455);var s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var l="Enter";var f="Tab";var p="Backspace";function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=new o.default(e);var t=(0,s.default)(e);return n({},t,{onKeyDown:y.bind(null,e)})}function y(e,t,r,n){var i=[t,r,n,e];switch(t.key){case l:return a.onEnter.apply(void 0,i);case f:return a.onTab.apply(void 0,i);case p:return a.onBackspace.apply(void 0,i);default:return}}t.default=d},1442:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.onBackspace=t.onTab=t.onEnter=void 0;var n=r(1443);var i=c(n);var o=r(1453);var a=c(o);var u=r(1454);var s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}t.onEnter=i.default;t.onTab=a.default;t.onBackspace=s.default},1443:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(280);var i=r(88);function o(e,t,r,o){if(e.shiftKey)return;var a=t.value;var u=(0,i.getCurrentItem)(o,a);if(!u)return;e.preventDefault();a.isExpanded&&t.delete();if(u.isEmpty){if((0,i.getItemDepth)(o,a)>1)return(0,n.decreaseItemDepth)(o,t);return(0,n.unwrapList)(o,t)}return(0,n.splitListItem)(o,t)}t.default=o},1444:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(4);var i=r(6);var o=r(88);function a(e,t,r,i){var a=u(t.value);r=r||e.types[0];t.wrapBlock({type:r,data:n.Data.create(i)},{normalize:false});a.forEach(function(r){(0,o.isList)(e,r)?r.nodes.forEach(function(e){var r=e.key;return t.unwrapNodeByKey(r,{normalize:false})}):t.wrapBlockByKey(r.key,e.typeItem,{normalize:false})});return t.normalize()}function u(e){var t=e.selection;var r=e.document;var n=r.getClosestBlock(t.startKey);var o=r.getClosestBlock(t.endKey);if(n===o)return(0,i.List)([n]);var a=r.getCommonAncestor(n.key,o.key);var u=a.getPath(n.key);var s=a.getPath(o.key);return a.nodes.slice(u[0],s[0]+1)}t.default=a},1445:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(214);var i=u(n);var o=r(667);var a=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r){var n=(0,i.default)(e,t,r);if(!n)return null;return(0,a.default)(e,t,n)}t.default=s},1446:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(214);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){var n=t.document,o=t.startBlock;r=r||o;var u=(0,i.default)(e,t,r);if(!u)return 0;var s=n.getParent(u.key);return 1+a(e,t,s)}t.default=a},1447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(214);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){var n=t.document,o=t.startBlock;r=r||o;var a=(0,i.default)(e,t,r);if(!a)return null;var u=n.getPreviousSibling(a.key);if(!u)return null;if(u.type===e.typeItem)return u;return null}t.default=a},1448:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(668);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return!(0,i.default)(e,t).isEmpty()}t.default=a},1449:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(88);function i(e,t){var r=(0,n.getItemsAtRange)(e,t.value);if(r.isEmpty())return t;r.forEach(function(e){return t.unwrapNodeByKey(e.key,{normalize:false})});var i=r.first();var o=t.value.document.getParent(i.key);var a=o.nodes.findIndex(function(e){return e.key===i.key});r.forEach(function(e){e.nodes.forEach(function(e){t.moveNodeByKey(e.key,o.key,a,{normalize:false});a+=1})});r.forEach(function(e){return t.removeNodeByKey(e.key,{normalize:false})});return t}t.default=i},1450:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(88);function i(e,t){var r=t.value;var i=(0,n.getCurrentItem)(e,r);if(!i)return t;var o=r.startOffset;return t.splitDescendantsByKey(i.key,r.startKey,o)}t.default=i},1451:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(4);var i=r(88);function o(e,t){var r=(0,i.getPreviousItem)(e,t.value);var n=(0,i.getCurrentItem)(e,t.value);if(!r)return t;if(!n)return t;return a(e,t,n,r.key)}function a(e,t,r,o){var a=t.value.document.getDescendant(o);var u=a.nodes.size;var s=a.nodes.last();var c=(0,i.isList)(e,s)?s:null;if(c)return t.moveNodeByKey(r.key,c.key,c.nodes.size);var l=(0,i.getListForItem)(e,t.value,a);if(!l)throw new Error("Destination is not in a list");var f=n.Block.create({object:"block",type:l.type,data:l.data});t.insertNodeByKey(o,u,f,{normalize:false});return t.moveNodeByKey(r.key,f.key,0)}t.default=o},1452:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(4);var i=r(88);function o(e,t){var r=t.value;var o=r.document;var a=(0,i.getItemDepth)(e,r);if(1==a)return t;var u=(0,i.getCurrentItem)(e,r);if(!u)return t;var s=o.getParent(u.key);var c=o.getParent(s.key);var l=o.getParent(c.key);var f=s.nodes.skipUntil(function(e){return e===u}).rest();var p=s.nodes.size===f.size+1;if(f.isEmpty())t.moveNodeByKey(u.key,l.key,l.nodes.indexOf(c)+1);else{var d=n.Block.create({object:"block",type:s.type,data:s.data});t.insertNodeByKey(u.key,u.nodes.size,d,{normalize:false});t.moveNodeByKey(u.key,l.key,l.nodes.indexOf(c)+1,{normalize:false});f.forEach(function(e,r){return t.moveNodeByKey(e.key,d.key,d.nodes.size+r,{normalize:false})})}p&&t.removeNodeByKey(s.key);return t}t.default=o},1453:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(280);var i=r(88);function o(e,t,r,o){var a=t.value;var u=a.isCollapsed;if(!u||!(0,i.getCurrentItem)(o,a))return;if(e.shiftKey){e.preventDefault();return(0,n.decreaseItemDepth)(o,t)}e.preventDefault();return(0,n.increaseItemDepth)(o,t)}t.default=o},1454:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(280);var i=r(88);function o(e,t,r,o){var a=t.value;var u=a.startOffset,s=a.selection;if(s.isExpanded)return;if(u>0)return;var c=(0,i.getCurrentItem)(o,a);if(!c)return;if(!s.isAtStartOf(c))return;e.preventDefault();return(0,n.unwrapList)(o,t)}t.default=o},1455:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(666);var i=s(n);var o=r(1456);var a=r(280);var u=r(88);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=new i.default(e);return{schema:(0,o.schema)(e),validateNode:(0,o.validateNode)(e),utils:{getCurrentItem:u.getCurrentItem.bind(null,e),getCurrentList:u.getCurrentList.bind(null,e),getItemDepth:u.getItemDepth.bind(null,e),getItemsAtRange:u.getItemsAtRange.bind(null,e),getPreviousItem:u.getPreviousItem.bind(null,e),isList:u.isList.bind(null,e),isSelectionInList:u.isSelectionInList.bind(null,e)},changes:{decreaseItemDepth:f(e,a.decreaseItemDepth),increaseItemDepth:f(e,a.increaseItemDepth),splitListItem:f(e,a.splitListItem),unwrapList:f(e,a.unwrapList),wrapInList:a.wrapInList.bind(null,e)}}}function f(e,t){return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=r.value;if(!(0,u.isSelectionInList)(e,a))return r;return t.apply(void 0,c([e,r].concat(i)))}}t.default=l},1456:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.validateNode=t.schema=void 0;var n=r(1457);var i=u(n);var o=r(1458);var a=u(o);function u(e){return e&&e.__esModule?e:{default:e}}t.schema=i.default;t.validateNode=a.default},1457:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);function n(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function i(e){var t={blocks:n({},e.typeItem,{parent:{types:e.types},nodes:[{objects:["block"]}],normalize:o({parent_type_invalid:function e(t,r){return t.unwrapBlockByKey(r.node.key,{normalize:false})},child_object_invalid:function t(r,n){return a(e,r,n.node)}})})};e.types.forEach(function(r){t.blocks[r]={nodes:[{types:[e.typeItem]}],normalize:o({child_type_invalid:function t(r,n){return r.wrapBlockByKey(n.child.key,e.typeItem,{normalize:false})}})}});return t}function o(e){return function(t,r,n){var i=e[r];i&&i(t,n)}}function a(e,t,r){t.wrapBlockByKey(r.nodes.first().key,e.typeDefault,{normalize:false});var n=t.value.document.getDescendant(r.key).nodes.first();r.nodes.rest().forEach(function(e,r){return t.moveNodeByKey(e.key,n.key,r+1,{normalize:false})});return t}t.default=i},1458:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var i=false;var o=void 0;try{for(var a=e[Symbol.iterator](),u;!(n=(u=a.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(e){i=true;o=e}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r(4);var i=r(88);function o(e){return function(t){return a(e,t)}}function a(e,t){if("document"!==t.object&&"block"!==t.object)return;var r=t.nodes.map(function(r,n){if(!(0,i.isList)(e,r))return null;var o=t.nodes.get(n+1);if(!o||o.type!==r.type)return null;return[r,o]}).filter(Boolean);if(r.isEmpty())return;return function(e){r.reverse().forEach(function(t){var r=n(t,2),i=r[0],o=r[1];var a=e.value.document.getDescendant(o.key);a.nodes.forEach(function(t,r){e.moveNodeByKey(t.key,i.key,i.nodes.size+r,{normalize:false})});e.removeNodeByKey(o.key,{normalize:false})})}}t.default=o},1470:function(e,t,r){"use strict";e.exports=function(e,t){if(Array.isArray(e))return e[e.length-1]===t;e=String(e);t=String(t);var r=t.length;var n=e.length-r;while(r--)if(t.charAt(r)!==e.charAt(n+r))return false;return true}},1471:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(4);var i=r(40);var o=r(67);function a(e,t,r,a){var u=r.value;var s=(0,i.getEventTransfer)(t);var c=(0,o.getCurrentCode)(e,u);var l=u.endBlock;if(!c||!c.hasDescendant(l.key))return;var f=void 0;f="fragment"===s.type?s.fragment.getTexts().map(function(e){return e.text}).join("\n"):s.text;var p=(0,o.deserializeCode)(e,f).nodes;var d=n.Document.create({nodes:p});return r.insertFragment(d)}t.default=a},1472:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(139);r(4);var i=r(67);var o=r(670);var a=m(o);var u=r(679);var s=m(u);var c=r(680);var l=m(c);var f=r(681);var p=m(f);var d=r(682);var y=m(d);var h=r(683);var v=m(h);function m(e){return e&&e.__esModule?e:{default:e}}var b=(0,n.isKeyHotkey)("mod+a");var g=(0,n.isKeyHotkey)("shift+tab");var D=(0,n.isKeyHotkey)("tab");var w=(0,n.isKeyHotkey)("mod+enter");var I=(0,n.isKeyHotkey)("enter");var O=(0,n.isKeyHotkey)("backspace");function k(e,t,r,n){var o=r.value;var u=(0,i.getCurrentCode)(e,o);if(!u)return;var c=[e,t,r,n];if(e.selectAll&&b(t))return v.default.apply(void 0,c);if(g(t))return s.default.apply(void 0,c);if(D(t))return a.default.apply(void 0,c);if(e.exitBlockType&&w(t))return p.default.apply(void 0,c);if(I(t))return l.default.apply(void 0,c);if(O(t))return y.default.apply(void 0,c);return}t.default=k},1523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(1524);var a=h(o);var u=r(283);var s=y(u);var c=r(6);var l=r(711);var f=h(l);var p=r(709);var d=h(p);function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){b(t,e);function t(){v(this,t);return m(this,e.apply(this,arguments))}t.createFromFirebase=function e(r){return new t({live:true,uid:r.uid,email:r.email,emailVerified:Boolean(r.emailVerified),phoneNumber:r.phoneNumber,displayName:t.normalizeName(r.displayName||t.getNameFromEmail(r.email)),photoURL:r.photoURL||"",refreshToken:r.refreshToken||null,providers:(r.providerData||[]).reduce(function(e,t){return e.set(t.providerId,{})},(0,c.Map)()),customClaims:(0,c.Map)(r.customClaims),createdAt:new Date(r.metadata.creationTime||Date.now()-864e5),lastLoggedInAt:new Date(r.metadata.lastSignInTime||Date.now())})};t.createVisitor=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:""},n=r.uid;return new t({uid:n,live:true,isVisitor:true})};t.isLegacyID=function e(t){return Boolean(t.match(/^[0-9a-fA-F]{24}$/))};t.getAuthorizationHeader=function e(t,r){return"Basic "+(0,a.default)(t+":"+r)};t.normalizeName=function e(t){return t.slice(0,64)};t.getNameFromEmail=function e(t){return t?t.split("@")[0].split(".")[0]:""};t.prototype.updateDisplayName=function e(r){return this.merge({displayName:t.normalizeName(r||t.getNameFromEmail(this.email))})};t.prototype.setIdToken=function e(t){var r=(0,f.default)(t);return this.merge({customClaims:(0,c.Map)({intercomHash:r.intercomHash,siteAdmin:r.siteAdmin,riskScore:r.riskScore}),idToken:t})};t.prototype.mergeWithUser=function e(r){if(r.uid!=this.uid)throw new Error("Can't merge users with distinct uid");return this.merge({bio:r.bio,displayName:t.normalizeName(r.displayName||this.displayName),photoURL:r.photoURL})};t.prototype.toUser=function e(){return new d.default({uid:this.uid,bio:this.bio,displayName:this.displayName,photoURL:this.photoURL,lastLoggedInAt:this.lastLoggedInAt})};t.deserialize=function e(r){return new t(n({},r,{customClaims:(0,c.Map)(r.customClaims),providers:(0,c.Map)(r.providers),createdAt:new Date(r.createdAt),lastLoggedInAt:new Date(r.lastLoggedInAt)}))};t.prototype.serialize=function e(){return{uid:this.uid,email:this.email,emailVerified:this.emailVerified,bio:this.bio,displayName:this.displayName,photoURL:this.photoURL,refreshToken:this.refreshToken,idToken:this.idToken,providers:this.providers.toObject(),isVisitor:this.isVisitor,customClaims:this.customClaims.toJS(),createdAt:this.createdAt.getTime(),lastLoggedInAt:this.lastLoggedInAt.getTime()}};i(t,[{key:"riskScore",get:function e(){return this.customClaims.get("riskScore")}},{key:"risk",get:function e(){var t=this.riskScore;if("number"!=typeof t)return"unknown";if(t<50)return"low";if(t<75)return"medium";return"high"}},{key:"isRisky",get:function e(){return"high"==this.risk}},{key:"requirePhoneVerification",get:function e(){return!this.hasPhoneVerified&&this.isRisky}},{key:"isLegacy",get:function e(){return t.isLegacyID(this.uid)}},{key:"authorizationHeader",get:function e(){return this.isLoggedIn&&this.idToken?t.getAuthorizationHeader(this.uid,this.idToken):null}},{key:"isLoggedIn",get:function e(){return Boolean(!this.isVisitor&&this.uid)}},{key:"hasPassword",get:function e(){return this.providers.has("password")}},{key:"hasGithubProvider",get:function e(){return this.providers.has("github.com")}},{key:"hasGoogleProvider",get:function e(){return this.providers.has("google.com")}},{key:"hasPhoneVerified",get:function e(){return this.providers.has("phone")}},{key:"isSiteAdmin",get:function e(){return Boolean(this.customClaims.get("siteAdmin"))}}]);return t}((0,c.Record)({live:false,isVisitor:false,uid:"",email:"",emailVerified:false,phoneNumber:null,bio:"",displayName:"",photoURL:"",idToken:null,refreshToken:null,providers:(0,c.Map)(),customClaims:(0,c.Map)(),createdAt:new Date,lastLoggedInAt:new Date}));t.default=g},1542:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(6);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){u(t,e);function t(){o(this,t);return a(this,e.apply(this,arguments))}t.createFromUser=function e(r){return new t({objectID:r.uid,displayName:r.displayName,bio:r.bio,photoURL:r.photoURL})};t.deserialize=function e(r){return new t(r)};t.prototype.serialize=function e(){var t=this.objectID,r=this.displayName,n=this.bio,i=this.photoURL;return{objectID:t,displayName:r,bio:n,photoURL:i}};n(t,[{key:"index",get:function e(){return t.INDEX}}],[{key:"INDEX",get:function e(){return"users"}}]);return t}((0,i.Record)({objectID:"",displayName:"",bio:"",photoURL:""}));t.default=s},1543:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(6);function a(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){c(t,e);function t(){u(this,t);return s(this,e.apply(this,arguments))}t.createFromPage=function e(r,n,i){return new t({pageID:r.uid,title:r.title,description:r.description,spaceID:n,versionID:i})};t.getVersionFilter=function e(t){return"version/"+t};t.getPageFilter=function e(t){return"page/"+t};t.deserialize=function e(r){var i=r.objectID,o=r._highlightResult,u=r._rankingInfo,s=a(r,["objectID","_highlightResult","_rankingInfo"]);var c=i.split("/"),l=c[0],f=c[1],p=c[2];var d=n({pageID:p,versionID:f,spaceID:l},s);if(o){d.highlightedTitle=o.title.value;d.highlightedDescription=o.description.value}u&&(d.searchScore=u.userScore);return new t(d)};t.prototype.serialize=function e(){var t=this.objectID,r=this.title,n=this.description;return{objectID:t,title:r,description:n}};i(t,[{key:"objectID",get:function e(){var t=this.spaceID,r=this.versionID,n=this.pageID;return t+"/"+r+"/"+n}},{key:"indexTags",get:function e(){var r=this.spaceID,n=this.versionID;return[r,t.getVersionFilter(n)]}},{key:"sectionsFilters",get:function e(){var r=this.pageID;var n=t.getPageFilter(r);return this.indexTags.join(" AND ")+" AND "+n}},{key:"index",get:function e(){return t.INDEX}}],[{key:"INDEX",get:function e(){return"pages"}}]);return t}((0,o.Record)({pageID:"",spaceID:"",versionID:"",title:"",description:"",highlightedTitle:"",highlightedDescription:"",searchScore:0}));t.default=l},1544:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o,a;var u=r(6);var s=r(654);var c=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(a=o=function(e){y(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.createFromPageAndSection=function e(r,n){var i=r.pageID,o=r.spaceID,a=r.versionID;var u=n.title,s=n.id,c=n.key;return new t({pageID:i,spaceID:o,versionID:a,title:u,sectionID:c,content:n.text,hash:s})};t.getVersionFilter=function e(t){return"version/"+t};t.getPageFilter=function e(t){return"page/"+t};t.deserialize=function e(r){var i=r.objectID,o=r._highlightResult,a=r._rankingInfo,u=f(r,["objectID","_highlightResult","_rankingInfo"]);var s=i.split("/"),c=s[0],l=s[1],p=s[2],d=s[3];var y=n({spaceID:c,versionID:l,pageID:p,sectionID:d},u);if(o){y.highlightedTitle=o.title.value;y.highlightedContent=o.content.value}a&&(y.searchScore=a.userScore);return new t(y)};t.prototype.serialize=function e(){var r=this.objectID,n=this.title,i=this.content,o=this.hash;return{objectID:r,title:n,content:i.slice(0,t.CONTENT_SIZE_LIMIT),hash:o}};i(t,[{key:"objectID",get:function e(){var t=this.spaceID,r=this.versionID,n=this.pageID,i=this.sectionID;return t+"/"+r+"/"+n+"/"+i}},{key:"indexTags",get:function e(){var r=this.spaceID,n=this.versionID,i=this.pageID;return[r,t.getVersionFilter(n),t.getPageFilter(i)]}},{key:"index",get:function e(){return t.INDEX}}],[{key:"INDEX",get:function e(){return"sections"}}]);return t}((0,u.Record)({pageID:"",spaceID:"",versionID:"",sectionID:"",title:"",content:"",hash:"",highlightedTitle:"",highlightedContent:"",searchScore:0})),o.CONTENT_SIZE_LIMIT=8e3,a);t.default=h},1545:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o,a;var u=r(6);var s=r(712);var c=h(s);var l=r(27);var f=r(713);var p=h(f);var d=r(716);var y=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g={GITBOOK:"gitbook",GITHUB:"github"};var D=(a=o=function(e){b(t,e);function t(){v(this,t);return m(this,e.apply(this,arguments))}t.queryBySpace=function e(t){return this.query("spaces/"+t).doc("github/config")};t.create=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(n({},r,{createdAt:r.createdAt||new Date}))};t.deserialize=function e(r){return new t(n({},r,{importBranchesFilter:(0,u.List)(r.importBranchesFilter),createdAt:new Date(r.createdAt)}))};t.prototype.query=function e(r){return t.queryBySpace(r)};t.prototype.serialize=function e(){return{repoID:this.repoID,token:this.token,hookID:this.hookID,importBranchesFilter:this.importBranchesFilter.toArray(),priority:this.priority,createdBy:this.createdBy,createdAt:this.createdAt.getTime()}};t.prototype.asTaskConfig=function e(){return{repoID:this.repoID,authToken:this.token}};t.prototype.shouldImportRef=function e(t){var r=0===t.indexOf("refs/heads/");if(!r)return false;var n=t.replace(/^refs\/heads\//,"");var i=this.importBranchesFilter.some(function(e){var t=(0,c.default)(e);return t.test(n)});return i};t.prototype.toCreateUpdate=function e(r){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(new l.DatabaseUpdate).set(t.queryBySpace(r),this).update(p.default.queryByID(r),{hasGitHubSync:true,editOnGitHub:n?this.repoID:null})};t.prototype.toUpdate=function e(r){return(new l.DatabaseUpdate).set(t.queryBySpace(r),this)};t.prototype.toRemoveUpdate=function e(r){return(new l.DatabaseUpdate).delete(t.queryBySpace(r)).merge(y.default.clearStatusesUpdate(r)).update(p.default.queryByID(r),{hasGitHubSync:false,editOnGitHub:null})};i(t,[{key:"githubOwner",get:function e(){var t=this.repoID.split("/");return t[0]}},{key:"githubRepo",get:function e(){var t=this.repoID.split("/");return t[1]}}]);return t}((0,l.DatabaseModel)("githubConfig",{repoID:"",token:"",hookID:null,importBranchesFilter:(0,u.List)(["master"]),priority:g.GITHUB,createdBy:"",createdAt:new Date})),o.MAX_BRANCHES=10,o.PRIORITIES=g,a);t.default=D},214:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);function n(e,t,r){var n=t.document;if(!r){if(!t.selection.startKey)return null;r=t.startBlock}var i=n.getParent(r.key);return i&&i.type===e.typeItem?i:null}t.default=n},280:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.decreaseItemDepth=t.increaseItemDepth=t.splitListItem=t.unwrapList=t.wrapInList=void 0;var n=r(1444);var i=d(n);var o=r(1449);var a=d(o);var u=r(1450);var s=d(u);var c=r(1451);var l=d(c);var f=r(1452);var p=d(f);function d(e){return e&&e.__esModule?e:{default:e}}t.wrapInList=i.default;t.unwrapList=a.default;t.splitListItem=s.default;t.increaseItemDepth=l.default;t.decreaseItemDepth=p.default},367:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var i=r(27);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){u(t,e);function t(){o(this,t);return a(this,e.apply(this,arguments))}t.queryByDomain=function e(t){return this.query("domains").doc((0,i.escapeKey)(t))};t.prototype.query=function e(){return t.queryByDomain(this.domain)};t.createFromOrg=function e(r){if(!r.customDomain)return null;return new t({orgID:r.uid,domain:r.customDomain})};t.createFromSpace=function e(r){if(!r.customDomain)return null;return new t({orgID:r.orgID,spaceID:r.uid,domain:r.customDomain})};t.deserialize=function e(r){return new t({orgID:r.orgID,spaceID:r.spaceID||null,domain:r.domain,deprecated:r.deprecated})};t.prototype.serialize=function e(){return{orgID:this.orgID,spaceID:this.spaceID,domain:this.domain,deprecated:this.deprecated}};n(t,[{key:"escapedDomain",get:function e(){return(0,i.escapeKey)(this.domain)}}]);return t}((0,i.DatabaseModel)("customDomain",{orgID:"",spaceID:null,domain:"",deprecated:false}));t.default=s},389:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(6);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){s(t,e);function t(){a(this,t);return u(this,e.apply(this,arguments))}t.normalizeMessage=function e(t){return t.split("\n")[0].slice(0,100)};t.create=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r instanceof t)return r;return new t(n({},r,{message:r.message&&t.normalizeMessage(r.message),ref:r.ref?r.ref:null}))};t.deserialize=function e(r){return t.create(r)};t.prototype.serialize=function e(){return{repoID:this.repoID,sha:this.sha,ref:this.ref,message:this.message,isGitBookBot:this.isGitBookBot}};i(t,[{key:"treeUrl",get:function e(){var t=(this.ref||"").replace(/^refs\/[^/]+\//,"");return"https://github.com/"+this.repoID+"/tree/"+(t||this.sha)+"/"}}]);return t}((0,o.Record)({repoID:"",sha:"",message:"",ref:null,isGitBookBot:false}));t.default=c},396:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);function n(e,t){return e.types.includes(t.type)}t.default=n},582:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=r(6);var o=r(27);var a=r(161);var u=v(a);var s=r(583);var c=v(s);var l=r(366);var f=v(l);var p=r(595);var d=v(p);var y=r(367);var h=v(y);function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var D=function(e){g(t,e);function t(){m(this,t);return b(this,e.apply(this,arguments))}t.queryByID=function e(t){return this.query("orgs").doc(t+"/infos")};t.prototype.query=function e(){return t.queryByID(this.uid)};t.create=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r instanceof t)return r;return new t(n({},r,{uid:r.uid||(0,o.genKey)(),createdAt:new Date(r.createdAt||Date.now()),baseDomain:t.normalizeBaseDomain(r.baseDomain||""),customDomain:r.customDomain||null}))};t.prototype.regenerateUID=function e(){return this.merge({uid:(0,o.genKey)()})};t.deserialize=function e(r){return new t(n({},r,{spacesPermission:(0,i.Map)(r.spacesPermission),createdAt:new Date(r.createdAt)}))};t.prototype.serialize=function e(){return{uid:this.uid,name:this.name,createdAt:this.createdAt.getTime(),createdBy:this.createdBy,logoURL:this.logoURL,baseDomain:this.baseDomain,spacesPermission:this.spacesPermission.toJS(),customDomain:this.customDomain}};t.prototype.isOwner=function e(t){return this.createdBy===t};t.prototype.canSuperAdmin=function e(t){return t.isSiteAdmin||this.isOwner(t.uid)};t.prototype.getURL=function e(t){return t?"https://"+this.baseDomain+"."+t:"/spaces/"+this.baseDomain};t.prototype.getSpacesURL=function e(t){if(this.customDomain)return"https://"+this.customDomain;return this.getURL(t)};t.prototype.toCreateUpdate=function e(){var t=new o.DatabaseUpdate;var r=c.default.createForUserID({userID:this.createdBy,joinedAt:this.createdAt,role:u.default.ADMIN});var n=d.default.createFromOrg(this);var i=h.default.createFromOrg(this);t.set(this.query(),this).set(d.default.queryByDomain(n.domain),n).merge(r.toUpdate(this.uid),f.default.getNewInvitesUpdate(this.uid));i&&t.set(h.default.queryByDomain(i.domain),i);return t};t.prototype.toCustomDomainUpdate=function e(t){var r=new o.DatabaseUpdate;var n=this.merge({customDomain:t});var i=h.default.createFromOrg(n);var a=h.default.createFromOrg(this);r.update(this.query(),{customDomain:i?t:null});a&&this.customDomain&&this.customDomain!==t&&r.set(h.default.queryByDomain(this.customDomain),a.merge({deprecated:true}));i&&t&&r.set(h.default.queryByDomain(t),i);return r};t.prototype.toBaseDomainUpdate=function e(t){var r=new o.DatabaseUpdate;var n=this.merge({baseDomain:t});var i=d.default.createFromOrg(n);r.update(this.query(),{baseDomain:t});r.set(d.default.queryByDomain(t),i);return r};t.prototype.toTransferOwnershipUpdate=function e(t){return(new o.DatabaseUpdate).update(this.query(),{createdBy:t})};t.prototype.toDeleteUpdate=function e(){var t=new o.DatabaseUpdate;t.delete(this.query());return t};t.prototype.setBaseDomain=function e(r){return this.merge({baseDomain:t.normalizeBaseDomain(r)})};t.prototype.setCustomDomain=function e(t){return this.merge({customDomain:t||null})};t.normalizeBaseDomain=function e(t){return t.trim().replace(/[^a-zA-Z0-9-]/g,"-").replace(/-+/g,"-").toLowerCase().substr(0,32).replace(/-$/,"")};t.validateBaseDomain=function e(t){return Boolean(/^[a-z0-9-_]+$/.test(t)&&t.length>=3&&t.length<=32&&"www"!=t)};t.validateCustomDomain=function e(t){return!t||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/.test(t)};return t}((0,o.DatabaseModel)("org",{uid:"",name:"",createdAt:new Date,createdBy:"",logoURL:null,baseDomain:"",spacesPermission:(0,i.Map)(),customDomain:null,ssoSignInLabel:null}));t.default=D},583:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(162);var a=h(o);var u=r(6);var s=r(27);var c=r(593);var l=h(c);var f=r(594);var p=h(f);var d=r(161);var y=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){b(t,e);function t(){v(this,t);return m(this,e.apply(this,arguments))}t.queryByOrg=function e(t){return this.query(["orgs",t,"members"])};t.queryByID=function e(t){var r=t.orgID,n=t.userID;return this.queryByOrg(r).doc(n)};t.prototype.query=function e(r){return t.queryByID({orgID:r,userID:this.uid})};t.prototype.canAdminOnSpace=function e(t){return this.role===y.default.ADMIN||this.permissions.get(t)===y.default.ADMIN};t.create=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r instanceof t)return r;return new t(n({},r,{invite:r.invite||null}))};t.createForUser=function e(r){var n=r.user,i=r.role,o=void 0===i?y.default.READER:i,a=r.teams,s=void 0===a?(0,u.Map)():a;return t.createForUserID({userID:n.uid,role:o,teams:s})};t.createForUserID=function e(r){var n=r.userID,i=r.role,o=void 0===i?y.default.READER:i,a=r.teams,s=void 0===a?(0,u.Map)():a;return t.create({uid:n,role:o,teams:s,joinedAt:new Date})};t.createForInvite=function e(r,n){if(n.teamID){var i;return t.create({uid:r,joinedAt:new Date,invite:n.uid,teams:(0,u.Map)((i={},i[n.teamID]=p.default.create({role:n.role,joinedAt:new Date}),i))})}return t.create({uid:r,role:n.role,invite:n.uid,joinedAt:new Date})};t.deserialize=function e(r){return t.create(n({},r,{joinedAt:new Date(r.joinedAt),teams:(0,u.Map)(r.teams||{}).map(function(e){return p.default.deserialize(e)}),permissions:(0,u.Map)(r.permissions||{})}))};t.isRoleUpgrade=function e(t,r){var n=(0,a.default)(y.default);var i=n.findIndex(function(e){return e===r});var o=n.findIndex(function(e){return e===t});return i>o};t.prototype.serialize=function e(){return{uid:this.uid,role:this.role,invite:this.invite,joinedAt:this.joinedAt.getTime(),teams:this.teams.map(function(e){return e.serialize()}).toJS(),permissions:this.permissions.toJS()}};t.prototype.updateFromTeamInvite=function e(t){return this.merge({teams:this.teams.set(t.teamID,p.default.create({role:t.role,joinedAt:new Date})),invite:t.uid})};t.prototype.toTeamUpdate=function e(t){var r;var n=t.orgID,i=t.team;return(new s.DatabaseUpdate).update(this.query(n),{teams:this.teams.merge((r={},r[i.uid]=p.default.create({role:this.role}),r)).toJS()})};t.prototype.toUpdate=function e(r){var n=new s.DatabaseUpdate;var i=new l.default({uid:r,role:this.role,joinedAt:this.joinedAt});return n.set(t.queryByID({orgID:r,userID:this.uid}),this).set(l.default.queryByID({orgID:r,userID:this.uid}),i)};t.prototype.toDeleteUpdate=function e(r){return(new s.DatabaseUpdate).delete(t.queryByID({orgID:r,userID:this.uid})).delete(l.default.queryByID({orgID:r,userID:this.uid}))};i(t,[{key:"key",get:function e(){return this.uid}},{key:"canEdit",get:function e(){return/^(writer|reviewer|admin)$/.test(this.role)}},{key:"canReview",get:function e(){return/^(reviewer|admin)$/.test(this.role)}},{key:"canAdmin",get:function e(){return this.role==y.default.ADMIN}}]);return t}((0,s.DatabaseModel)("member",{uid:"",role:y.default.READER,joinedAt:new Date,invite:null,teams:(0,u.Map)(),permissions:(0,u.Map)()}));t.default=g},593:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(27);var a=r(161);var u=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){f(t,e);function t(){c(this,t);return l(this,e.apply(this,arguments))}t.queryByUser=function e(t){return this.query(["users",t,"orgs"])};t.queryByID=function e(t){var r=t.orgID,n=t.userID;return this.queryByUser(n).doc(r)};t.prototype.query=function e(r){return t.queryByID({orgID:this.uid,userID:r})};t.deserialize=function e(r){return new t(n({},r,{joinedAt:new Date(r.joinedAt)}))};t.prototype.serialize=function e(){var t=this.uid,r=this.role,n=this.joinedAt;return{uid:t,role:r,joinedAt:n.getTime()}};i(t,[{key:"canEdit",get:function e(){return/^(writer|reviewer|admin)$/.test(this.role)}},{key:"canReview",get:function e(){return/^(reviewer|admin)$/.test(this.role)}},{key:"canAdmin",get:function e(){return this.role==u.default.ADMIN}}]);return t}((0,o.DatabaseModel)("userMembership",{uid:"",role:u.default.READER,joinedAt:new Date}));t.default=p},595:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(27);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){a(t,e);function t(){i(this,t);return o(this,e.apply(this,arguments))}t.queryByDomain=function e(t){return this.query("orgDomains").doc((0,n.escapeKey)(t))};t.prototype.query=function e(){return t.queryByDomain(this.domain)};t.createFromOrg=function e(r){return new t({orgID:r.uid,domain:r.baseDomain})};t.deserialize=function e(r){return new t({orgID:r.orgID,domain:r.domain})};t.prototype.serialize=function e(){return{orgID:this.orgID,domain:this.domain}};return t}((0,n.DatabaseModel)("orgBaseDomain",{orgID:"",domain:""}));t.default=u},647:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(27);function a(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){c(t,e);function t(){u(this,t);return s(this,e.apply(this,arguments))}t.queryBySpace=function e(t){return this.query(["spaces",t,"drafts"])};t.queryByID=function e(t){var r=t.spaceID,n=t.draftID;return this.queryBySpace(r).doc(n)};t.prototype.query=function e(r){return t.queryByID({spaceID:r,draftID:this.uid})};t.create=function e(r){if(r instanceof t)return r;var i=r.revisionInitial,u=r.createdBy,s=r.uid,c=a(r,["revisionInitial","createdBy","uid"]);return new t(n({createdBy:u,createdAt:new Date,lastModifiedAt:new Date,revisionInitial:i,revisionCurrent:i,uid:s||(0,o.genKey)()},c))};t.deserialize=function e(r){return new t({uid:r.uid,title:r.title,createdAt:new Date(r.createdAt),lastModifiedAt:new Date(r.lastModifiedAt),closedAt:r.closedAt?new Date(r.closedAt):null,createdBy:r.createdBy,revisionCurrent:r.revisionCurrent,revisionInitial:r.revisionInitial,revisionBase:r.revisionBase||null,revisionMerged:r.revisionMerged||null})};t.prototype.serialize=function e(){return{uid:this.uid,title:this.title,createdAt:this.createdAt.getTime(),lastModifiedAt:this.lastModifiedAt.getTime(),closedAt:this.closedAt?this.closedAt.getTime():null,createdBy:this.createdBy,revisionCurrent:this.revisionCurrent,revisionInitial:this.revisionInitial,revisionBase:this.revisionBase,revisionMerged:this.revisionMerged}};t.prototype.authorizeAs=function e(t){return this.merge({createdBy:t.uid,createdAt:new Date,lastModifiedAt:new Date})};t.prototype.markAsModified=function e(){return this.merge({lastModifiedAt:new Date})};t.prototype.markAsClosed=function e(){return this.merge({closedAt:new Date})};t.prototype.toCreateUpdate=function e(r){return(new o.DatabaseUpdate).set(t.queryByID({spaceID:r,draftID:this.uid}),this)};t.prototype.toUpdate=function e(t){return this.toCreateUpdate(t)};i(t,[{key:"isClosed",get:function e(){return null!=this.closedAt}}]);return t}((0,o.DatabaseModel)("draft",{uid:"",title:"",createdAt:new Date,lastModifiedAt:new Date,closedAt:null,createdBy:"",revisionCurrent:"",revisionInitial:"",revisionBase:null,revisionMerged:null}));t.default=l},648:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(6);var a=r(596);var u=b(a);var s=r(27);var c=r(649);var l=b(c);var f=r(647);var p=b(f);var d=r(650);var y=b(d);var h=r(276);var v=r(389);var m=b(v);function b(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=function(e){w(t,e);function t(){g(this,t);return D(this,e.apply(this,arguments))}t.queryByID=function e(t){var r=t.spaceID,n=t.revisionID;return this.query(["spaces",r,"revisions"]).doc(n)};t.prototype.query=function e(r){return t.queryByID({spaceID:r,revisionID:this.uid})};t.create=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r instanceof t)return r;var i=r.versions||l.default.createInitialVersions();return new t(n({},r,{versions:i,assets:r.assets?r.assets:(0,o.Map)(),primaryVersionID:r.primaryVersionID||i.first().uid,parents:(0,o.List)(r.parents||[]),uid:r.uid||(0,s.genKey)(),github:(0,o.List)(r.github?r.github.map(function(e){return m.default.create(e)}):[])}))};t.deserialize=function e(r){var n=r.github||[];var i=Array.isArray(n)?n:[n];return t.create({uid:r.uid,message:r.message,createdAt:new Date(r.createdAt),createdBy:r.createdBy,parents:r.parent?[r.parent]:r.parents,primaryVersionID:r.content.primaryVersion,versions:l.default.deserializeVersions(r.content.versions),assets:(0,o.Map)(r.content.assets||{}).map(function(e){return y.default.deserialize(e)}),github:i.map(function(e){return m.default.deserialize(e)}),rollbackOf:r.rollbackOf?r.rollbackOf:null})};t.prototype.serialize=function e(){return{uid:this.uid,message:this.message,createdAt:this.createdAt.getTime(),createdBy:this.createdBy,parents:this.parents.toArray(),content:{primaryVersion:this.primaryVersionID,versions:l.default.serializeVersions(this.versions),assets:this.assets.map(function(e){return e.serialize()}).toObject()},github:this.github.map(function(e){return e.serialize()}).toArray(),rollbackOf:this.rollbackOf?this.rollbackOf:null}};t.createInitialRevision=function e(r){return t.create({message:"Initial revision",createdBy:r.uid,versions:l.default.createInitialVersions()})};t.prototype.setParents=function e(t){return this.merge({parents:(0,o.List)(t)})};t.prototype.setParent=function e(r){var n=r instanceof t?r.uid:r;return this.merge({parents:this.parents.filter(function(e){return e!=n}).unshift(n)})};t.prototype.hasParent=function e(r){var n=r instanceof t?r.uid:r;return this.parents.some(function(e){return e==n})};t.prototype.fork=function e(){return this.merge({uid:(0,s.genKey)(),parents:[this.uid],message:"",github:(0,o.List)(),rollbackOf:null,createdAt:new Date})};t.prototype.rollback=function e(t){return this.merge({uid:(0,s.genKey)(),parents:[t],rollbackOf:this.rollbackOf||this.uid})};t.prototype.authorizeAs=function e(t){return this.merge({createdBy:t.uid,createdAt:new Date})};t.prototype.toCommitUpdate=function e(t){var r=t.space,n=t.draft;var i=this.toCreateUpdate(r.uid);n?i.merge(n.merge({revisionCurrent:this.uid}).markAsModified().toUpdate(r.uid)):i.merge(r.toCheckoutUpdate(this));return i};t.prototype.toUpdate=function e(t){return(new s.DatabaseUpdate).update(this.query(t),{message:this.message})};t.prototype.toCreateUpdate=function e(t){return(new s.DatabaseUpdate).set(this.query(t),this)};t.prototype.toRollbackUpdate=function e(t){var r=t.user,n=t.space,i=t.draft;var o=this.authorizeAs(r).rollback(i?i.revisionCurrent:n.primaryRevision);return o.toCommitUpdate({space:n,draft:i})};t.prototype.diffVersions=function e(t){return(0,h.diffVersions)(t.versions,this.versions)};t.prototype.diffPages=function e(t,r){return(0,h.diffPages)(t,r)};t.prototype.diffDocuments=function e(t,r){var n=(0,h.diffNodes)(t.nodes,r.nodes);return(0,h.toDiffEditorState)(n)};i(t,[{key:"parent",get:function e(){return this.parents.first()}},{key:"defaultMessage",get:function e(){return this.message||(this.isSyncedWithGitHub?this.github.first().message:"")}},{key:"primaryVersion",get:function e(){var t=this.versions.get(this.primaryVersionID);if(!t)throw new Error('Version "'+this.primaryVersionID+'" not found in the revision');return t}},{key:"isSyncedWithGitHub",get:function e(){return this.github.size>0}},{key:"isRollback",get:function e(){return Boolean(this.rollbackOf)}},{key:"isMerge",get:function e(){return this.parents.size>1}}]);return t}((0,s.DatabaseModel)("revision",{uid:"",message:"",createdAt:new Date,createdBy:"",parents:(0,o.List)(),versions:(0,o.OrderedMap)(),primaryVersionID:"",assets:(0,o.Map)(),github:(0,o.List)(),rollbackOf:null}));(0,u.default)(I.prototype,["diffVersions","diffPages","diffDocuments"],{takesArguments:true});t.default=I},650:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(6);var a=r(27);var u=r(651);var s=f(u);var c=r(388);var l=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){y(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.create=function e(r){if(r instanceof t)return r;return new t(n({},r,{uid:r.uid||(0,a.genKey)(),createdAt:new Date(r.createdAt||Date.now()),lastModifiedAt:new Date(r.lastModifiedAt||Date.now()),github:r.github?l.default.create(r.github):null}))};t.createFromFile=function e(r){return new Promise(function(e,n){var i=new FileReader;i.onloadend=function(n){var i=n.target.result;var o=new Blob([i],{type:r.type});var a=URL.createObjectURL(o);e(t.create({name:r.name,blobSize:r.size,contentType:r.type,downloadURL:a,buffer:i}))};i.onerror=function(e){n(e)};i.readAsArrayBuffer(r)})};t.deserialize=function e(r){return new t({uid:r.uid,name:r.name,downloadURL:r.downloadURL,blobSize:r.size,contentType:r.contentType,createdAt:new Date(r.createdAt),lastModifiedAt:new Date(r.lastModifiedAt),modifiedBy:(0,o.Set)(r.modifiedBy),github:r.github?l.default.create(r.github):null})};t.prototype.serialize=function e(){return{uid:this.uid,name:this.name,downloadURL:this.downloadURL,size:this.blobSize,contentType:this.contentType||s.default.MIME_TYPE_DEFAULT,createdAt:this.createdAt.getTime(),lastModifiedAt:this.lastModifiedAt.getTime(),modifiedBy:this.modifiedBy.toJSON(),github:this.github?this.github.serialize():null}};t.prototype.isUploaded=function e(){return Boolean(this.downloadURL&&!this.buffer)};t.prototype.markAsModifiedBy=function e(t){return this.merge({lastModifiedAt:new Date,modifiedBy:this.modifiedBy.add(t.uid)})};t.prototype.updateWithMetadata=function e(t){return this.merge({name:t.name,downloadURL:t.downloadURL,createdAt:t.createdAt,lastModifiedAt:t.lastModifiedAt,blobSize:t.blobSize,contentType:t.contentType,buffer:null})};i(t,[{key:"isSvg",get:function e(){return this.contentType===s.default.MIME_TYPE_SVG}}]);return t}((0,o.Record)({uid:"",name:"",downloadURL:"",blobSize:0,createdAt:new Date,lastModifiedAt:new Date,modifiedBy:(0,o.Set)(),buffer:null,github:null,contentType:null}));t.default=h},666:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){a(t,e);function t(){i(this,t);return o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}((0,n.Record)({types:["ul_list","ol_list"],typeItem:"list_item",typeDefault:"paragraph"}));t.default=u},667:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(396);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){var n=t.document;var o=n.getParent(r.key);return o&&(0,i.default)(e,o)?o:null}t.default=a},668:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(6);var i=r(396);var o=s(i);var a=r(214);var u=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){r=r||t.selection;if(!r.startKey)return(0,n.List)();var i=t.document;var a=i.getClosestBlock(r.startKey);var s=i.getClosestBlock(r.endKey);if(a===s){var c=(0,u.default)(e,t,a);return c?(0,n.List)([c]):(0,n.List)()}var l=i.getCommonAncestor(a.key,s.key);if((0,o.default)(e,l)){var f=l.getPath(a.key);var p=l.getPath(s.key);return l.nodes.slice(f[0],p[0]+1)}if(l.type===e.typeItem)return(0,n.List)([l]);return(0,n.List)()}t.default=c},681:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);function n(e,t,r,n){var i=r.value;if(!i.isCollapsed)return;t.preventDefault();return e.resolvedOnExit(r)}t.default=n},682:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(1470);var i=a(n);var o=r(67);function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n){var a=r.value;if(a.isExpanded)return;var u=a.startOffset,s=a.startText;var c=a.startBlock;var l=(0,o.getCurrentIndent)(e,a);var f=c.text.slice(0,u);if((0,i.default)(f,l)){t.preventDefault();return r.deleteBackward(l.length).focus()}if(e.exitBlockType){var p=(0,o.getCurrentCode)(e,a);var d=0===u&&p.getFirstText()===s;var y=1===p.nodes.size&&0===c.text.length;if(d&&y){t.preventDefault();return r.setBlocks(e.exitBlockType,{normalize:false}).unwrapNodeByKey(c.key)}}return}t.default=u},683:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(4);var n=r(67);function i(e,t,r,i){var o=r.value;t.preventDefault();var a=(0,n.getCurrentCode)(e,o);return r.collapseToStartOf(a.getFirstText()).extendToEndOf(a.getLastText())}t.default=i},709:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(27);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){s(t,e);function t(){a(this,t);return u(this,e.apply(this,arguments))}t.queryByID=function e(t){return this.query("users").doc(t+"/infos")};t.prototype.query=function e(){return t.queryByID(this.uid)};t.create=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r instanceof t)return r;return new t(n({uid:r.uid||(0,o.genKey)()},r))};t.deserialize=function e(r){return new t(n({},r,{lastLoggedInAt:new Date(r.lastLoggedInAt||Date.now()),deletedAt:r.deletedAt?new Date(r.deletedAt):null}))};t.prototype.serialize=function e(){return{uid:this.uid,bio:this.bio,displayName:this.displayName,photoURL:this.photoURL||null,lastLoggedInAt:this.lastLoggedInAt.getTime(),deletedAt:this.deletedAt?this.deletedAt.getTime():null}};i(t,[{key:"firstName",get:function e(){return this.displayName.split(" ")[0]}},{key:"lastName",get:function e(){return this.displayName.split(" ").slice(1).join(" ")}},{key:"shortDisplayName",get:function e(){var t=this.firstName,r=this.lastName;if(!r)return t;return t+" "+r[0]+"."}}]);return t}((0,o.DatabaseModel)("user",{uid:"",displayName:"",bio:"",photoURL:null,lastLoggedInAt:new Date,deletedAt:null}));t.default=c},715:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(27);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){a(t,e);function t(){i(this,t);return o(this,e.apply(this,arguments))}t.queryByOrg=function e(t){return this.query(["orgs",t,"spaces"])};t.queryByName=function e(t){var r=t.orgID,i=t.baseName;return this.queryByOrg(r).doc((0,n.escapeKey)(i))};t.prototype.query=function e(r){return t.queryByName({orgID:r,baseName:this.baseName})};t.createFromSpace=function e(r){return new t({spaceID:r.uid,baseName:r.baseName})};t.deserialize=function e(r){return new t(r)};t.prototype.serialize=function e(){return{spaceID:this.spaceID,baseName:this.baseName}};return t}((0,n.DatabaseModel)("orgSpace",{spaceID:"",baseName:""}));t.default=u},716:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(6);var a=r(27);var u=r(717);var s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=72e5;var y=function(e){p(t,e);function t(){l(this,t);return f(this,e.apply(this,arguments))}t.create=function e(r){return new t(n({},r,{createdAt:r.createdAt||new Date}))};t.queryBySpace=function e(t){return this.query(["spaces",t,"github/statuses"])};t.queryByID=function e(t){var r=t.spaceID,n=t.revisionID;return this.queryBySpace(r).doc(n)};t.clearStatusesUpdate=function e(r){return(new a.DatabaseUpdate).deleteCollection(t.queryBySpace(r))};t.prototype.query=function e(r){return t.queryByID({revisionID:this.revisionID,spaceID:r})};t.prototype.toUpdate=function e(t){return(new a.DatabaseUpdate).set(this.query(t),this)};t.prototype.addTasks=function e(t){var r=t.reduce(function(e,t){return e.set(t.taskID,t)},(0,o.Map)());return this.merge({tasks:this.tasks.merge(r)})};t.prototype.markTaskAsCompleted=function e(t,r){return this.merge({tasks:this.tasks.set(t,this.tasks.get(t).markAsCompleted(r))})};t.deserialize=function e(r){return new t({type:r.type,revisionID:r.revisionID,createdAt:new Date(r.createdAt),repoID:r.repoID,tasks:(0,o.Map)(r.tasks||{}).map(function(e){return s.default.deserialize(e)})})};t.prototype.serialize=function e(){return{type:this.type,revisionID:this.revisionID,createdAt:this.createdAt.getTime(),repoID:this.repoID,tasks:this.tasks.map(function(e){return e.serialize()}).toJS()}};i(t,[{key:"hasFinished",get:function e(){var t=this.tasks.size;return t>0&&t===this.completedTasks.size}},{key:"hasSucceeded",get:function e(){return this.hasFinished&&!this.hasError}},{key:"hasTimeout",get:function e(){return new Date-this.createdAt>d||"undefined"===typeof this.type}},{key:"hasError",get:function e(){return!!this.error}},{key:"progress",get:function e(){var t=this.tasks.size;return 0===t?0:100*this.completedTasks.size/t}},{key:"error",get:function e(){var t=this.tasks.find(function(e){return e.hasError});return t?t.error:null}},{key:"completedTasks",get:function e(){return this.tasks.filter(function(e){return e.isCompleted})}}]);return t}((0,a.DatabaseModel)("githubSyncStatus",{type:"import",revisionID:"",createdAt:new Date,repoID:"",tasks:(0,o.Map)()}));t.default=y},717:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(6);var a=r(27);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){c(t,e);function t(){u(this,t);return s(this,e.apply(this,arguments))}t.create=function e(r){return new t({taskID:(0,a.genKey)(),payload:r})};t.deserialize=function e(r){return new t({taskID:r.taskID,payload:r.payload?JSON.parse(r.payload):{},startedAt:new Date(r.startedAt),completedAt:r.completedAt?new Date(r.completedAt):null,error:r.error||null})};t.toCompletedUpdate=function e(r,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var o=new t({taskID:n}).markAsCompleted(i).serialize();return(new a.DatabaseUpdate).updateProperty(r,"tasks/"+o.taskID+"/completedAt",o.completedAt).updateProperty(r,"tasks/"+o.taskID+"/error",o.error)};t.filterPayload=function e(t){var r=t.type;return n({type:r},"export/version"===r?{versionID:t.versionID}:{})};t.prototype.toMessage=function e(t,r){var n=this.taskID,i=this.payload;return{taskID:n,spaceID:t,repo:r,payload:i}};t.prototype.serialize=function e(){return{taskID:this.taskID,payload:JSON.stringify(t.filterPayload(this.payload)),startedAt:this.startedAt.getTime(),completedAt:this.completedAt?this.completedAt.getTime():null,error:this.error||null}};t.prototype.markAsCompleted=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var r=null;t&&(r=t.expose?t.message:"Unexpected error");return this.merge({completedAt:new Date,error:r})};t.prototype.toCreateUpdate=function e(t){return(new a.DatabaseUpdate).updateProperty(t,"tasks/"+this.taskID,this.serialize())};i(t,[{key:"isCompleted",get:function e(){return!!this.completedAt}},{key:"hasError",get:function e(){return!!this.error}},{key:"hasSucceeded",get:function e(){return this.isCompleted&&!this.hasError}}]);return t}((0,o.Record)({taskID:"",payload:{},startedAt:new Date,completedAt:null,error:null}));t.default=l},88:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isSelectionInList=t.isList=t.getPreviousItem=t.getListForItem=t.getItemsAtRange=t.getItemDepth=t.getCurrentList=t.getCurrentItem=void 0;var n=r(214);var i=g(n);var o=r(1445);var a=g(o);var u=r(1446);var s=g(u);var c=r(668);var l=g(c);var f=r(667);var p=g(f);var d=r(1447);var y=g(d);var h=r(396);var v=g(h);var m=r(1448);var b=g(m);function g(e){return e&&e.__esModule?e:{default:e}}t.getCurrentItem=i.default;t.getCurrentList=a.default;t.getItemDepth=s.default;t.getItemsAtRange=l.default;t.getListForItem=p.default;t.getPreviousItem=y.default;t.isList=v.default;t.isSelectionInList=b.default}});