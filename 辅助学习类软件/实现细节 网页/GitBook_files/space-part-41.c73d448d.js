webpackJsonp([55],{108:function(e,t,r){"use strict";var n=r(1605);var a=r(1606);var o=Object.prototype.hasOwnProperty;var i=Object.prototype.toString;var u=function e(t){return Boolean(t)&&"object"===typeof t};var s=function e(t){return Boolean(t)&&"[object Object]"===i.call(t)};var c=function e(t,r,n,a){o.call(r,a)&&void 0===t[a]&&(t[a]=n);return r};var p=function(e,t,r,n){o.call(t,n)&&(s(e[n])&&s(r)?e[n]=l(e[n],r):void 0===e[n]&&(e[n]=r));return t};var f=function(e,t){if(!u(t))return t;e=e||c;var r=n(2,arguments);for(var a=0;a<r.length;a+=1)for(var o in r[a])e(t,r[a],r[a][o],o);return t};var l=function e(t){return f.apply(null,[p,t].concat(a(arguments)))};var h=function(e){return f.apply(null,[null,e].concat(a(arguments)))};e.exports=h;e.exports.deep=l},1179:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Analytics=t.Database=t.BlobStorage=t.Auth=t.DatabaseState=t.Search=t.StoragePaths=t.PUBSUB_TOPICS=t.CDN=void 0;var n=r(1180);var a=p(n);var o=r(408);var i=r(1563);var u=r(1566);var s=r(1567);var c=r(1568);function p(e){return e&&e.__esModule?e:{default:e}}t.CDN=o.CDN;t.PUBSUB_TOPICS=c.TOPICS;t.StoragePaths=o.StoragePaths;t.Search=a.default;t.DatabaseState=i.DatabaseState;t.Auth=u.GenericAuth;t.BlobStorage=o.GenericBlobStorage;t.Database=i.GenericDatabase;t.Analytics=s.GenericAnalytics},1570:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(283);var a=k(n);var o=r(1571);var i=b(o);var u=r(408);var s=r(1572);var c=b(s);var p=r(1573);var f=b(p);var l=r(1581);var h=b(l);var v=r(1584);var d=b(v);var m=r(1586);var y=b(m);var g=r(1639);var w=b(g);function b(e){return e&&e.__esModule?e:{default:e}}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function x(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){O(t,e);function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(this,t);var o=R(this,e.call(this));o.isClient=true;o.config=r;o.app=a.initializeApp(r.firebase);o.database=new c.default(o.app.database(),n.onDatabaseState,n.initialDatabaseState);o.storage=new i.default(o.app.storage(),{cdnHost:r.cdn.blobsurl});o.analytics=new y.default(r);o.auth=new f.default(o.app.auth(),o.storage,o.database,o.analytics,{apiEndpoint:r.urls.api,initialUser:n.initialUser,onUser:n.onUser});o.documents=new u.DocumentStore(o.storage);o.assets=new u.AssetStore(o.storage);o.embed=new h.default(r.iframely.key);o.pubsub=new d.default;return o}t.prototype.destroy=function(){var e=x(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.app.delete();case 2:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();return t}(w.default);t.default=_},1571:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(44);var o=p(a);var i=r(3);var u=r(284);var s=r(727);var c=p(s);function p(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(0,o.default)("core:storage");var m=function(e){v(t,e);function t(r,n){l(this,t);var a=h(this,e.call(this,n));a.storage=r;return a}t.prototype.getRef=function e(t){return this.storage.ref().child(t)};t.prototype.getMetadata=function(){var e=f(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=this.getRef(t);a.next=3;return(0,u.toESPromise)(function(){return r.getMetadata()});case 3:n=a.sent;return a.abrupt("return",i.BlobMetadata.createFromFirebase(n));case 5:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.uploadBuffer=function(){var e=f(regeneratorRuntime.mark(function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a,o,s,c,p;return regeneratorRuntime.wrap(function e(f){while(1)switch(f.prev=f.next){case 0:a=this.getRef(t);o=new Blob([r]);s=n.metadata,c=void 0===s?{}:s;d('upload file "'+t+'" with metadata',c);f.next=6;return(0,u.toESPromise)(function(){return a.put(o,c)});case 6:p=f.sent;return f.abrupt("return",i.BlobMetadata.createFromFirebase(p.metadata));case 8:case"end":return f.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.uploadJSON=function(){var e=f(regeneratorRuntime.mark(function e(t,r){var n,a,o;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:n=this.getRef(t);a={contentType:i.BlobMetadata.MIME_TYPE_JSON};d('upload JSON "'+t+'"',n.toString());s.next=5;return(0,u.toESPromise)(function(){return n.putString(JSON.stringify(r),"raw",a)});case 5:o=s.sent;return s.abrupt("return",i.BlobMetadata.createFromFirebase(o.metadata));case 7:case"end":return s.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.uploadFile=function(){var e=f(regeneratorRuntime.mark(function e(t,r){var a=this;var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i,u,s;return regeneratorRuntime.wrap(function e(c){while(1)switch(c.prev=c.next){case 0:i=o.metadata,u=void 0===i?{}:i,s=o.user;s&&(u.customMetadata=u.customMetadata?n({},u.customMetadata,{userID:s.uid}):{userID:s.uid});return c.abrupt("return",new Promise(function(e,n){var o=new FileReader;o.onloadend=function(n){var o=n.target.result;var i=Object.assign({},u,{contentType:r.type});e(a.uploadBuffer(t,o,{metadata:i}))};o.onerror=function(e){n(e)};o.readAsArrayBuffer(r)}));case 3:case"end":return c.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.download=function(){var e=f(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",fetch(this.transformURL(t)));case 1:case"end":return r.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.downloadAsBuffer=function(){var e=f(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return this.download(t);case 2:r=n.sent;return n.abrupt("return",r.arrayBuffer());case 4:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.downloadAsString=function(){var e=f(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return this.download(t);case 2:r=n.sent;return n.abrupt("return",r.text());case 4:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.downloadByPath=function(){var e=f(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=this.getRef(t);a.next=3;return r.getDownloadURL();case 3:n=a.sent;return a.abrupt("return",this.downloadAsBuffer(n));case 5:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();return t}(c.default);t.default=m},1572:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,a,o,i,u,s,c,p,f,l,h,v;var d=function(){var e=I(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return r.stop()}},e,this)}));return function t(r){return e.apply(this,arguments)}}();var m=r(6);var y=r(44);var g=_(y);var w=r(132);var b=r(106);var k=r(284);var x=r(410);var P=_(x);var R=r(729);var O=_(R);function _(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function D(e,t,r,n,a){var o={};Object["keys"](n).forEach(function(e){o[e]=n[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;("value"in o||o.initializer)&&(o.writable=true);o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o);if(a&&void 0!==o.initializer){o.value=o.initializer?o.initializer.call(a):void 0;o.initializer=void 0}if(void 0===o.initializer){Object["defineProperty"](e,t,o);o=null}return o}function I(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}var C=(0,g.default)("core:database");var U=(n=(0,b.captureTrace)("database.getDocument"),a=(0,b.captureTrace)("database.getCollection"),o=(0,b.captureTrace)("database.setDocument"),i=(0,b.captureTrace)("database.updateDocument"),u=(0,b.captureTrace)("database.updateProperty"),s=(0,b.captureTrace)("database.deleteDocument"),c=(0,b.captureTrace)("database.commit"),p=(0,b.captureTrace)("database.transaction"),f=(0,b.captureTrace)("database.transactionProperty"),v=function(e){E(t,e);function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new P.default;S(this,t);var o=j(this,e.call(this,n,a));o.db=r;return o}t.prototype.setOnline=function e(t){C("set database as "+(t?"online":"offline"));t?this.db.goOnline():this.db.goOffline()};t.prototype.onDocumentUpdated=function e(t,r){var n=r.exists()?(0,w.deserialize)(t.kind,r.val()):null;this.updateState(function(e){var r=e.markAsFetched(t);return null!=n?r.setDocument(t,n):r.deleteDocument(t)},true);return n};t.prototype.onDocumentError=function e(t,r){var n=t.options.ignoreErrors;n||Promise.reject(r);this.updateState(function(e){return e.markAsFetched(t).deleteDocument(t).setError(t,r)},true)};t.prototype.onCollectionUpdated=function e(t,r){var n=(0,m.OrderedMap)();r.forEach(function(e){var r=(0,w.deserialize)(t.kind,e.val());n=n.set(e.key,r)});this.updateState(function(e){return e.markAsFetched(t).setCollection(t,n)},true);return this.state.getCollection(t)};t.prototype.onCollectionError=function e(t,r){Promise.reject(r);this.updateState(function(e){return e.markAsFetched(t).setCollection(t,(0,m.OrderedMap)()).setError(t,r)},true)};t.prototype.getCollectionRef=function e(t){var r=this.db.ref(t.path);var n=t.filters.entrySeq().first();n&&r.orderByChild(n[0]).equalTo(n[1]);return r};t.prototype.getDocumentRef=function e(t){return this.db.ref(t.path)};t.prototype.observeDocument=function e(t,r){var n=this;var a=P.default.genObserverID();var o=this.state.hasObserver(t);this.updateState(function(e){return e.addObserver(t,a,r)});if(o)return{observerID:a,pending:null};var i=new b.Trace("database.observeDocument");i.label("Path",t.path);C('observe changes in document "'+t.path+'"');var u=new Promise(function(e,r){var a=false;var o=function t(){if(a)return;a=true;i.end();e()};var u=n.getDocumentRef(t);var s=u.on("value",function(e){n.onDocumentUpdated(t,e);o()},function(e){C("error: ",e);n.onDocumentError(t,e);o()});var c=function e(){u.off("value",s)};n.updateState(function(e){return e.setUnlistener(t,c)})});return{observerID:a,pending:u}};t.prototype.observeCollection=function e(t){var r=this;var n=this.getCollectionRef(t);var a=P.default.genObserverID();var o=this.state.hasObserver(t);this.updateState(function(e){return e.addObserver(t,a)});if(o)return{observerID:a,pending:null};var i=new b.Trace("database.observeCollection");i.label("Path",t.path);C("observe changes in collection "+t.path);var u=new Promise(function(e,a){var o=false;var u=function t(){if(o)return;o=true;i.end();e()};var s=n.on("value",function(e){r.onCollectionUpdated(t,e);u()},function(e){C("error: ",e);r.onCollectionError(t,e);u()});var c=function e(){n.off("value",s)};r.updateState(function(e){return e.setUnlistener(t,c)})});return{observerID:a,pending:u}};t.prototype.getDocument=function(){var e=I(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:t.label("Path",r.path);n=this.getDocumentRef(r);o.next=4;return(0,k.toESPromise)(function(){return n.once("value")});case 4:a=o.sent;return o.abrupt("return",this.onDocumentUpdated(r,a));case 6:case"end":return o.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.getCollection=function(){var e=I(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:t.label("Path",r.path);n=this.getCollectionRef(r);o.next=4;return(0,k.toESPromise)(function(){return n.once("value")});case 4:a=o.sent;return o.abrupt("return",this.onCollectionUpdated(r,a));case 6:case"end":return o.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.setDocument=function(){var e=I(regeneratorRuntime.mark(function e(t,r,n){var a,o;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:t.label("Path",r.path);a=n.serialize();o=this.getDocumentRef(r);C("set document",r.path,a);i.prev=4;i.next=7;return(0,k.toESPromise)(function(){return o.set(a)});case 7:i.next=13;break;case 9:i.prev=9;i.t0=i["catch"](4);t.label("Value",a);throw i.t0;case 13:case"end":return i.stop()}},e,this,[[4,9]])}));function t(t,r,n){return e.apply(this,arguments)}return t}();t.prototype.updateDocument=function(){var e=I(regeneratorRuntime.mark(function e(t,r,n){var a;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:t.label("Path",r.path);a=this.getDocumentRef(r);C("update document",r.path,n);o.prev=3;o.next=6;return(0,k.toESPromise)(function(){return a.update(n)});case 6:o.next=12;break;case 8:o.prev=8;o.t0=o["catch"](3);t.label("Properties",n);throw o.t0;case 12:case"end":return o.stop()}},e,this,[[3,8]])}));function t(t,r,n){return e.apply(this,arguments)}return t}();t.prototype.updateProperty=function(){var e=I(regeneratorRuntime.mark(function e(t,r,n,a){var o=this;var i;return regeneratorRuntime.wrap(function e(u){while(1)switch(u.prev=u.next){case 0:t.label("Path",r.path);t.label("Property",n);i=r.path+"/"+n;C("update document property",i,a);u.prev=4;u.next=7;return(0,k.toESPromise)(function(){return o.db.ref(i).update(a)});case 7:u.next=13;break;case 9:u.prev=9;u.t0=u["catch"](4);t.label("Value",a);throw u.t0;case 13:case"end":return u.stop()}},e,this,[[4,9]])}));function t(t,r,n,a){return e.apply(this,arguments)}return t}();t.prototype.deleteDocument=function(){var e=I(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:t.label("Path",r.path);n=this.getDocumentRef(r);C("delete document",r.path);a.next=5;return(0,k.toESPromise)(function(){return n.remove()});case 5:case"end":return a.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.commit=function(){var e=I(regeneratorRuntime.mark(function e(t,r){var n=this;var a;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:a=r.toPathMap();C("commit update",a);o.prev=2;o.next=5;return(0,k.toESPromise)(function(){return n.db.ref().update(a)});case 5:o.next=11;break;case 7:o.prev=7;o.t0=o["catch"](2);t.label("Update",a);throw o.t0;case 11:case"end":return o.stop()}},e,this,[[2,7]])}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.retryTransaction=function(){var e=I(regeneratorRuntime.mark(function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return(0,k.toESPromise)(function(){return t.transaction(function(e){return r(e)})});case 3:a.next=15;break;case 5:a.prev=5;a.t0=a["catch"](0);if(!("maxretry"!==a.t0.message)){a.next=9;break}throw a.t0;case 9:if(!(n>4)){a.next=11;break}throw new Error("Transaction failed after 4 retries");case 11:a.next=13;return d(500+Math.ceil(1e3*Math.random()));case 13:a.next=15;return this.retryTransaction(t,r,n+1);case 15:case"end":return a.stop()}},e,this,[[0,5]])}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.transaction=function(){var e=I(regeneratorRuntime.mark(function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:t.label("Path",r.path);a.next=3;return this.retryTransaction(this.getDocumentRef(r),function(e){var t=e?(0,w.deserialize)(r.kind,e):null;var a=n(t);if("undefined"==typeof a)return;return a?a.serialize():null});case 3:case"end":return a.stop()}},e,this)}));function t(t,r,n){return e.apply(this,arguments)}return t}();t.prototype.transactionProperty=function(){var e=I(regeneratorRuntime.mark(function e(t,r,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var i;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:t.label("Path",r.path);t.label("Property",n);i=this.getDocumentRef(r).child(n);o.next=5;return this.retryTransaction(i,a);case 5:case"end":return o.stop()}},e,this)}));function t(t,r,n,a){return e.apply(this,arguments)}return t}();return t}(O.default),D(v.prototype,"getDocument",[n],Object.getOwnPropertyDescriptor(v.prototype,"getDocument"),v.prototype),D(v.prototype,"getCollection",[a],Object.getOwnPropertyDescriptor(v.prototype,"getCollection"),v.prototype),D(v.prototype,"setDocument",[o],Object.getOwnPropertyDescriptor(v.prototype,"setDocument"),v.prototype),D(v.prototype,"updateDocument",[i],Object.getOwnPropertyDescriptor(v.prototype,"updateDocument"),v.prototype),D(v.prototype,"updateProperty",[u],Object.getOwnPropertyDescriptor(v.prototype,"updateProperty"),v.prototype),D(v.prototype,"deleteDocument",[s],Object.getOwnPropertyDescriptor(v.prototype,"deleteDocument"),v.prototype),D(v.prototype,"commit",[c],Object.getOwnPropertyDescriptor(v.prototype,"commit"),v.prototype),D(v.prototype,"transaction",[p],Object.getOwnPropertyDescriptor(v.prototype,"transaction"),v.prototype),D(v.prototype,"transactionProperty",[f],Object.getOwnPropertyDescriptor(v.prototype,"transactionProperty"),v.prototype),v);t.default=U},1573:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a,o,i,u,s,c,p,f;var l=r(44);var h=U(l);var v=r(283);var d=C(v);var m=r(704);var y=U(m);var g=r(411);var w=r(1576);var b=U(w);var k=r(711);var x=U(k);var P=r(28);var R=U(P);var O=r(1579);var _=r(3);var S=r(106);var j=r(408);var E=r(284);var D=r(730);var I=U(D);function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function U(e){return e&&e.__esModule?e:{default:e}}function T(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function L(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function q(e,t,r,n,a){var o={};Object["keys"](n).forEach(function(e){o[e]=n[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;("value"in o||o.initializer)&&(o.writable=true);o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o);if(a&&void 0!==o.initializer){o.value=o.initializer?o.initializer.call(a):void 0;o.initializer=void 0}if(void 0===o.initializer){Object["defineProperty"](e,t,o);o=null}return o}var B=(0,h.default)("core:auth");var G="visitor_uid";var W="\n    mutation LegacySignIn($email: String!, $password: String!) {\n      legacySignIn(email: $email, password: $password) {\n        auth {\n            uid,\n            token\n        }\n      }\n    }\n";var F="\n    mutation LegacyCheck($password: String) {\n      legacyCheckUser(password: $password) {\n          auth {\n            uid,\n            token\n        }\n      }\n    }\n";var N=(a=(0,S.captureTrace)("auth.listen"),o=(0,S.captureTrace)("auth.signUp"),i=(0,S.captureTrace)("auth.signIn"),u=(0,S.captureTrace)("auth.signInAsLegacy"),s=(0,S.captureTrace)("auth.signInWithAuthToken"),f=function(e){L(t,e);t.createVisitor=function e(){var t=b.default.get(G)||y.default.v4();b.default.set(G,t);return _.AuthUser.createVisitor({uid:t})};function t(r,n,a,o,i){M(this,t);var u=A(this,e.call(this,o,i));u.auth=r;u.storage=n;u.database=a;u.apiEndpoint=i.apiEndpoint;u.auth.setPersistence(d.auth.Auth.Persistence.NONE);return u}t.prototype.unlisten=function e(){if(this.unsubscribe){this.unsubscribe();this.unsubscribe=null}this.stopObserveProfile();this.stopObserveIdToken()};t.prototype.assertUser=function e(){var t=this.auth.currentUser;if(!t)throw new Error("User is not logged in");return t};t.prototype.dispatchFirebaseUser=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o,i;return regeneratorRuntime.wrap(function e(u){while(1)switch(u.prev=u.next){case 0:o=!this.user.live||this.user.uid!=t.uid;i=_.AuthUser.createFromFirebase(n({},t,{customClaims:a}));u.next=4;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r.dispatchUser(function(){return i});n.next=3;return o?r.observeProfile(t):null;case 3:n.t0=n.sent;n.next=6;return o?r.observeIdToken(t):r.onIdTokenChanged(t);case 6:n.t1=n.sent;return n.abrupt("return",[n.t0,n.t1]);case 8:case"end":return n.stop()}},e,r)})));case 4:case"end":return u.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.onIdTokenChanged=function(){var e=T(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return(0,E.toESPromise)(function(){return t.getIdToken()});case 3:r=n.sent;n.next=6;return this.dispatchUser(function(e){return e.setIdToken(r)});case 6:n.next=15;break;case 8:n.prev=8;n.t0=n["catch"](0);if(!("auth/app-deleted"===n.t0.code||"auth/user-disabled"===n.t0.code||"auth/user-token-expired"===n.t0.code)){n.next=14;break}n.next=13;return this.signOut();case 13:return n.abrupt("return");case 14:throw n.t0;case 15:case"end":return n.stop()}},e,this,[[0,8]])}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.observeProfile=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;var n,a,o;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:this.stopObserveProfile();n=this.database.observeDocument(_.User.queryByID(t.uid),function(e){var t=e;if(t){var n=t;r.dispatchUser(function(e){return e.mergeWithUser(n)})}}),a=n.observerID,o=n.pending;this.userObserver=a;i.next=5;return o;case 5:case"end":return i.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.stopObserveProfile=function e(){if(this.userObserver){this.database.stopObserving(this.userObserver);this.userObserver=null}};t.prototype.observeIdToken=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:this.stopObserveIdToken();this.unsubscribeToken=this.auth.onIdTokenChanged(function(){r.onIdTokenChanged(t)});n.next=4;return this.onIdTokenChanged(t);case 4:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.stopObserveIdToken=function e(){if(this.unsubscribeToken){this.unsubscribeToken();this.unsubscribeToken=null}};t.prototype.listen=function(){var e=T(regeneratorRuntime.mark(function e(r){var n=this;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:(0,R.default)(!this.unsubscribe,"Authentication backend already has a listener");if(!this.unsubscribe){r.next=3;break}return r.abrupt("return");case 3:r.next=5;return new Promise(function(e,r){n.unsubscribe=n.auth.onAuthStateChanged(function(){var a=T(regeneratorRuntime.mark(function a(o){return regeneratorRuntime.wrap(function a(i){while(1)switch(i.prev=i.next){case 0:B("auth state changed to "+(o?"logged in":"visitor"));if(o){i.next=7;break}n.stopObserveProfile();n.stopObserveIdToken();n.dispatchUser(function(){return t.createVisitor()});e();return i.abrupt("return");case 7:i.prev=7;i.next=10;return n.dispatchFirebaseUser(o);case 10:i.next=16;break;case 12:i.prev=12;i.t0=i["catch"](7);r(i.t0);return i.abrupt("return");case 16:e();case 17:case"end":return i.stop()}},a,n,[[7,12]])}));return function(e){return a.apply(this,arguments)}}())});case 5:case"end":return r.stop()}},e,this)}));function r(t){return e.apply(this,arguments)}return r}();t.prototype.signUp=function(){var e=T(regeneratorRuntime.mark(function e(t,r,n,a){var o=this;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:B("sign up new user");t.next=3;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function e(u){while(1)switch(u.prev=u.next){case 0:u.next=2;return(0,E.toESPromise)(function(){return o.auth.createUserWithEmailAndPassword(n,a)});case 2:t=u.sent;u.next=5;return(0,E.toESPromise)(function(){return t.updateProfile({displayName:r})});case 5:u.prev=5;u.next=8;return o.checkWithLegacy(t,a);case 8:if(!u.sent){u.next=10;break}return u.abrupt("return");case 10:u.next=19;break;case 12:u.prev=12;u.t0=u["catch"](5);u.next=16;return o.signOut();case 16:u.next=18;return(0,E.toESPromise)(function(){return t.delete()});case 18:throw u.t0;case 19:u.next=21;return o.dispatchFirebaseUser(t);case 21:i=o.user.updateDisplayName(r);u.next=24;return o.updateProfile(i);case 24:o.analytics.identify(i);o.analytics.trackSignUp();case 26:case"end":return u.stop()}},e,o,[[5,12]])})));case 3:case"end":return t.stop()}},e,this)}));function t(t,r,n,a){return e.apply(this,arguments)}return t}();t.prototype.signIn=function(){var e=T(regeneratorRuntime.mark(function e(t,r,n){var a=this;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:B("sign in user");t.next=3;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:o.prev=0;o.next=3;return(0,E.toESPromise)(function(){return a.auth.signInWithEmailAndPassword(r,n)});case 3:t=o.sent;o.next=6;return a.dispatchFirebaseUser(t);case 6:o.next=17;break;case 8:o.prev=8;o.t0=o["catch"](0);o.t1="auth/user-not-found"!==o.t0.code;if(o.t1){o.next=15;break}o.next=14;return a.signInAsLegacy(r,n);case 14:o.t1=!o.sent;case 15:if(!o.t1){o.next=17;break}throw o.t0;case 17:a.analytics.identify(a.user);a.analytics.trackSignIn();case 19:case"end":return o.stop()}},e,a,[[0,8]])})));case 3:case"end":return t.stop()}},e,this)}));function t(t,r,n){return e.apply(this,arguments)}return t}();t.prototype.signInAsLegacy=function(){var e=T(regeneratorRuntime.mark(function e(t,r,n){var a,o,i,u;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=new O.GraphQLClient(this.apiEndpoint);t.prev=1;t.next=4;return a.request(W,{email:r,password:n});case 4:o=t.sent;i=o.legacySignIn.auth;if(i){t.next=8;break}return t.abrupt("return",false);case 8:t.next=10;return this.signInWithAuthToken(i);case 10:return t.abrupt("return",true);case 13:t.prev=13;t.t0=t["catch"](1);u=t.t0.response&&t.t0.response.errors?t.t0.response.errors[0]:t.t0;throw u;case 17:case"end":return t.stop()}},e,this,[[1,13]])}));function t(t,r,n){return e.apply(this,arguments)}return t}();t.prototype.signInWithAuthToken=function(){var e=T(regeneratorRuntime.mark(function e(t,r){var n=this;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{forceSync:false};var o,i,u;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:o=r.token;i=a.forceSync;u=function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return n.signOut();case 2:n.database.setOnline(true);case 3:case"end":return t.stop()}},e,n)}));return function t(){return e.apply(this,arguments)}}();if(o){t.next=8;break}B("sign out user");t.next=7;return u();case 7:return t.abrupt("return");case 8:B("sign in user using a custom token");t.next=11;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:s.prev=0;s.next=3;return(0,E.toESPromise)(function(){return n.auth.signInWithCustomToken(o)});case 3:t=s.sent;n.database.setOnline(true);r=o?(0,x.default)(o):{};a=r.claims;s.next=9;return n.dispatchFirebaseUser(t,a);case 9:s.next=18;break;case 11:s.prev=11;s.t0=s["catch"](0);B("error login with token: ",s.t0);if(i){s.next=16;break}throw s.t0;case 16:s.next=18;return u();case 18:case"end":return s.stop()}},e,n,[[0,11]])})));case 11:case"end":return t.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.reauthenticate=function(){var e=T(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:n=this.auth.currentUser;a=d.auth.EmailAuthProvider.credential(t,r);return o.abrupt("return",(0,E.toESPromise)(function(){return n.reauthenticate(a)}));case 3:case"end":return o.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.reauthenticateWithGoogle=function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=new d.auth.GoogleAuthProvider;return r.abrupt("return",this.reauthenticateWithProvider(t));case 2:case"end":return r.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.reauthenticateWithGithub=function(){var e=T(regeneratorRuntime.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scopes,n=void 0===r?[]:r;var a;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=new d.auth.GithubAuthProvider;n.forEach(function(e){return a.addScope(e)});return t.abrupt("return",this.reauthenticateWithProvider(a));case 3:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.reauthenticateWithProvider=function(){var e=T(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=this.assertUser();n=null!=r.providerData.find(function(e){return e.providerId==t.providerId});if(!n){a.next=4;break}return a.abrupt("return",(0,E.toESPromise)(function(){return r.reauthenticateWithPopup(t)}));case 4:return a.abrupt("return",(0,E.toESPromise)(function(){return r.linkWithPopup(t)}));case 5:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.verifyEmail=function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=this.assertUser();r.next=3;return(0,E.toESPromise)(function(){return t.sendEmailVerification()});case 3:case"end":return r.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.uploadPhoto=function(){var e=T(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:n=j.StoragePaths.userUpload({userID:t.uid,filename:r.name});o.next=3;return this.storage.uploadFile(n,r,{metadata:{contentType:r.type},user:t});case 3:a=o.sent;o.next=6;return this.updateProfile(t.merge({photoURL:a.downloadURL}));case 6:case"end":return o.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.updateProfile=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;var n;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:n=this.assertUser();a.next=3;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return r.flushProfile(t);case 3:a.next=5;return(0,E.toESPromise)(function(){return n.updateProfile({displayName:t.displayName,photoURL:t.photoURL})});case 5:a.next=12;break;case 7:a.prev=7;a.t0=a["catch"](0);a.next=11;return r.flushProfile(_.AuthUser.createFromFirebase(n));case 11:throw a.t0;case 12:case"end":return a.stop()}},e,r,[[0,7]])})));case 3:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.updateEmail=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;var n;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:n=this.assertUser();a.next=3;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return(0,E.toESPromise)(function(){return n.updateEmail(t)});case 2:a.next=4;return r.dispatchFirebaseUser(r.auth.currentUser);case 4:case"end":return a.stop()}},e,r)})));case 3:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.updatePassword=function(){var e=T(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=this.assertUser();n.next=3;return(0,E.toESPromise)(function(){return r.updatePassword(t)});case 3:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.signOut=function(){var e=T(regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return(0,E.toESPromise)(function(){return r.auth.signOut()});case 2:r.dispatchUser(function(){return t.createVisitor()});case 3:case"end":return n.stop()}},e,r)})));case 2:case"end":return n.stop()}},e,this)}));function r(){return e.apply(this,arguments)}return r}();t.prototype.checkWithLegacy=function(){var e=T(regeneratorRuntime.mark(function e(t,r){var n,a,o,i,u;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:if(!_.AuthUser.isLegacyID(t.uid)){s.next=2;break}return s.abrupt("return",false);case 2:s.next=4;return t.getIdToken();case 4:n=s.sent;a=new O.GraphQLClient(this.apiEndpoint,{headers:{Authorization:_.AuthUser.getAuthorizationHeader(t.uid,n)}});o=void 0;s.prev=7;s.next=10;return a.request(F,{password:r});case 10:i=s.sent;o=i.legacyCheckUser.auth;s.next=18;break;case 14:s.prev=14;s.t0=s["catch"](7);u=s.t0.response&&s.t0.response.errors?s.t0.response.errors[0]:s.t0;throw u;case 18:if(o){s.next=20;break}return s.abrupt("return",false);case 20:s.next=22;return this.signInWithAuthToken(o);case 22:return s.abrupt("return",true);case 23:case"end":return s.stop()}},e,this,[[7,14]])}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.signInWithProvider=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){var n,a,o;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return(0,E.toESPromise)(function(){return r.auth.signInWithPopup(t)});case 2:n=i.sent;a=n.user;i.prev=4;i.next=7;return r.checkWithLegacy(a);case 7:if(!i.sent){i.next=9;break}return i.abrupt("return");case 9:i.next=20;break;case 11:i.prev=11;i.t0=i["catch"](4);o=r.auth.currentUser;i.next=16;return r.signOut();case 16:if(!(o.metadata.creationTime===o.metadata.lastSignInTime)){i.next=19;break}i.next=19;return(0,E.toESPromise)(function(){return o.delete()});case 19:throw i.t0;case 20:i.next=22;return r.dispatchFirebaseUser(a);case 22:r.analytics.identify(r.user);r.analytics.trackSignIn(t.providerId);i.next=26;return r.flushProfile(r.user);case 26:case"end":return i.stop()}},e,r,[[4,11]])})));case 2:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.signInWithGoogle=function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=new d.auth.GoogleAuthProvider;r.next=3;return this.signInWithProvider(t);case 3:case"end":return r.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.signInWithGitHub=function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=new d.auth.GithubAuthProvider;r.next=3;return this.signInWithProvider(t);case 3:case"end":return r.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.flushProfile=function(){var e=T(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=t.toUser();n.next=3;return this.database.setDocument(r.query(),r);case 3:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.resetPassword=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return(0,E.toESPromise)(function(){return r.auth.sendPasswordResetEmail(t)});case 2:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.verifyPasswordResetCode=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return(0,E.toESPromise)(function(){return r.auth.verifyPasswordResetCode(t)});case 2:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.confirmPasswordReset=function(){var e=T(regeneratorRuntime.mark(function e(t,r){var n=this;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return(0,E.toESPromise)(function(){return n.auth.confirmPasswordReset(t,r)});case 2:case"end":return a.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.checkActionCode=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return(0,E.toESPromise)(function(){return r.auth.checkActionCode(t)});case 2:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.applyActionCode=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return(0,E.toESPromise)(function(){return r.auth.applyActionCode(t)});case 2:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.linkWithGoogle=function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=new d.auth.GoogleAuthProvider;r.next=3;return this.linkWithProvider(t);case 3:case"end":return r.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.linkWithGithub=function(){var e=T(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=new d.auth.GithubAuthProvider;r.next=3;return this.linkWithProvider(t);case 3:case"end":return r.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.linkWithProvider=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;var n;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:n=this.assertUser();a.next=3;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return(0,E.toESPromise)(function(){return n.linkWithPopup(t)});case 2:a.next=4;return r.dispatchFirebaseUser(n);case 4:case"end":return a.stop()}},e,r)})));case 3:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.unlinkProvider=function(){var e=T(regeneratorRuntime.mark(function e(t){var r=this;var n;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:n=this.assertUser();a.next=3;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return(0,E.toESPromise)(function(){return n.unlink(t)});case 2:a.next=4;return r.dispatchFirebaseUser(n);case 4:case"end":return a.stop()}},e,r)})));case 3:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}();t.prototype.unlinkGoogle=function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.unlinkProvider("google.com");case 2:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.unlinkGithub=function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.unlinkProvider("github.com");case 2:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();t.prototype.verifyPhoneNumber=function(){var e=T(regeneratorRuntime.mark(function e(t,r){var n=this;var a;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:a=new d.auth.PhoneAuthProvider;return o.abrupt("return",this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.toESPromise)(function(){return a.verifyPhoneNumber(t,r)}));case 1:case"end":return n.stop()}},e,n)}))));case 2:case"end":return o.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();t.prototype.reauthenticateWithPhone=function(){var e=T(regeneratorRuntime.mark(function e(t,r,n){var a=this;var o,i,u,s;return regeneratorRuntime.wrap(function e(c){while(1)switch(c.prev=c.next){case 0:o=this.assertUser();i=d.auth.PhoneAuthProvider.credential(n,r);u=(0,g.parseNumber)(t),s=u.country;c.next=5;return this.waitBeforeDispatch(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,E.toESPromise)(function(){return o.linkWithCredential(i)});case 2:a.analytics.trackVerifyPhone(s);t.next=5;return a.dispatchFirebaseUser(o);case 5:case"end":return t.stop()}},e,a)})));case 5:case"end":return c.stop()}},e,this)}));function t(t,r,n){return e.apply(this,arguments)}return t}();t.prototype.unlinkPhone=function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.unlinkProvider("phone");case 2:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();return t}(I.default),q(f.prototype,"listen",[a],Object.getOwnPropertyDescriptor(f.prototype,"listen"),f.prototype),q(f.prototype,"signUp",[o],Object.getOwnPropertyDescriptor(f.prototype,"signUp"),f.prototype),q(f.prototype,"signIn",[i],Object.getOwnPropertyDescriptor(f.prototype,"signIn"),f.prototype),q(f.prototype,"signInAsLegacy",[u],Object.getOwnPropertyDescriptor(f.prototype,"signInAsLegacy"),f.prototype),q(f.prototype,"signInWithAuthToken",[s],Object.getOwnPropertyDescriptor(f.prototype,"signInWithAuthToken"),f.prototype),f);t.default=N},1581:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(44);var a=u(n);var o=r(90);var i=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=(0,a.default)("core:edition:embed");var p=function(){function e(t){s(this,e);this.apiKey=t}e.prototype.fetch=function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}(function(e){var t={url:e,ssl:1,key:this.apiKey};c("fetch infos for "+e);return fetch("https://iframe.ly/api/iframely?"+i.default.stringify(t)).then(function(e){if(200!==e.status)throw new Error(e.statusText);return e.json()}).then(function(t){var r=f(t,"player")||f(t,"app")||f(t,"reader")||f(t,"image")||f(t,"file");return{url:e,type:l(r),title:t.meta.title,description:t.meta.description,icon:f(t,"icon"),thumbnail:f(t,"thumbnail"),embed:r}})});return e}();function f(e,t){var r=e.links[t]||[];var n=r[0];if(!n)return;var a=n.media;var o="file"==t&&0==n.type.indexOf("image/");return{type:o?"image":t,url:n.href,html:n.html,width:a?a.width:void 0,height:a?a.height:void 0,maxWidth:a?a["max-width"]:void 0,maxHeight:a?a["max-height"]:void 0,aspectRatio:a?a["aspect-ratio"]||a.height/a.width:0}}function l(e){if(!e)return"link";switch(e.type){case"player":return"video";case"image":return"image";default:return"rich"}}t.default=p},1584:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1585);var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){s(t,e);function t(){i(this,t);return u(this,e.apply(this,arguments))}return t}(a.default);t.default=c},1586:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(107);var o=x(a);var i=r(1588);var u=x(i);var s=r(1623);var c=x(s);var p=r(1628);var f=x(p);var l=r(1632);var h=x(l);var v=r(1637);var d=x(v);var m=r(44);var y=x(m);var g=r(731);var w=x(g);var b=r(1638);var k=x(b);function x(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(0,y.default)("core:analytics");u.default.use(c.default);u.default.use(f.default);u.default.use(h.default);u.default.use(d.default);var S=function(e){O(t,e);function t(n){P(this,t);var a=R(this,e.call(this));a.websiteUrl=n.urls.website;u.default.initialize((0,k.default)(n));if(window.RavenConfig){window.RavenConfig.config.autoBreadcrumbs={xhr:true,console:false,dom:true,location:true};window.RavenConfig.config.ignoreErrors=["Failed to fetch","Network Error"];window.RavenConfig.config.whitelistUrls=[r.p]}window.mixpanel&&n.mixpanel.orgs_token&&window.mixpanel.init(n.mixpanel.orgs_token,{},"orgs");u.default.ready(function(){if(!window.Raven)return;window.Raven.setDataCallback(function(e){e.exception&&a.trackUncaughtException(e.exception.values[0].value);return e});window.addEventListener("unhandledrejection",function(e){window.Raven.captureException(e.reason)})});return a}t.prototype.identify=function e(t){if(!t.isLoggedIn){this.resetToAnonymous();return}var r={name:t.displayName,email:t.email,avatar:t.photoURL,"Has Phone Verified":t.hasPhoneVerified,"Risk Score":t.riskScore,"Sign-in Providers":t.providers.keySeq().toArray()};_("identify user "+t.uid+":",r);var n=t.customClaims.get("intercomHash");u.default.identify(t.uid,r,{Intercom:!!n&&{hideDefaultLauncher:!this.showIntercomLauncher,user_hash:n}})};t.prototype.resetToAnonymous=function e(){var t=u.default.user().anonymousId();u.default.reset();window.Intercom("shutdown",{hide_default_launcher:!this.showIntercomLauncher});window.Intercom("boot");u.default.user().anonymousId(t)};t.prototype.alias=function e(t){_("alias current session to "+t.uid);u.default.alias(t.uid,{Intercom:{hideDefaultLauncher:!this.showIntercomLauncher}})};t.prototype.group=function e(t){var r={name:t.name,avatar:t.logoURL,createdAt:t.createdAt,website:(0,o.default)(this.websiteUrl,"@"+t.baseDomain),"Base Domain":t.baseDomain};_("group current user with "+t.uid,r);u.default.group(t.uid,r);if(window.mixpanel&&window.mixpanel.orgs){window.mixpanel.orgs.identify(t.uid);window.mixpanel.orgs.people.set({$name:t.name,$created:t.createdAt,"Base Domain":t.baseDomain,"Custom Domain":t.customDomain,"SSO Label":t.ssoSignInLabel})}};t.prototype.page=function e(){_("track page view",window.location.pathname);u.default.page({},{Intercom:{hideDefaultLauncher:!this.showIntercomLauncher}})};t.prototype.track=function e(t){var r=n({},t);delete r.type;_("track event "+t.type+" with",r);u.default.track(t.type,r,{Intercom:{hideDefaultLauncher:!this.showIntercomLauncher}})};t.prototype.trackOrgEvent=function e(t,r){var a=n({distinct_id:t.uid},r);delete a.type;_("track event "+r.type+" for org "+t.uid+" with",a);if(!window.mixpanel||!window.mixpanel.orgs)return;window.mixpanel.orgs.track(r.type,a)};return t}(w.default);t.default=S},1588:function(e,t,r){"use strict";var n=r(1589);var a=new n;a.VERSION=r(1622).version;e.exports=a},1623:function(e,t,r){"use strict";var n=r(1624);var a=e.exports=n("Hotjar").global("hj").global("_hjSettings").option("hjid").option("hjsv").option("tagEvents",true).option("recordVisitors",true).option("identifyTags",["Logged In User"]);a.prototype.initialize=function(){var e=this.options.hjid;var t=this.options.hjsv;window.hj=window.hj||function(){(window.hj.q=window.hj.q||[]).push(arguments)};window._hjSettings={hjid:e,hjsv:t};this.options.recordVisitors&&i();this.ready()};a.prototype.loaded=function(){return!!window.hj};a.prototype.identify=function(){var e=this.options.identifyTags;this.options.recordVisitors||i();this.options.identifyTags&&window.hj("tagRecording",e)};a.prototype.track=function(e){var t=e.event();var r=this.options.tagEvents;if(!r)return;window.hj("tagRecording",[t])};var o;function i(){if(o)return;var e=document.getElementsByTagName("head")[0];o=document.createElement("script");o.async=1;o.src="https://static.hotjar.com/c/hotjar-"+window._hjSettings.hjid+".js?sv="+window._hjSettings.hjsv;e.appendChild(o)}},1628:function(e,t,r){"use strict";var n=r(758);var a=r(108);var o=r(173).del;var i=r(422);var u=r(92);var s=r(287);var c=r(98);var p=r(68);var f=r(421);var l=e.exports=i("Intercom").global("Intercom").option("activator","#IntercomDefaultWidget").option("appId","").option("richLinkProperties",[]).tag('<script src="https://widget.intercom.io/widget/{{ appId }}">');l.prototype.initialize=function(){window.Intercom=function(){window.Intercom.q.push(arguments)};window.Intercom.q=[];this.load(this.ready)};l.prototype.loaded=function(){return"function"===typeof window.Intercom};l.prototype.page=function(e){var t=e.options(this.name);this.bootOrUpdate({},t)};l.prototype.identify=function(e){var t=e.traits({userId:"user_id"});var r=e.options(this.name);var i=e.companyCreated();var s=e.created();var c=e.name();var p=e.userId();var f=this.analytics.group();var l=this.options;if(!p&&!e.email())return;null===t.company||u.object(t.company)||delete t.company;t.company&&a(t.company,f.traits());c&&(t.name=c);if(s){o(t,"created");o(t,"createdAt");t.created_at=s}if(i){o(t.company,"created");o(t.company,"createdAt");t.company.created_at=i}t=n(t,h);t=v(t,l);r.userHash&&(t.user_hash=r.userHash);r.user_hash&&(t.user_hash=r.user_hash);this.bootOrUpdate(t,r)};l.prototype.group=function(e){var t=this.options;var r=e.traits({createdAt:"created",created:"created_at",monthlySpend:"monthly_spend"});r=n(r,h);var a=e.groupId();a&&(r.id=a);var o=e.options(this.name);r=v(r,t);var i=s({company:r},m(o));d("update",i)};l.prototype.track=function(e){var t=this.options;var r=e.properties();var n=e.revenue();if(n)var a={price:{amount:100*n,currency:e.currency()}};r=v(r,t);r=s(r,a);o(r,"revenue");o(r,"currency");d("trackEvent",e.event(),r)};l.prototype.bootOrUpdate=function(e,t){e=e||{};var r=true===this.booted?"update":"boot";var n=this.options.activator;e.app_id=this.options.appId;"#IntercomDefaultWidget"!==n&&(e.widget={activator:n});e=s(e,m(t));d(r,e);this.booted=true};function h(e){return Math.floor(e/1e3)}function v(e,t){var r=t.richLinkProperties;var n=["companies","company","created_at","created","custom_attributes","company_id","id","name","monthly_spend","plan","remote_created_at","remove","user_id","email"];var a=n.concat(r);var i=c(e);p(function(e){o(i,e)},a);var l=f(a,e);var h={};p(function(e,t){u.object(e)||u.array(e)||(h[t]=e)},i);return s(h,l)}function d(){window.Intercom.apply(window.Intercom,arguments)}function m(e){var t={};var r=e.hideDefaultLauncher;if(void 0===r||"boolean"!==typeof r)return t;t.hide_default_launcher=r;return t}},1632:function(e,t,r){"use strict";var n=r(1633);var a=r(758);var o=r(173).del;var i=r(221);var u=r(422);var s=r(1635);var c=r(421);var p=r(92);var f=r(1636);var l=e.exports=u("Mixpanel").global("mixpanel").option("eventIncrements",[]).option("propIncrements",[]).option("peopleProperties",[]).option("superProperties",[]).option("cookieName","").option("crossSubdomainCookie",false).option("secureCookie",false).option("persistence","cookie").option("nameTag",true).option("pageview",false).option("people",false).option("token","").option("setAllTraitsByDefault",true).option("consolidatedPageCalls",true).option("trackAllPages",false).option("trackNamedPages",false).option("trackCategorizedPages",false).tag('<script src="//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js">');var h={cookieName:"cookie_name",crossSubdomainCookie:"cross_subdomain_cookie",secureCookie:"secure_cookie"};l.prototype.initialize=function(){(function(e,t){if(!t.__SV){var r=window;try{var n,a,o,i=r.location,u=i.hash;n=function(e,t){return(a=e.match(RegExp(t+"=([^&]*)")))?a[1]:null};u&&n(u,"state")&&(o=JSON.parse(decodeURIComponent(n(u,"state"))),"mpeditor"===o.action&&(r.sessionStorage.setItem("_mpcehash",u),history.replaceState(o.desiredHash||"",e.title,i.pathname+i.search)))}catch(e){}var s,c;window.mixpanel=t;t._i=[];t.init=function(e,r,n){function a(e,t){var r=t.split(".");2==r.length&&(e=e[r[0]],t=r[1]);e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var o=t;"undefined"!==typeof n?o=t[n]=[]:n="mixpanel";o.people=o.people||[];o.toString=function(e){var t="mixpanel";"mixpanel"!==n&&(t+="."+n);e||(t+=" (stub)");return t};o.people.toString=function(){return o.toString(1)+".people (stub)"};s="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(c=0;c<s.length;c++)a(o,s[c]);t._i.push([e,r,n])};t.__SV=1.2}})(document,window.mixpanel||[]);this.options.eventIncrements=d(this.options.eventIncrements);this.options.propIncrements=d(this.options.propIncrements);var e=n(this.options,h);e.loaded=function(e){e.register({mp_lib:"Segment: web"})};window.mixpanel.init(e.token,e);this.load(this.ready)};l.prototype.loaded=function(){return!!(window.mixpanel&&window.mixpanel.config)};l.prototype.page=function(e){var t=e.category();var r=e.name();var n=this.options;if(n.consolidatedPageCalls){this.track(e.track());return}if(n.trackAllPages){this.track(e.track());return}if(n.trackCategorizedPages&&t){if(r){this.track(e.track(e.fullName()));return}this.track(e.track(t));return}r&&n.trackNamedPages&&this.track(e.track(r))};var v={created:"$created",email:"$email",firstName:"$first_name",lastName:"$last_name",lastSeen:"$last_seen",name:"$name",username:"$username",phone:"$phone"};l.prototype.identify=function(e){var t=e.username();var r=e.email();var n=e.userId();var i=this.options.setAllTraitsByDefault;var u=this.options.people;var f=y(this.options.peopleProperties);var l=this.options.superProperties;n&&window.mixpanel.identify(n);var h=r||t||n;h&&window.mixpanel.name_tag(h);var d=e.traits(v);d.$created&&o(d,"createdAt");d=a(d,s);var g={};var w={};for(var b in d){if(!d.hasOwnProperty(b))continue;var x=d[b];if(Array.isArray(x)&&x.length>0){g[b]=x;var P=window.mixpanel.get_property(b);P&&Array.isArray(P)&&(d[b]=k(P,x))}else w[b]=x}if(i){window.mixpanel.register(d);if(u){window.mixpanel.people.set(w);window.mixpanel.people.union(g)}}else{var R=m(l);var O=c(R||[],d);p.empty(O)||window.mixpanel.register(O);if(u){var _=m(f);var S=c(_||[],w);var j=c(_||[],g);p.empty(S)||window.mixpanel.people.set(S);p.empty(j)||window.mixpanel.people.union(j)}}};l.prototype.track=function(e){var t=this.options.eventIncrements||this.options.increments;var r=this.options.propIncrements;var n=e.event().toLowerCase();var o=this.options.people;var u=e.properties();var f=e.revenue();var l=c(this.options.superProperties,u);delete u.distinct_id;delete u.ip;delete u.mp_name_tag;delete u.mp_note;delete u.token;u=a(u,s);g(u);if(o){if(i(n,t)){window.mixpanel.people.increment(e.event());window.mixpanel.people.set("Last "+e.event(),new Date)}for(var h in u){if(!Object.prototype.hasOwnProperty.call(u,h))continue;var v=u[h];i(h.toLowerCase(),r)&&window.mixpanel.people.increment(h,v)}f&&window.mixpanel.people.track_charge(f)}var d;if(u.link_query){d=u.link_query;delete u.link_query;window.mixpanel.track_links(d,e.event(),u)}else if(u.form_query){d=u.form_query;delete u.form_query;window.mixpanel.track_forms(d,e.event(),u)}else window.mixpanel.track(e.event(),u);p.empty(l)||window.mixpanel.register(l)};l.prototype.alias=function(e){var t=window.mixpanel;var r=e.to();if(t.get_distinct_id&&t.get_distinct_id()===r)return;if(t.get_property&&t.get_property("$people_distinct_id")===r)return;t.alias(r,e.from())};function d(e){var t=new Array(e.length);for(var r=0;r<e.length;++r)t[r]=String(e[r]).toLowerCase();return t}function m(e){var t=new Array(e.length);for(var r=0;r<e.length;++r)v.hasOwnProperty(e[r])?t.push(v[e[r]]):t.push(e[r]);return t}function y(e){var t=[];for(var r in v)v.hasOwnProperty(r)&&t.push(r);for(var n=0;n<t.length;++n)f(e,t[n])<0&&e.push(t[n]);return e}function g(e){for(var t in e){var r=e[t];if(!e.hasOwnProperty(t)||!Array.isArray(r))continue;var n=w(t,r);if(0!==Object.keys(n).length){b(e,n);delete e[t]}}}function w(e,t){var r={};for(var n=0;n<t.length;n++){var a=t[n];if("object"!==typeof a)return{};for(var o in a){if(!a.hasOwnProperty(o))continue;var i=e+"_"+o+"s";i in r?r[i].push(a[o]):r[i]=[a[o]]}}return r}function b(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];e[r]=r in e?e[r].concat(n):n}}function k(e,t){var r={};var n;for(n=0;n<e.length;n++)r[e[n]]=e[n];for(n=0;n<t.length;n++)r[t[n]]=t[n];return Object.keys(r)}},1637:function(e,t,r){"use strict";var n=r(422);var a=r(92);var o=r(219);var i=e.exports=n("Sentry").global("Raven").global("RavenConfig").option("config","").option("serverName",null).option("release",null).option("ignoreErrors",[]).option("ignoreUrls",[]).option("whitelistUrls",[]).option("includePaths",[]).option("maxMessageLength",null).option("logger",null).option("customVersionProperty",null).tag('<script src="https://cdn.ravenjs.com/3.24.1/raven.min.js" crossorigin="anonymous">');i.prototype.initialize=function(){var e=this.options.config;var t=this.options.customVersionProperty?window[this.options.customVersionProperty]:null;var r={logger:this.options.logger,release:t||this.options.release,serverName:this.options.serverName,whitelistUrls:this.options.whitelistUrls,ignoreErrors:this.options.ignoreErrors,ignoreUrls:this.options.ignoreUrls,includePaths:this.options.includePaths,maxMessageLength:this.options.maxMessageLength};window.RavenConfig={dsn:e,config:u(r)};this.load(this.ready)};i.prototype.loaded=function(){return a.object(window.Raven)};i.prototype.identify=function(e){window.Raven.setUserContext(e.traits())};function u(e){return o(function(e,t,r){null===t||""===t||a.array(t)||(e[r]=t);if(a.array(t)){var n=[];for(var o=0;o<t.length;o++)null!==t[o]&&""!==t[o]&&n.push(t[o]);a.empty(n)||(e[r]=n)}return e},{},e)}},1638:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e){var t={Intercom:{appId:e.intercom.app_id}};e.mixpanel.token&&(t.Mixpanel={consolidatedPageCalls:false,pageview:false,trackAllPages:false,trackNamedPages:false,trackCategorizedPages:false,people:true,token:e.mixpanel.token});e.sentry.url&&(t.Sentry={config:e.sentry.url,release:e.version,environment:e.domains.spaces?"production":"development"});e.hotjar.site_id&&(t.Hotjar={hjid:e.hotjar.site_id,hjsv:6,recordVisitors:false});return t}t.default=n},1639:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){a(this,e)}e.prototype.destroy=function(){var e=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve());case 1:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}();return e}();t.default=o},1640:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1641);var a=c(n);var o=r(1932);var i=c(o);var u=r(1933);var s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var p={authUser:a.default,database:i.default,graphQL:s.default};t.default=p},1641:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var a=d(n);var o=r(69);var i=v(o);var u=r(5);var s=r(425);var c=r(57);var p=v(c);var f=r(1);var l=r(434);var h=v(l);function v(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function b(){var e=this;return function(t){var r,n,o,c,l,v;var d=(r=(0,u.connect)(function(e){var t=e.user;return{user:t}}),n=(0,s.connect)(function(e,t){return!t&&!e.user.live},function(){var t=w(regeneratorRuntime.mark(function t(r){var n=r.dispatch,a=r.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return n(h.default.user.signInWithAuthToken(a,{forceSync:true}));case 2:t.next=4;return n(h.default.user.listen());case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),function(e,t){var r=t.dispatch;return r(h.default.user.unlisten())}),o=f.Skeleton.createSkeletonProvider(function(e){var t=e.user;if(!t.isLoggedIn)return false;return!t.live}),r(c=n(c=o(c=(v=l=function(e){g(r,e);function r(){m(this,r);return y(this,e.apply(this,arguments))}r.prototype.render=function e(){return a.createElement(t,this.props)};return r}(a.Component),l.displayName="connectAuthUser("+(0,p.default)(t)+")",v))||c)||c)||c);return(0,i.default)(d,t)}}t.default=b},1921:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n="database/updated";function a(e){return function(t,r,n){var a=n.database.observe(e),o=a.pending,i=a.observerID;if(!o)return i;return o.then(function(){return i})}}function o(e){return function(t,r,n){n.database.stopObserving(e)}}function i(e){return{type:n,database:e}}function u(e,t){switch(t.type){case n:return t.database;default:return e}}t.default={reducer:u,updateDatabase:i,observe:a,stopObserving:o}},1922:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(90);var a=i(n);var o=r(3);function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}var s="user/updated";function c(e){return{type:s,user:e}}function p(){return function(e,t,r){var n=r.auth;return n.listen()}}function f(){return function(e,t,r){var n=r.auth;n.unlisten()}}function l(e,t){switch(t.type){case s:return t.user;default:return e}}function h(e,t){var r=this;return function(){var n=u(regeneratorRuntime.mark(function n(a,o,i){var u=i.auth;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return u.signIn(e,t);case 2:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function v(e,t,r){var n=this;return function(){var a=u(regeneratorRuntime.mark(function a(o,i,u){var s=u.auth,c=u.analytics;return regeneratorRuntime.wrap(function n(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return s.signUp(e,t,r);case 2:case"end":return a.stop()}},a,n)}));return function(e,t,r){return a.apply(this,arguments)}}()}function d(){return function(e,t,r){var n=r.auth;var o=t(),i=o.user;window.location="/?"+a.default.stringify({id_token:i.idToken,auth_action:"signout"})}}function m(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.updateEmail(e);case 2:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function y(){var e=this;return function(){var t=u(regeneratorRuntime.mark(function t(r,n,a){var o=a.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.verifyEmail();case 2:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}function g(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.updatePassword(e);case 2:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function w(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.updateProfile(e);case 2:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function b(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;var u,s;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:u=a(),s=u.user;r.next=3;return i.uploadPhoto(s,e);case 3:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function k(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.signInWithAuthToken(e);case 2:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function x(){var e=this;return function(){var t=u(regeneratorRuntime.mark(function t(r,n,a){var o=a.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.signInWithGoogle();case 2:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}function P(){var e=this;return function(){var t=u(regeneratorRuntime.mark(function t(r,n,a){var o=a.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.signInWithGitHub();case 2:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}function R(e,t){var r=this;return function(){var n=u(regeneratorRuntime.mark(function n(a,o,i){var u=i.auth;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",u.reauthenticate(e,t));case 1:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function O(){var e=this;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(){var t=u(regeneratorRuntime.mark(function t(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",i.reauthenticateWithGoogle.apply(i,r));case 1:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}function _(){var e=this;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(){var t=u(regeneratorRuntime.mark(function t(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",i.reauthenticateWithGithub.apply(i,r));case 1:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}function S(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.resetPassword(e);case 2:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function j(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.verifyPasswordResetCode(e);case 2:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function E(e,t){var r=this;return function(){var n=u(regeneratorRuntime.mark(function n(a,o,i){var u=i.auth;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return u.confirmPasswordReset(e,t);case 2:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function D(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.checkActionCode(e);case 2:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function I(e){var t=this;return function(){var r=u(regeneratorRuntime.mark(function r(n,a,o){var i=o.auth;return regeneratorRuntime.wrap(function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return i.applyActionCode(e);case 2:case"end":return r.stop()}},r,t)}));return function(e,t,n){return r.apply(this,arguments)}}()}function C(){var e=this;return function(){var t=u(regeneratorRuntime.mark(function t(r,n,a){var o=a.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.linkWithGoogle();case 2:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}function U(){var e=this;return function(){var t=u(regeneratorRuntime.mark(function t(r,n,a){var o=a.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.linkWithGithub();case 2:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}function T(){var e=this;return function(){var t=u(regeneratorRuntime.mark(function t(r,n,a){var o=a.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.unlinkGoogle();case 2:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}function M(){var e=this;return function(){var t=u(regeneratorRuntime.mark(function t(r,n,a){var o=a.auth;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.unlinkGithub();case 2:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}()}t.default={reducer:l,updateUser:c,listen:p,unlisten:f,signIn:h,signUp:v,signInWithAuthToken:k,signInWithGoogle:x,signInWithGitHub:P,updateEmail:m,updatePassword:g,updateProfile:w,uploadPhoto:b,verifyEmail:y,signOut:d,reauthenticate:R,reauthenticateWithGoogle:O,reauthenticateWithGithub:_,resetPassword:S,verifyPasswordResetCode:j,confirmPasswordReset:E,checkActionCode:D,applyActionCode:I,linkWithGoogle:C,linkWithGithub:U,unlinkGithub:M,unlinkGoogle:T}},1923:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t){return e}t.default={reducer:n}},1924:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e){return function(t,r,n){var a=n.embed;return a.fetch(e)}}t.default={fetch:n}},1925:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(107);var a=u(n);var o=r(295);var i=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return i.default.parse(e).pathname||""}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(r,n,o){var i=o.auth,u=o.config;var c=n(),p=c.user;if(!p.isLoggedIn)return;var f=(0,a.default)(e,s(t));window.location=f+"?id_token="+encodeURIComponent(p.idToken)}}function p(e){var t=e.org,r=e.pathname,n=void 0===r?"":r;var o="/@"+t.baseDomain+"/";var i=(0,a.default)(o,s(n));return l(i)}function f(e){var t=e.org,r=e.space,n=e.pathname,a=void 0===n?"":n;return function(e,n,o){var i=o.auth,u=o.config;var s=n(),p=s.user;if(!p.isLoggedIn)return;var f=r.getURL(t,u.domains.spaces);return e(c(f,a))}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return function(t,r,n){var a=n.auth,o=n.config;var i=r(),u=i.user;if(!u.isLoggedIn)return;return t(c(o.urls.website,e))}}t.default={redirectToSpace:f,redirectToOrg:p,redirectToWebsite:l}},1928:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r(3);var o=r(96);function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function u(e,t){return function(r,n,a){var o=a.database;return o.updateDocument(e.query(),{name:t})}}function s(e,t){return function(r,n,a){var o=a.database;return o.updateDocument(e.query(),{colorPrimary:t})}}function c(e,t){return function(r,n,a){var o=a.database;return o.commit(e.merge({links:t}).toLinksUpdate())}}function p(e,t,r){var n=this;return function(){var a=i(regeneratorRuntime.mark(function a(o,i,u){var s=u.database,c=u.analytics;return regeneratorRuntime.wrap(function n(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return s.commit(t.toCustomDomainUpdate(r));case 2:c.trackSetupCustomDomain(e,t);case 3:case"end":return a.stop()}},a,n)}));return function(e,t,r){return a.apply(this,arguments)}}()}function f(e,t){return function(r,n,a){var o=a.database;return o.commit(e.toBaseNameUpdate(t))}}function l(e,t){return function(r,n,a){var i=a.database,u=a.storage,s=a.auth;var c=o.StoragePaths.spaceUpload({spaceID:e.uid,filename:t.name});return u.uploadFile(c,t,{user:s.getCurrentUser()}).then(function(t){return i.updateDocument(e.query(),{logoURL:t.downloadURL})})}}function h(e,t){var r=t.githubConfig,n=t.editOnGitHub;return function(t,a,o){var i=o.database;var u=a(),s=u.user;var c=r.merge({createdBy:s.uid});return i.commit(c.toCreateUpdate(e.uid,n))}}function v(e,t){return function(r,n,a){var o=a.database;return o.commit(t.toRemoveUpdate(e.uid))}}function d(e,t,r){return function(n,a,o){var i=o.database;return i.commit(t.merge({importBranchesFilter:r}).toUpdate(e.uid))}}function m(e){return function(t,r,n){var a=n.database;return a.commit(e.toDeleteUpdate())}}function y(e,t){return function(r,n,a){var o=a.database;return o.updateDocument(e.query(),{googleAnalyticsID:t||null})}}function g(e,t){return function(r,n,a){var o=a.database;return o.commit(e.setVisibility(t).toVisibilityUpdate())}}function w(e){var t=e.org,r=e.spaceID,n=e.value,a=e.team;return function(e,o,i){var u;var s=i.database;if(a){var c;return s.updateDocument(a.query(t.uid),{spacesPermission:(n?a.spacesPermission.delete(r):a.spacesPermission.merge((c={},c[r]=false,c))).toJS()})}return s.updateDocument(t.query(),{spacesPermission:(n?t.spacesPermission.delete(r):t.spacesPermission.merge((u={},u[r]=false,u))).toJS()})}}t.default={updateName:u,updateColorPrimary:s,updateLinks:c,updateCustomDomain:p,updateBaseName:f,uploadLogo:l,configureGitHubSync:h,unlinkGitHubSync:v,updateGitHubImportBranchFilters:d,deleteSpace:m,updateGoogleAnalyticsID:y,updateVisibility:g,updateSpacePermissions:w}},1929:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(3);function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function o(e,t,r){var n=this;return function(){var o=a(regeneratorRuntime.mark(function a(o,i,u){var s=u.database,c=u.analytics;return regeneratorRuntime.wrap(function n(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return s.setDocument(r.query(),r);case 2:r.isUpgrade(t)?c.trackUpgrade(e,t.plan,r.plan):r.isDowngrade(t)&&c.trackDowngrade(e,t.plan,r.plan);case 3:case"end":return a.stop()}},a,n)}));return function(e,t,r){return o.apply(this,arguments)}}()}function i(e,t){var r=this;return function(){var o=a(regeneratorRuntime.mark(function a(o,i,u){var s=u.database;var c,p;return regeneratorRuntime.wrap(function r(a){while(1)switch(a.prev=a.next){case 0:c=i(),p=c.user;a.next=3;return Promise.all(e.githubBooks.toArray().map(function(e){var r=n.GitHubConfig.create({token:t,repoID:e.repoID,createdBy:p.uid});return s.commit(r.toCreateUpdate(e.spaceID))}));case 3:a.next=5;return s.commit(e.merge({githubSync:true}).toSyncUpdate());case 5:case"end":return a.stop()}},a,r)}));return function(e,t,r){return o.apply(this,arguments)}}()}function u(e,t){var r=this;return function(){var n=a(regeneratorRuntime.mark(function n(a,o,i){var u=i.database;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return u.commit(t.toUpdate(e.uid));case 2:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function s(e,t){var r=this;return function(){var n=a(regeneratorRuntime.mark(function n(a,o,i){var u=i.database;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return u.commit(t.toRemoveUpdate(e.uid));case 2:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function c(e,t){var r=this;return function(){var n=a(regeneratorRuntime.mark(function n(a,o,i){var u=i.database,s=i.analytics;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return u.commit(t.merge({confirmed:true}).toSyncUpdate());case 2:s.trackConfirmMigration(e);case 3:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function p(e,t){var r=this;return function(){var n=a(regeneratorRuntime.mark(function n(a,o,i){var u=i.database,s=i.analytics;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return u.commit(t.merge({confirmed:false}).toSyncUpdate());case 2:s.trackRollbackMigration(e);case 3:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}function f(e,t){var r=this;return function(){var n=a(regeneratorRuntime.mark(function n(a,o,i){var u=i.database;return regeneratorRuntime.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return u.commit(e.updateBook(t.markAsPending()).toSyncUpdate());case 2:case"end":return n.stop()}},n,r)}));return function(e,t,r){return n.apply(this,arguments)}}()}t.default={updateBillingConfig:o,updateSAMLIdP:u,disableSAML:s,migrateGitHubSync:i,confirmMigration:c,rollbackMigration:p,migrateBook:f}},1930:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(){return function(e,t,r){var n=r.analytics;return n.page()}}function a(e){return function(t,r,n){var a=n.analytics;return a.group(e)}}t.default={trackPage:n,trackGroup:a}},1931:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r(6);var n=r(3);function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o);var u=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function o(e,t,r){var o=this;return function(){var i=a(regeneratorRuntime.mark(function a(i,u,s){var c=s.analytics,p=s.database;var f,l,h;return regeneratorRuntime.wrap(function a(o){while(1)switch(o.prev=o.next){case 0:f=u(),l=f.user;h=t.teamID&&r?r.updateFromTeamInvite(t):n.Membership.createForInvite(l.uid,t);o.next=4;return p.commit(h.toUpdate(e.uid));case 4:c.trackJoinOrg({org:e,role:h.role,isTeam:t.isTeam});case 5:case"end":return o.stop()}},a,o)}));return function(e,t,r){return i.apply(this,arguments)}}()}function i(e,t,r){return function(a,o,i){var u=n.Invite.getNewInvitesUpdate(e.uid,r&&r.uid);t.forEach(function(t){u.delete(t.query(e.uid))});return i.database.commit(u)}}t.default={useInvite:o,revokeInvites:i}},1932:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(0);var o=m(a);var i=r(69);var u=d(i);var s=r(5);var c=r(425);var p=r(57);var f=d(p);var l=r(1);var h=r(434);var v=d(h);function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function y(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t){return e.cacheKey==t.cacheKey}function x(e,t){var r=Object.keys(e);var n=Object.keys(t);return r.some(function(r){return!t[r]||!k(e[r].query,t[r].query)})||n.some(function(r){return!e[r]||!k(e[r].query,t[r].query)})}function P(e){return(0,s.connect)(function(t,r){var n=t.database;var a=e(r);var o={};Object.keys(a).forEach(function(e){var t=a[e];if(!t)return;var r=n.hasObserver(t);var i=n.isFetched(t);o[e]={query:t,isFetched:i,hasObserver:r,error:n.getError(t),value:t.isDocumentQuery()?n.getDocument(t):n.getCollection(t)}});return{queries:o}})}function R(e){return(0,c.connect)(function(e,t){return!t||x(e.queries,t.queries)||e.hasParentLoading!=t.hasParentLoading},function(e){var t=e.dispatch,r=e.queries;if(e.hasParentLoading)return[];var n=[];var a=[];Object.keys(r).forEach(function(e){var o=r[e].query;var i=t(v.default.database.observe(o));i instanceof Promise?n.push(i):a.push(i)});return n.length>0?Promise.all(n).then(function(e){return a.concat(e)}):a},function(e,t){var r=t.dispatch;e.forEach(function(e){r(v.default.database.stopObserving(e))})})}function O(e){return l.Skeleton.createSkeletonProvider(function(e){var t=e.queries;var r=Object.keys(t).some(function(e){var r=t[e];return!r.query.options.background&&r.query.options.placeholder&&!r.isFetched});return r})}function _(e){return function(t){var r,a,i,s,c,p,h;var v=(r=l.Skeleton.connectToSkeleton(function(e){var t=e.isLoading;return{hasParentLoading:t}}),a=P(e),i=R(e),s=O(e),r(c=a(c=i(c=s(c=(h=p=function(e){b(r,e);function r(){g(this,r);return w(this,e.apply(this,arguments))}r.prototype.render=function e(){var r=this.props,a=r.queries,i=y(r,["queries"]);var u={};var s=true;Object.keys(a).forEach(function(e){var t=a[e].query.options,r=t.optimistic,n=t.waitFetched,o=t.background;var i=r?a[e].isFetched:a[e].isFetched&&a[e].hasObserver;u[e]=a[e].value;u[e+"Fetched"]=i;u[e+"Error"]=a[e].error;o||i||!n||(s=false)});if(!s)return null;return o.createElement(t,n({},u,i))};return r}(o.Component),p.displayName="connectToDatabase("+(0,f.default)(t)+")",h))||c)||c)||c)||c);return(0,u.default)(v,t)}}t.default=_},1933:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(0);var o=d(a);var i=r(6);var u=r(69);var s=v(u);var c=r(57);var p=v(c);var f=r(1934);var l=v(f);var h=r(1);function v(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t){return e.url==t.url&&e.query==t.query&&(0,i.Map)(e.variables||{}).equals((0,i.Map)(t.variables||{}))}var b=function e(t){return t.isFetched?t:null};function k(e){return function(t){var r,a,i;var u=(a=r=function(r){g(a,r);function a(t){m(this,a);var o=y(this,r.call(this,t));i.call(o);o.pending={};var u=e(t);o.state=Object.keys(u).reduce(function(e,t,r){var a;return n({},e,(a={},a[t]={query:u[t],isFetched:false,errors:[],data:{}},a))},{});return o}a.prototype.componentDidMount=function e(){this.fetchQueries(this.props)};a.prototype.componentWillReceiveProps=function e(t){this.fetchQueries(t)};a.prototype.componentWillUnmount=function e(){var t=this;Object.keys(this.pending).forEach(function(e){return t.pending[e].cancel()})};a.prototype.render=function e(){var r=this;var a={isGraphQLLoading:false};var i=true;Object.keys(this.state).forEach(function(e){var t=r.state[e];a[e]=(t.query.mapState||b)(t);t.query.background||(a.isGraphQLLoading=a.isGraphQLLoading||!t.isFetched);void 0===a[e]&&(i=false)});if(!i)return null;return o.createElement(t,n({},a,this.props))};return a}(o.Component),r.displayName="connectToGraphQL("+(0,p.default)(t)+")",i=function t(){var r=this;this.state={};this.fetchQueries=function(t){if(t.hasParentLoading)return;var a=r.state;var o=e(t);Object.keys(o).forEach(function(e){var t=o[e];var n=a[e];if(n&&w(n.query,t)&&(r.pending[e]||n.isFetched))return;r.fetchQuery(e,t)});Object.keys(a).forEach(function(e){o[e]||r.setState(function(t){var r=n({},t);delete r[e];return r})})};this.fetchQuery=function(e,t){r.setState(function(r){var n;return n={},n[e]={query:t,data:{},isFetched:false,errors:[]},n});r.pending[e]=new l.default(function(e){e(fetch(t.url,{method:"post",headers:n({},t.headers||{},{"Content-Type":"application/json"}),body:JSON.stringify({query:t.query,operationName:t.operationName,variables:t.variables})}))}).then(function(e){return e.json()}).then(function(n){var a=n.data,o=n.errors;delete r.pending[e];r.setState(function(r){var n;return n={},n[e]={query:t,data:a,errors:o,isFetched:true},n})},function(n){delete r.pending[e];r.setState(function(r){var a;return a={},a[e]={query:t,data:r[e]?r[e].data:{},isFetched:true,errors:[{message:n.message}]},a})})}},a);return u}}function x(e){var t=h.Skeleton.connectToSkeleton(function(e){var t=e.isLoading;return{hasParentLoading:t}});var r=k(e);var n=h.Skeleton.createSkeletonProvider(function(e){return e.isGraphQLLoading});return function(e){var a=t(r(n(e)));return(0,s.default)(a,e)}}t.default=x},1934:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(t,r,n,a){try{t(n(a))}catch(e){r(e)}};var i=function(){n(e,null,[{key:"all",value:function t(r){return new e(function(e,t){Promise.all(r).then(e,t)})}},{key:"race",value:function t(r){return new e(function(e,t){Promise.race(r).then(e,t)})}},{key:"reject",value:function t(r){return new e(function(e,t){Promise.reject(r).then(e,t)})}},{key:"resolve",value:function t(r){return new e(function(e,t){Promise.resolve(r).then(e,t)})}}]);function e(t){a(this,e);this._promise=new Promise(t);this._canceled=false}n(e,[{key:"then",value:function t(r,n){var a=this;var i=new e(function(e,t){a._promise.then(function(n){a._canceled&&i.cancel();r&&!a._canceled?o(e,t,r,n):e(n)},function(r){a._canceled&&i.cancel();n&&!a._canceled?o(e,t,n,r):t(r)})});return i}},{key:"catch",value:function e(t){return this.then(void 0,t)}},{key:"cancel",value:function e(){this._canceled=true;return this}}]);return e}();t.default=i},1936:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryResults=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(6);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){u(t,e);function t(){o(this,t);return i(this,e.apply(this,arguments))}n(t,[{key:"all",get:function e(){var t=this.pages,r=this.sections,n=this.users;return r.concat(t,n)}}]);return t}((0,a.Record)({lastUpdated:new Date,users:(0,a.List)(),pages:(0,a.List)(),sections:(0,a.List)()}));var c=6e4;var p=function(e){u(t,e);function t(){o(this,t);return i(this,e.apply(this,arguments))}t.deserialize=function e(r){return new t({})};t.prototype.serialize=function e(){return{}};t.prototype.isOutdated=function e(t){var r=this.queries;var n=r.get(t);if(!n||Date.now()-n.lastUpdated>c)return true;return false};t.prototype.getResults=function e(t){return this.queries.get(t)||null};t.prototype.setResults=function e(t,r,n){var a;var o=this.queries;var i=o.get(t,new s);i=i.merge((a={lastUpdated:new Date},a[r]=n,a));return this.merge({queries:o.set(t,i)})};return t}((0,a.Record)({queries:(0,a.Map)()}));t.default=p;t.QueryResults=s},1939:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u={active:false};var s=function(e){i(t,e);function t(){a(this,t);return o(this,e.apply(this,arguments))}t.prototype.toggleDiff=function e(t){return this.merge({active:t})};return t}((0,n.Record)(u));t.default=s},1940:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){i(t,e);function t(){a(this,t);return o(this,e.apply(this,arguments))}t.prototype.selectCodeTab=function e(t,r){return this.merge({activeKeys:this.activeKeys.set(t.key,r.key),activeSyntax:r.data.get("syntax")})};t.prototype.getSelectedTabFor=function e(t,r,n){var a=n.readOnly;var o=this.activeKeys,i=this.activeSyntax;var u=o.get(r.key);return(a?null:r.nodes.find(function(e){return t.selection.hasAnchorIn(e)||t.selection.hasFocusIn(e)}))||(u?r.nodes.find(function(e){return e.key==u}):null)||(i?r.nodes.find(function(e){return e.data.get("syntax")==i}):null)||r.nodes.first()};t.prototype.isTabSelected=function e(t,r,n){var a=n.readOnly;var o=t.document;var i=o.getParent(r.key);if(!i)return false;return this.getSelectedTabFor(t,i,{readOnly:a}).key==r.key};return t}((0,n.Record)({activeKeys:(0,n.Map)(),activeSyntax:null}));t.default=u},1943:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=i(n);var o=r(1944);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.Map;var r=Object.keys(e);return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t();var a=arguments[1];var i;false;return n.withMutations(function(t){r.forEach(function(r){var n=e[r];var i=t.get(r);var u=n(i,a);(0,o.validateNextState)(u,r,a);t.set(r,u)})})}};e.exports=t["default"]},1944:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.validateNextState=t.getUnexpectedInvocationParameterMessage=t.getStateName=void 0;var n=r(809);var a=c(n);var o=r(1945);var i=c(o);var u=r(1946);var s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}t.getStateName=a.default;t.getUnexpectedInvocationParameterMessage=i.default;t.validateNextState=s.default},1945:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=u(n);var o=r(809);var i=u(o);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){var n=Object.keys(t);if(!n.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";var o=(0,i.default)(r);if(!a.default.Iterable.isIterable(e))return"The "+o+' is of unexpected type. Expected argument to be an instance of Immutable.Iterable with the following properties: "'+n.join('", "')+'".';var u=e.keySeq().toArray().filter(function(e){return!t.hasOwnProperty(e)});if(u.length>0)return"Unexpected "+(1===u.length?"property":"properties")+' "'+u.join('", "')+'" found in '+o+'. Expected to find one of the known reducer property names instead: "'+n.join('", "')+'". Unexpected properties will be ignored.';return null};e.exports=t["default"]},1946:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t,r){if(void 0===e)throw new Error('Reducer "'+t+'" returned undefined when handling "'+r.type+'" action. To ignore an action, you must explicitly return the previous state.')};e.exports=t["default"]},1950:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(71);var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){switch(t.type){case a.default.DIFF_TOGGLE:return e.toggleDiff(t.diffActive);default:return e}}t.default=i},1951:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(71);var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){switch(t.type){case a.default.CODEBLOCKS_TAB_SELECT:return e.selectCodeTab(t.codeBlock,t.tab);default:return e}}t.default=i},1952:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(71);var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){switch(t.type){case a.default.SIDEBAR_OPEN:return true;case a.default.SIDEBAR_CLOSE:return false;default:return e}}t.default=i},219:function(e,t,r){"use strict";var n=r(68);var a=function e(t,r,a){if("function"!==typeof t)throw new TypeError("Expected a function but received a "+typeof t);n(function(e,n,a){r=t(r,e,n,a)},a);return r};e.exports=a},408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AssetStore=t.DocumentStore=t.GenericBlobStorage=t.StoragePaths=t.CDN=void 0;var n=r(727);var a=v(n);var o=r(1561);var i=v(o);var u=r(1562);var s=v(u);var c=r(728);var p=h(c);var f=r(409);var l=v(f);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return e&&e.__esModule?e:{default:e}}t.CDN=p;t.StoragePaths=l.default;t.GenericBlobStorage=a.default;t.DocumentStore=s.default;t.AssetStore=i.default},418:function(e,t){var r=[].slice;e.exports=function(e,t){"string"==typeof t&&(t=e[t]);if("function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},422:function(e,t,r){"use strict";var n=r(418);var a=r(98);var o=r(44);var i=r(108);var u=r(287);var s=r(750);var c=r(1629);var p=r(1631);function f(e){function t(r){if(r&&r.addIntegration)return r.addIntegration(t);this.debug=o("analytics:integration:"+s(e));this.options=i(a(r)||{},this.defaults);this._queue=[];this.once("ready",n(this,this.flush));t.emit("construct",this);this.ready=n(this,this.ready);this._wrapInitialize();this._wrapPage();this._wrapTrack()}t.prototype.defaults={};t.prototype.globals=[];t.prototype.templates={};t.prototype.name=e;u(t,p);u(t.prototype,c);return t}e.exports=f},434:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1921);var a=k(n);var o=r(1922);var i=k(o);var u=r(1923);var s=k(u);var c=r(1924);var p=k(c);var f=r(1925);var l=k(f);var h=r(1928);var v=k(h);var d=r(1929);var m=k(d);var y=r(1930);var g=k(y);var w=r(1931);var b=k(w);function k(e){return e&&e.__esModule?e:{default:e}}t.default={auth:l.default,database:a.default,user:i.default,config:s.default,embed:p.default,space:v.default,organization:m.default,analytics:g.default,invites:b.default}},68:function(e,t,r){"use strict";var n=r(745);var a=Object.prototype.toString;var o=function e(t){var r=typeof t;return"number"===r||"object"===r&&"[object Number]"===a.call(t)};var i="function"===typeof Array.isArray?Array.isArray:function e(t){return"[object Array]"===a.call(t)};var u=function e(t){return null!=t&&(i(t)||"function"!==t&&o(t.length))};var s=function e(t,r){for(var n=0;n<r.length;n+=1)if(false===t(r[n],n,r))break};var c=function e(t,r){var a=n(r);for(var o=0;o<a.length;o+=1)if(false===t(r[a[o]],a[o],r))break};var p=function e(t,r){return(u(r)?s:c).call(this,t,r)};e.exports=p},731:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(3);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){o(this,e);this.showIntercomLauncher=false}e.prototype.toggleIntercomLauncher=function e(t){this.showIntercomLauncher=t};e.prototype.identify=function e(t){};e.prototype.alias=function e(t){};e.prototype.group=function e(t){};e.prototype.page=function e(){};e.prototype.track=function e(t){};e.prototype.trackOrgEvent=function e(t,r){};e.prototype.trackSignIn=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"password";return this.track({type:"Sign-in",Provider:t})};e.prototype.trackSignUp=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"password";return this.track({type:"Sign-up",Provider:t})};e.prototype.trackVerifyPhone=function e(t){return this.track({type:"Verify Phone",Country:t})};e.prototype.trackCreateOrg=function e(t,r){var a=n({type:"Create Organization"},s(t),u(r));this.track(a);this.trackOrgEvent(t,a)};e.prototype.trackDeleteOrg=function e(t){var r=n({type:"Delete Organization"},s(t));this.track(r);this.trackOrgEvent(t,r)};e.prototype.trackSetupCustomDomain=function e(t,r){var a=n({type:"Setup Custom Domain"},s(t));r&&(a=n({},a,u(r)));this.track(a);this.trackOrgEvent(t,a)};e.prototype.trackStartMigration=function e(t){var r=n({type:"Start Migration"},s(t));this.track(r);this.trackOrgEvent(t,r)};e.prototype.trackConfirmMigration=function e(t){var r=n({type:"Confirm Migration"},s(t));this.track(r);this.trackOrgEvent(t,r)};e.prototype.trackRollbackMigration=function e(t){var r=n({type:"Rollback Migration"},s(t));this.track(r);this.trackOrgEvent(t,r)};e.prototype.trackCreateSpace=function e(t,r){var a=n({type:"Create Space"},s(t),u(r));this.track(a);this.trackOrgEvent(t,a)};e.prototype.trackJoinOrg=function e(t){var r=t.org,a=t.role,o=t.isTeam;var i=n({type:"Join Organization",Role:a,"Is Team":o},s(r));this.track(i);this.trackOrgEvent(r,i)};e.prototype.trackCreateTeam=function e(t){var r=n({type:"Create Team"},s(t));this.track(r);this.trackOrgEvent(t,r)};e.prototype.trackStartEditing=function e(t,r){var a=n({type:"Start Editing"},s(t),u(r));this.track(a);this.trackOrgEvent(t,a)};e.prototype.trackResumeEditing=function e(t){var r=t.org,a=t.space,o=t.working;var i=n({type:"Resume Editing"},s(r),u(a),c(o));this.track(i);this.trackOrgEvent(r,i)};e.prototype.trackCancelEdits=function e(t){var r=t.org,a=t.space,o=t.working,i=t.isDraft;var p=n({type:"Cancel Edits","Is Draft":i},s(r),u(a),c(o));this.track(p);this.trackOrgEvent(r,p)};e.prototype.trackPublishChanges=function e(t){var r=t.org,a=t.space,o=t.working,i=t.isDraft;var p=n({type:"Publish Changes","Is Draft":i},s(r),u(a),c(o));this.track(p);this.trackOrgEvent(r,p)};e.prototype.trackRatePage=function e(t,r,a){var o=n({type:"Rate Page",Rating:a},s(t),u(r));this.track(o);this.trackOrgEvent(t,o)};e.prototype.trackCreateDraft=function e(t,r){var a=n({type:"Create Draft"},s(t),u(r));this.track(a);this.trackOrgEvent(t,a)};e.prototype.trackCloseDraft=function e(t,r){var a=n({type:"Close Draft"},s(t),u(r));this.track(a);this.trackOrgEvent(t,a)};e.prototype.trackPublishDraft=function e(t,r){var a=n({type:"Publish Draft"},s(t),u(r));this.track(a);this.trackOrgEvent(t,a)};e.prototype.trackRollback=function e(t,r,a){var o=n({type:"Rollback Revision","Is Draft":a},s(t),u(r));this.track(o);this.trackOrgEvent(t,o)};e.prototype.trackUpgrade=function e(t,r,a){var o=n({type:"Upgrade",Plan:a,"Previous Plan":r},s(t));this.track(o);this.trackOrgEvent(t,o)};e.prototype.trackDowngrade=function e(t,r,a){var o=n({type:"Downgrade",Plan:a,"Previous Plan":r},s(t));this.track(o);this.trackOrgEvent(t,o)};e.prototype.trackUncaughtException=function e(t){return this.track({type:"Uncaught Exception",Error:t})};return e}();function u(e){return{"Space Visibility":e.visibility,"Space Has GitHub":e.hasGitHubSync,"Space Has Custom Domain":!!e.customDomain}}function s(e){return{"Org Has Custom Domain":!!e.customDomain,"Org Has SSO":!!e.ssoSignInLabel}}function c(e){var t=a.Revisioning.compare(e.base,e.revision);return{Changes:t.addedPages+t.modifiedPages+t.removedPages,"Versions Created":t.addedVersions,"Versions Deleted":t.removedVersions,"Versions Modified":t.modifiedVersions,"Pages Created":t.addedPages,"Pages Deleted":t.removedPages,"Pages Modified":t.modifiedPages}}t.default=i},745:function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty;var a=String.prototype.charAt;var o=Object.prototype.toString;var i=function(e,t){return a.call(e,t)};var u=function e(t,r){return n.call(t,r)};var s=function e(t){return"[object String]"===o.call(t)};var c=function e(t){return null!=t&&"function"!==typeof t&&"number"===typeof t.length};var p=function e(t,r){r=r||u;var n=[];for(var a=0,o=t.length;a<o;a+=1)r(t,a)&&n.push(String(a));return n};var f=function e(t,r){r=r||u;var n=[];for(var a in t)r(t,a)&&n.push(String(a));return n};var l=function e(t){if(null==t)return[];if(s(t))return p(t,i);if(c(t))return p(t,u);return f(t)};e.exports=l},809:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e){return e&&"@@redux/INIT"===e.type?"initialState argument passed to createStore":"previous state received by the reducer"};e.exports=t["default"]},98:function(e,t,r){"use strict";var n=r(99);var a=function e(t){var r=n(t);if("object"===r){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]=e(t[o]));return a}if("array"===r){var a=new Array(t.length);for(var i=0,u=t.length;i<u;i++)a[i]=e(t[i]);return a}if("regexp"===r){var s="";s+=t.multiline?"m":"";s+=t.global?"g":"";s+=t.ignoreCase?"i":"";return new RegExp(t.source,s)}if("date"===r)return new Date(t.getTime());return t};e.exports=a}});