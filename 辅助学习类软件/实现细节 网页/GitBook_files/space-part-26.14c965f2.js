webpackJsonp([17],{183:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,i,s,l,u,c,f,p,d,h,v,y,m,b,E,g,S,w,O,_,T;var L=r(0);var x=N(L);var R=r(2);var I=r(14);var C=r(1);var A=r(7);var P=r(145);var k=H(P);var D=r(459);var B=r(2166);var M=H(B);var j=r(72);function H(e){return e&&e.__esModule?e:{default:e}}function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function U(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var z=(a=o=function(e){U(t,e);function t(){Y(this,t);return G(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;return x.createElement(V,n({styles:[r.barLeftText,C.font.KINDS.TextH300]},this.props))};return t}(x.Component),o.STYLES=R.StyleSheet.create({barLeftText:(i={display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 "+C.spacing.S300+"px"},i["@media "+C.MEDIA.SMALLER_THAN_TABLET]={padding:"0 "+C.spacing.S200+"px"},i)}),a);var V=(l=s=function(e){U(t,e);function t(){Y(this,t);return G(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.styles,a=n.children;return x.createElement(C.View,{styles:[r.barLeft,o]},a)};return t}(x.Component),s.Text=z,s.STYLES=R.StyleSheet.create({barLeft:{flex:1,overflow:"hidden"},barLeftText:n({},C.font.KINDS.TextH300,(u={display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 "+C.spacing.S300+"px"},u["@media "+C.MEDIA.SMALLER_THAN_TABLET]={padding:"0 "+C.spacing.S200+"px"},u))}),l);var W=(f=c=function(e){U(t,e);function t(){Y(this,t);return G(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.styles,a=n.children;return x.createElement(C.View,{styles:[r.barRight,o]},a)};return t}(x.Component),c.STYLES=R.StyleSheet.create({barRight:(p={display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 "+C.spacing.S200+"px"},p["@media "+C.MEDIA.SMALLER_THAN_TABLET]={padding:"0 "+C.spacing.S200+"px"},p)}),f);var F=(h=d=function(e){U(t,e);function t(){Y(this,t);return G(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;return x.createElement(C.View,{styles:[C.View.MARGIN.S200Horizontal,r.barSeparator]})};return t}(x.Component),d.STYLES=R.StyleSheet.create({barSeparator:{height:j.layout.CONTROLSBAR_HEIGHT/2,width:1,backgroundColor:C.colors.BLUE_BASE}}),h);var q=(y=v=function(e){U(t,e);function t(){Y(this,t);return G(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.children,a=n.onClick,i=n.dark,s=n.statePickerOpen;return x.createElement(C.View,{role:"button",tabIndex:"0",onClick:a,styles:[r.barMenuButton,i&&r.dark,s&&r.statePickerOpen]},o)};return t}(x.Component),v.STYLES=R.StyleSheet.create({barMenuButton:{pointerEvents:"auto",cursor:"pointer",position:"relative",flex:"0 0 auto",order:-1,zIndex:M.default.Z_MENU_BUTTON,width:j.layout.CONTROLSBAR_HEIGHT,height:j.layout.CONTROLSBAR_HEIGHT,backgroundColor:C.colors.BLUE_BASE,color:C.colors.WHITE,borderRadius:C.boxes.RADIUS_NORMAL,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",transition:"margin-left 0.2s ease-out"},dark:{backgroundColor:C.colors.BLUE_DARK+" !important"},statePickerOpen:(m={},m["@media "+C.MEDIA.SMALLER_THAN_TABLET]={marginLeft:-(j.layout.CONTROLSBAR_HEIGHT+C.spacing.S200)},m)}),y);var X=(E=b=function(e){U(t,e);function t(){Y(this,t);return G(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.children,a=n.withStatePickerOpen;return x.createElement("div",{className:(0,R.css)(r.barBody,a&&r.withStatePickerOpen)},o)};return t}(x.Component),b.STYLES=R.StyleSheet.create({barBody:(g={pointerEvents:"auto",position:"relative",height:j.layout.CONTROLSBAR_HEIGHT,display:"flex",flex:1,color:C.colors.BLUE_BASE,backgroundColor:C.colors.BLUE_LIGHTER,borderRadius:C.boxes.RADIUS_NORMAL,alignItems:"stretch",overflow:"hidden",marginLeft:C.spacing.S300},g["@media "+C.MEDIA.SMALLER_THAN_TABLET]={marginLeft:C.spacing.S200},g),withStatePickerOpen:(S={borderTopLeftRadius:0},S["@media "+C.MEDIA.SMALLER_THAN_TABLET]={borderTopRightRadius:0},S)}),E);var K=(0,I.withModalRouter)(w=(_=O=function(e){U(t,e);function t(){var r,n,o;Y(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=G(this,e.call.apply(e,[this].concat(i))),n),n.closeSettings=function(){n.props.modalRouter.closeModal()},n.showSettings=function(){n.props.modalRouter.navigateToModal(k.default.SETTINGS)},r),G(n,o)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.children,a=n.withStatePickerOpen,i=n.modalRouter;var s=D.SettingsTab.matchSettings(i.location);var l=D.SettingsTab.getActiveTab(i.location);return x.createElement(C.ColorPalette.Brand,null,x.createElement(C.View,{styles:[r.barContainer]},o&&x.createElement(X,{withStatePickerOpen:a},o),s&&x.createElement(C.Backdrop,{onClick:this.closeSettings}),x.createElement(M.default,{isOpen:s,location:i.location,activeTab:l,onCloseTab:this.showSettings}),x.createElement(q,{onClick:s?this.closeSettings:this.showSettings,statePickerOpen:a,dark:s},s?x.createElement(A.IconArrowLeft,null):x.createElement(A.IconSlidersHorizontal,null))))};return t}(x.Component),O.defaultProps={withStatePickerOpen:false},O.Separator=F,O.Left=V,O.Right=W,O.STYLES=R.StyleSheet.create({barContainer:(T={pointerEvents:"none",display:"flex",position:"fixed",zIndex:C.zIndexes.CONTROLSBAR,bottom:0,left:0,right:0,margin:"0 auto",width:"100%",maxWidth:C.layout.CONTAINER_WIDTH+2*C.spacing.S200,padding:C.spacing.S200},T["@media "+C.MEDIA.MOBILE_LANDSCAPE]={maxWidth:C.layout.CONTAINER_WIDTH+2*C.spacing.S300,padding:C.spacing.S300},T)}),_))||w;t.default=K},1891:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var a=r(0);var i=f(a);var s=r(801);var l=f(s);var u=r(56);var c=f(u);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){v(t,e);function t(e){d(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.updateContext=function(e){var t=e.inherited,n=e.node;r.containerNode=n;r.setState({containerOffset:t,distanceFromBottom:r.getDistanceFromBottom()})};r.recomputeState=function(){var e=r.isSticky();var t=r.getHeight();var n=r.getWidth();var o=r.getXOffset();var a=r.getDistanceFromBottom();var i=r.state.isSticky!==e;r.setState({isSticky:e,height:t,width:n,xOffset:o,distanceFromBottom:a});if(i){r.channel&&r.channel.update(function(t){t.offset=e?r.state.height:0});r.props.onStickyStateChange(e)}};r.state={};return r}o(t,[{key:"componentWillMount",value:function e(){this.channel=this.context["sticky-channel"];this.channel.subscribe(this.updateContext)}},{key:"componentDidMount",value:function e(){this.on(["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],this.recomputeState);this.recomputeState()}},{key:"componentWillReceiveProps",value:function e(){this.recomputeState()}},{key:"componentWillUnmount",value:function e(){this.off(["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],this.recomputeState);this.channel.unsubscribe(this.updateContext)}},{key:"getXOffset",value:function e(){return this.refs.placeholder.getBoundingClientRect().left}},{key:"getWidth",value:function e(){return this.refs.placeholder.getBoundingClientRect().width}},{key:"getHeight",value:function e(){return c.default.findDOMNode(this.refs.children).getBoundingClientRect().height}},{key:"getDistanceFromTop",value:function e(){return this.refs.placeholder.getBoundingClientRect().top}},{key:"getDistanceFromBottom",value:function e(){if(!this.containerNode)return 0;return this.containerNode.getBoundingClientRect().bottom}},{key:"isSticky",value:function e(){if(!this.props.isActive)return false;var t=this.getDistanceFromTop();var r=this.getDistanceFromBottom();var n=this.state.containerOffset-this.props.topOffset;var o=this.state.containerOffset+this.props.bottomOffset;return t<=n&&r>=o}},{key:"on",value:function e(t,r){t.forEach(function(e){window.addEventListener(e,r)})}},{key:"off",value:function e(t,r){t.forEach(function(e){window.removeEventListener(e,r)})}},{key:"shouldComponentUpdate",value:function e(t,r){var n=this;var o=Object.keys(this.props);if(Object.keys(t).length!=o.length)return true;var a=o.every(function(e){return t.hasOwnProperty(e)&&t[e]===n.props[e]});if(!a)return true;var i=this.state;if(r.isSticky!==i.isSticky)return true;if(i.isSticky){if(r.height!==i.height)return true;if(r.width!==i.width)return true;if(r.xOffset!==i.xOffset)return true;if(r.containerOffset!==i.containerOffset)return true;if(r.distanceFromBottom!==i.distanceFromBottom)return true}return false}},{key:"render",value:function e(){var t={paddingBottom:0};var r=this.props.className;var o=n({},{transform:"translateZ(0)"},this.props.style);if(this.state.isSticky){var a={position:"fixed",top:this.state.containerOffset,left:this.state.xOffset,width:this.state.width};var s=this.state.distanceFromBottom-this.state.height-this.props.bottomOffset;this.state.containerOffset>s&&(a.top=s);t.paddingBottom=this.state.height;r+=" "+this.props.stickyClassName;o=n({},o,a,this.props.stickyStyle)}var l=this.props,u=l.topOffset,c=l.isActive,f=l.stickyClassName,d=l.stickyStyle,h=l.bottomOffset,v=l.onStickyStateChange,y=p(l,["topOffset","isActive","stickyClassName","stickyStyle","bottomOffset","onStickyStateChange"]);return i.default.createElement("div",null,i.default.createElement("div",{ref:"placeholder",style:t}),i.default.createElement("div",n({},y,{ref:"children",className:r,style:o}),this.props.children))}}]);return t}(i.default.Component);y.propTypes={isActive:l.default.bool,className:l.default.string,style:l.default.object,stickyClassName:l.default.string,stickyStyle:l.default.object,topOffset:l.default.number,bottomOffset:l.default.number,onStickyStateChange:l.default.func};y.defaultProps={isActive:true,className:"",style:{},stickyClassName:"sticky",stickyStyle:{},topOffset:0,bottomOffset:0,onStickyStateChange:function e(){}};y.contextTypes={"sticky-channel":l.default.any};t.default=y;e.exports=t["default"]},1892:function(e,t,r){"use strict";var n=r(1893);var o=r(1894);var a=r(1895);e.exports=function(){function e(e,t,r,n,i,s){if(s===a)return;o(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};r.checkPropTypes=n;r.PropTypes=r;return r}},1893:function(e,t,r){"use strict";function n(e){return function(){return e}}var o=function e(){};o.thatReturns=n;o.thatReturnsFalse=n(false);o.thatReturnsTrue=n(true);o.thatReturnsNull=n(null);o.thatReturnsThis=function(){return this};o.thatReturnsArgument=function(e){return e};e.exports=o},1894:function(e,t,r){"use strict";var n=function e(t){};false;function o(e,t,r,o,a,i,s,l){n(t);if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,o,a,i,s,l];var f=0;u=new Error(t.replace(/%s/g,function(){return c[f++]}));u.name="Invariant Violation"}u.framesToPop=1;throw u}}e.exports=o},1895:function(e,t,r){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},1896:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();var o=r(0);var a=p(o);var i=r(801);var s=p(i);var l=r(56);var u=p(l);var c=r(802);var f=p(c);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){v(t,e);function t(e){d(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.updateOffset=function(e){var t=e.inherited,n=e.offset;r.channel.update(function(e){e.inherited=t+n})};r.channel=new f.default({inherited:0,offset:0,node:null});return r}n(t,[{key:"getChildContext",value:function e(){return{"sticky-channel":this.channel}}},{key:"componentWillMount",value:function e(){var t=this.context["sticky-channel"];t&&t.subscribe(this.updateOffset)}},{key:"componentDidMount",value:function e(){var t=u.default.findDOMNode(this);this.channel.update(function(e){e.node=t})}},{key:"componentWillUnmount",value:function e(){this.channel.update(function(e){e.node=null});var t=this.context["sticky-channel"];t&&t.unsubscribe(this.updateOffset)}},{key:"render",value:function e(){return a.default.createElement("div",this.props,this.props.children)}}]);return t}(a.default.Component);y.contextTypes={"sticky-channel":s.default.any};y.childContextTypes={"sticky-channel":s.default.any};t.default=y;e.exports=t["default"]},1937:function(e,t,r){"use strict";var n=function(){function e(e,t){var r=[];var n=true;var o=false;var a=void 0;try{for(var i=e[Symbol.iterator](),s;!(n=(s=i.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){o=true;a=e}finally{try{!n&&i["return"]&&i["return"]()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=r(6),u=l.Record,c=l.Stack,f=l.List;var p=r(1938);var d=500;var h={undos:new f,redos:new c,merged:1,maxUndos:d,strategy:y};var v=function(e){s(t,e);function t(){a(this,t);return i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o(t,[{key:"push",value:function e(t){var r=this.merge({undos:this.undos.push(b(t,this.merged)),redos:new c,merged:1});return r.prune()}},{key:"undo",value:function e(t){if(!this.canUndo)return this;return this.merge({undos:this.undos.pop(),redos:this.redos.push(b(t,this.merged)),merged:this.undos.last().merged})}},{key:"redo",value:function e(t){if(!this.canRedo)return this;return this.merge({undos:this.undos.push(b(t,this.merged)),redos:this.redos.pop(),merged:this.redos.first().merged})}},{key:"prune",value:function e(){return this.undos.size<=this.maxUndos?this:this.strategy(this)}},{key:"canUndo",get:function e(){return!this.undos.isEmpty()}},{key:"canRedo",get:function e(){return!this.redos.isEmpty()}},{key:"previous",get:function e(){return this.undos.last().value}},{key:"next",get:function e(){return this.redos.first().value}}],[{key:"create",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(r)}}]);return t}(new u(h));v.lru=y;v.smooth=m;function y(e){return e.set("undos",e.undos.shift())}function m(e){var t=e.undos.first().merged;var r=e.undos.last().merged;var o=e.undos.count();var a=p({x0:0,y0:r},{x1:o-1,y1:t});var i=e.undos.findIndex(function(e,t){var r=e.merged;return r<a(o-1-t)});-1===i&&(i=0);var s=i+1;var l=e.undos.slice(i,s+1).toArray(),u=n(l,2),c=u[0],f=u[1];return e.set("undos",e.undos.set(i,E(c,f.merged)).delete(s))}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{value:e,merged:t}}function E(e,t){var r=e.value,n=e.merged;return{value:r,merged:n+t}}e.exports=v},1938:function(e,t,r){"use strict";function n(e,t){var r=e.x0,n=e.y0;var o=t.x1,a=t.y1;return function(e){return(e-r)*(a-n)/(o-r)+n}}e.exports=n},2135:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,i,s,l,u,c,f,p,d;var h=r(0);var v=M(h);var y=r(26);var m=B(y);var b=r(2);var E=r(5);var g=r(90);var S=B(g);var w=r(3);var O=r(96);var _=r(14);var T=r(1);var L=r(7);var x=r(302);var R=r(465);var I=B(R);var C=r(2136);var A=r(2145);var P=B(A);var k=r(2146);var D=B(k);function B(e){return e&&e.__esModule?e:{default:e}}function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Y=(o=(0,E.connect)(function(e){var t=e.space,r=e.config,n=e.org,o=e.userCanAdmin;return{space:t,faviconURL:t.logoURL?O.CDN.transformURL(t.logoURL,r.cdn.blobsurl):"",org:n,userCanAdmin:o}}),o(a=(0,_.withRouterListen)(a=(s=i=function(e){N(t,e);function t(r){j(this,t);var o=H(this,e.call(this,r));o.clearSearchQuery=function(){clearTimeout(o.syncURLTimeout);o.setState({searchExpanded:false,searchQuery:""});var e=o.props.history;e.push(n({},e.location,{search:""}))};o.syncURL=function(){clearTimeout(o.syncURLTimeout);o.syncURLTimeout=setTimeout(function(){var e=o.props,t=e.history,r=e.location;var a=o.state.searchQuery;var i=S.default.parse(r.search.slice(1));var s=S.default.stringify({q:a});var l=n({},r,{search:s,hash:null});i.q?t.replace(l):t.push(l)},500)};o.onChangeSearchQuery=function(e){o.setState({searchQuery:e});o.syncURL()};o.onExpandSearch=function(){o.setState(function(e){return e.searchExpanded?null:{searchExpanded:true}})};o.onToggleSidebar=function(){var e=o.props.dispatch;e((0,x.toggle)())};o.state=o.getStateFromLocation(o.props.location);return o}t.prototype.componentWillReceiveProps=function e(t){var r=this.props.location;var n=t.location;n.search!==r.search&&this.setState(this.getStateFromLocation(t.location))};t.prototype.getStateFromLocation=function e(t){var r=S.default.parse(t.search.slice(1));this.syncURLTimeout=null;return null==r.q?{searchExpanded:false,searchQuery:""}:{searchExpanded:true,searchQuery:r.q}};t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.isMobile,a=n.space,i=n.location,s=n.noMenu,l=n.faviconURL,u=n.org,c=n.userCanAdmin;var f=this.state,p=f.searchExpanded,d=f.searchQuery;var h=o&&!s;return v.createElement(T.PlaceholderInteractionBlocker,null,u&&v.createElement(_.MigrateBanner,{orgID:u.uid,canAdmin:c}),v.createElement("div",{"data-test":o?"headermobile":"headerdesktop",className:(0,b.css)(r.header,o?r.headerMobile:r.headerDesktop)},v.createElement(m.default,{link:[{rel:"icon",href:l}]}),v.createElement("div",{className:(0,b.css)(r.headerInner)},h&&v.createElement(z,{onClick:this.onToggleSidebar}),!(o&&p)&&v.createElement(P.default,{space:a,displayName:a.name,styles:[r.logo],isMobile:o}),v.createElement(D.default,{styles:[r.links,p&&r.linksShrinked],space:a,location:i}),o&&!p?v.createElement(C.SearchButton,{styles:r.searchButton,onClick:this.onExpandSearch}):v.createElement(C.SearchBar,{isMobile:o,isExpanded:p,query:d,onFocus:this.onExpandSearch,onChange:this.onChangeSearchQuery,onClear:this.clearSearchQuery}))))};return t}(v.Component),i.defaultProps={noMenu:false},i.STYLES=b.StyleSheet.create({header:{background:T.boxes.BACKGROUND,borderBottom:"1px solid "+T.boxes.BORDER_NORMAL,boxShadow:T.boxes.SHADOW_LOW,zIndex:T.zIndexes.HEADER,display:"flex",alignItems:"stretch"},headerDesktop:(l={position:"relative",flex:"0 "+I.default.HEADER_DESKTOP_HEIGHT+"px",minHeight:I.default.HEADER_DESKTOP_HEIGHT,paddingLeft:T.spacing.S300,paddingRight:T.spacing.S300},l["@media "+T.MEDIA.SMALLER_THAN_TABLET]={display:"none"},l),headerMobile:(u={position:"fixed",flex:"0 "+I.default.HEADER_MOBILE_HEIGHT+"px",minHeight:I.default.HEADER_MOBILE_HEIGHT,top:0,width:"100%",paddingLeft:T.spacing.S100,paddingRight:T.spacing.S100},u["@media "+T.MEDIA.MOBILE_LANDSCAPE]={paddingLeft:T.spacing.S200,paddingRight:T.spacing.S200},u["@media "+T.MEDIA.TABLET]={display:"none"},u),headerInner:{maxWidth:T.layout.CONTAINER_WIDTH,width:"100%",margin:"0px auto",display:"flex",alignItems:"center",padding:"0",flex:"auto"},logo:(c={flex:"0 0 auto"},c["@media "+T.MEDIA.SMALLER_THAN_TABLET]={flex:"1 0 auto"},c),links:(f={flex:"1 1 auto",overflow:"auto",transition:"flex 0.2s, width 0.2s, opacity 0.2s",opacity:1},f["@media "+T.MEDIA.SMALLER_THAN_TABLET]={display:"none"},f),linksShrinked:{flex:"0 0 0",overflow:"hidden",opacity:0},searchButton:{marginLeft:T.spacing.S100,flex:"0 0 auto"}}),s))||a)||a);var G=42;var U=24;var z=(d=p=function(e){N(t,e);function t(){j(this,t);return H(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.onClick;return v.createElement("div",{role:"button",tabIndex:-1,className:(0,b.css)(r.sidebarMenuButton),onClick:n},v.createElement(L.IconMenu,null))};return t}(v.Component),p.STYLES=b.StyleSheet.create({sidebarMenuButton:{flex:"0 0 auto",cursor:"pointer",fontSize:"24px",height:G,width:G,marginLeft:-(G-U)/2,display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",outline:"none"}}),d);var V=function(e){N(t,e);function t(){j(this,t);return H(this,e.apply(this,arguments))}t.prototype.render=function e(){return[v.createElement(T.MediaQuery,{key:"mobile",query:T.MEDIA.SMALLER_THAN_TABLET},v.createElement(Y,n({isMobile:true},this.props))),v.createElement(T.MediaQuery,{key:"desktop",query:T.MEDIA.TABLET},v.createElement(Y,n({isMobile:false},this.props)))]};return t}(v.Component);t.default=V},2136:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SearchButton=t.SearchBar=void 0;var n=r(2137);var o=s(n);var a=r(2144);var i=s(a);function s(e){return e&&e.__esModule?e:{default:e}}t.SearchBar=o.default;t.SearchButton=i.default},2137:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,l,u,c,f,p;var d=r(0);var h=I(d);var v=r(6);var y=r(5);var m=r(2);var b=r(112);var E=r(3);var g=r(1);var S=r(7);var w=r(19);var O=r(2138);var _=r(2139);var T=R(_);var L=r(2141);var x=R(L);function R(e){return e&&e.__esModule?e:{default:e}}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=5;var D=m.StyleSheet.create({searchInputWrapper:{position:"relative"},searchInputWithSuggestions:(n={},n["@media "+g.MEDIA.TABLET]={borderRadius:g.boxes.RADIUS_NORMAL+"px "+g.boxes.RADIUS_NORMAL+"px 0 0"},n),searchInputExpanded:{background:g.colors.WHITE,borderColors:g.colors.WHITE},searchX:{position:"absolute",top:"50%",right:g.spacing.S200,transform:"translateY(-50%)",cursor:"pointer",color:g.colors.TEXT_SECONDARY,lineHeight:1},searchBar:(o={marginLeft:g.spacing.S200,flex:"0 1 auto",maxWidth:200,minWidth:200,transition:"flex 0.2s, width 0.2s"},o["@media "+g.MEDIA.TABLET]={position:"relative"},o),searchBarForeground:(a={},a["@media "+g.MEDIA.TABLET]={position:"relative",zIndex:1},a),searchBarOverlay:(i={},i["@media "+g.MEDIA.TABLET]={position:"fixed",zIndex:0,top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.2)",animationName:[g.animations.fadeIn],animationDuration:"250ms"},i),searchBarExpanded:{maxWidth:"initial",flex:"1 1 auto"},searchResultsContainer:(s={position:"absolute",left:0,marginTop:0,width:"100%",top:"100%",background:"#fff",borderRadius:"0 0 "+g.boxes.RADIUS_NORMAL+"px "+g.boxes.RADIUS_NORMAL+"px",boxShadow:g.boxes.SHADOW_HIGH},s["@media "+g.MEDIA.SMALLER_THAN_TABLET]={borderRadius:0,zIndex:"-1",boxShadow:g.boxes.SHADOW_HIGH+", inset 0 4px 6px -4px rgba(0,0,0,.24)",borderBottom:"1px solid "+g.boxes.BORDER_NORMAL},s)});var B=(l=(0,y.connect)(function(e,t){var r=e.database,n=e.space,o=e.search;var a=t.query,i=t.contentContext;var s=r.getDocument(E.Revision.queryByID({spaceID:n.uid,revisionID:n.primaryRevision}));return{results:o.getResults(a),needRefresh:o.isOutdated(a),version:s?s.versions.get(i.versionID||s.primaryVersionID):null}}),(0,w.contentRoutingConnect)(u=l(u=(0,b.withRouter)(u=(f=c=function(e){P(t,e);function t(r){C(this,t);var n=A(this,e.call(this,r));p.call(n);var o=r.results,a=r.isMobile;n.state={results:o?n.transformResultsForState(o):null,cursor:a?-1:0};return n}t.prototype.componentDidMount=function e(){window.document.body.addEventListener("click",this.onClear,true);this.fetchIfNeeded()};t.prototype.componentWillReceiveProps=function e(t){var r=t.results,n=t.isMobile;if(!r)return;var o=this.transformResultsForState(r);var a=!this.isSameResultPages(o);var i=n?-1:0;this.setState({results:o,cursor:a?i:this.state.cursor})};t.prototype.componentDidUpdate=function e(t){this.fetchIfNeeded()};t.prototype.componentWillUnmount=function e(){window.document.body.removeEventListener("click",this.onClear,true)};t.prototype.isSameResultPages=function e(t){var r=this.state.results;if(!r)return false;var n=t.map(function(e){return e.pageID});var o=r.map(function(e){return e.pageID});return(0,v.is)(n,o)};t.prototype.render=function e(){var t=this;var r=this.props,n=r.isExpanded,o=r.query,a=r.onFocus,i=r.onChange,s=r.onClear;var l=this.state,u=l.results,c=l.cursor;var f=Boolean(o&&n);return h.createElement("div",{className:(0,m.css)(D.searchBar,n&&D.searchBarExpanded)},h.createElement("div",{className:(0,m.css)(D.searchBarForeground),ref:function e(r){t.wrapper=r}},h.createElement("div",{className:(0,m.css)(D.searchInputWrapper)},h.createElement(T.default,{ref:function e(r){t.searchInput=r},query:o,autoFocus:n,onFocus:a,onClear:s,onChange:i,pickCursorResult:this.pickCursorResult,moveCursor:this.moveCursor,styles:[n&&D.searchInputExpanded,f&&D.searchInputWithSuggestions]}),n&&h.createElement("div",{role:"button",tabIndex:0,className:(0,m.css)(D.searchX),onClick:s},h.createElement(S.IconX,null))),f&&h.createElement("div",{className:(0,m.css)(D.searchResultsContainer)},h.createElement(x.default,{query:o,cursor:c,results:u,redirectToResult:this.redirectToResult}))),n&&h.createElement("div",{className:(0,m.css)(D.searchBarOverlay)}))};return t}(h.Component),p=function e(){var t=this;this.fetchIfNeeded=function(){var e=t.props,r=e.needRefresh,n=e.version,o=e.query,a=e.dispatch;o&&r&&n&&a((0,O.fetchContentResults)({version:n,query:o}))};this.moveCursor=function(e){t.setState(function(t){var r=t.cursor,n=t.results;if(!n)return{};var o=r+e;var a=n.reduce(function(e,t){var r=t.list;return e+r.size},0);o<0?o=a-1:o>a-1&&(o=0);return{cursor:o}})};this.pickCursorResult=function(){var e=t.state,r=e.cursor,n=e.results;if(r<0||!n)return;var o=n.reduce(function(e,t){return e.concat(t.list)},(0,v.List)()).get(r);t.redirectToResult(o)};this.redirectToResult=function(e){var r=t.props,n=r.contentContext,o=r.version,a=r.history;if(!e||!o)return;var i=o.page.getByID(e.pageID);if(!i)return;var s=o.page.getURLOf(i);var l=(0,w.getContentRoute)(n,{toPage:s,toRootPage:!s,toAnchor:e.hash});t.searchInput.getWrappedInstance().blur();a.push(l)};this.transformResultsForState=function(e){var r=t.props.version;if(!r)return(0,v.List)();var n=e.all.filter(function(e){var t=e.index;return t===E.PageSearchResult.INDEX||t===E.SectionSearchResult.INDEX}).sortBy(function(e){var t=e.userScore;return t});var o=n.filter(function(e){var t=e.index;return t===E.SectionSearchResult.INDEX}).map(function(e){var t=e.pageID;return t}).toSet();var a=n.filter(function(e){var t=e.pageID,n=e.index;return Boolean(r.page.getByID(t))&&(n===E.SectionSearchResult.INDEX||!o.includes(t))});var i=a.take(k);return i.map(function(e){var t=e.pageID;return t}).toOrderedSet().toList().map(function(e){return{pageID:e,page:r.page.getByID(e),list:i.filter(function(t){var r=t.pageID;return r==e})}})};this.onClear=function(e){if(e.target instanceof Node&&t.wrapper.contains(e.target))return;var r=t.props,n=r.isExpanded,o=r.onClear;n&&o()}},f))||u)||u)||u);t.default=B},2145:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=f(a);var s=r(2);var l=r(1);r(3);var u=r(14);var c=r(19);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(o=n=function(e){h(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.space,a=n.displayName,f=n.isMobile,p=n.styles;return i.createElement(l.View,{styles:[p]},i.createElement(c.ContentLink,{toRootPage:true,className:(0,s.css)(r.logoLink)},i.createElement(u.SpaceAvatar,{space:o,styles:[u.SpaceAvatar.STYLES.sizeMD]}),i.createElement(l.View,{component:"h1",styles:[l.View.PADDING.S200Left,r.logoDisplayName]},f?i.createElement(l.Text.DisplayH700,null,a):i.createElement(l.Text.DisplayH800,null,a))))};return t}(i.PureComponent),n.STYLES=s.StyleSheet.create({logo:{},logoLink:{display:"flex",textDecoration:"none",alignItems:"center"},logoDisplayName:{color:l.colors.BLACK}}),o);t.default=v},2146:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var i=r(0);var s=v(i);var l=r(13);var u=r(10);var c=r(3);var f=r(145);var p=v(f);var d=r(19);var h=r(2147);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=function(e){b(t,e);function t(){y(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.link;return s.default.createElement(h.HeaderLink,{kind:"link",component:"a",target:"_blank",rel:"noopener noreferrer",href:t.href},t.title)};return t}(s.default.Component);var g=(0,d.contentRoutingConnect)(n=function(e){b(t,e);function t(){y(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.link,n=t.version,o=t.contentContext;var a=r.pageID?n.page.getByID(r.pageID):null;if(!a)return null;var i=n.page.getURLOf(a);if(!i)return null;var u=o.pageURL?n.page.getByURL(o.pageURL):null;var c=u&&a.hasPage(u);return s.default.createElement(h.HeaderLink,{active:c,kind:"link",component:l.Link,to:p.default.PAGES+"/"+i},r.title)};return t}(s.default.Component))||n;var S=function(e){b(t,e);function t(){y(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.link;var r=Boolean(t.pageID);if(!r)return s.default.createElement(E,{link:t});return s.default.createElement(g,this.props)};return t}(s.default.Component);var w=(o=u.Connectors.database(function(e){var t=e.space;return{revision:c.Revision.queryByID({spaceID:t.uid,revisionID:t.primaryRevision}).defaultsTo(c.Revision.create())}}),o(a=function(e){b(t,e);function t(){y(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.space.links,n=t.revision,o=t.location,a=t.styles;var i=n.primaryVersion;return s.default.createElement(h.HeaderLinksGroup,{styles:a},r.map(function(e,t){return s.default.createElement(S,{key:t,location:o,link:e,version:i})}))};return t}(s.default.PureComponent))||a);t.default=w},2147:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HeaderLinksGroup=t.HeaderLink=void 0;var n,o,a,i;var s=r(0);var l=f(s);var u=r(2);var c=r(1);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=u.StyleSheet.create({links:{display:"flex",alignSelf:"stretch",padding:"0px "+c.boxes.PADDING_SMALL+"px"},link:{display:"flex",height:"100%",alignItems:"center",borderBottom:"3px solid transparent",borderTop:"3px solid transparent",whiteSpace:"nowrap"},linkActive:{opacity:1}});var m=(n=c.ColorPalette.connect(["primary"]),n(o=(i=a=function(e){v(t,e);function t(){d(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.active,n=t.colorPrimary,o=t.children,a=p(t,["active","colorPrimary","children"]);return l.createElement("div",{className:(0,u.css)(y.link,r&&y.linkActive),style:{borderBottomColor:r?n:"transparent"}},l.createElement(c.Button,a,o))};return t}(l.Component),a.defaultProps={active:false},i))||o);var b=function(e){v(t,e);function t(){d(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.children,n=t.styles;return l.createElement("div",{className:(0,u.css)(y.links,n)},r)};return t}(l.Component);t.HeaderLink=m;t.HeaderLinksGroup=b},2153:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(2154);Object.defineProperty(t,"default",{enumerable:true,get:function e(){return o(n).default}});function o(e){return e&&e.__esModule?e:{default:e}}},2154:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=u(n);var a=r(1);var i=r(2155);var s=l(i);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){p(t,e);function t(){c(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){return o.createElement(a.Popover.Portal,{openByClickOn:o.createElement(a.Button,{kind:"warn",size:"small"},"Save as Draft"),closeOnOutsideClick:true,closeOnClick:false,closeOnEsc:true},o.createElement(a.Popover,{position:"north",autoPosition:true},o.createElement(s.default,null)))};return t}(o.Component);t.default=d},2155:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r(0);var l=h(s);var u=r(2);var c=r(5);var f=r(1);var p=r(31);var d=r(19);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(n=(0,c.connect)(),n(o=(0,d.contentRoutingConnect)(o=(i=a=function(e){b(t,e);function t(){var r=this;var n,o,a;y(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=(n=(o=m(this,e.call.apply(e,[this].concat(s))),o),o.state={title:"",isLoading:false},o.inputDidMount=function(e){setTimeout(function(){e&&e.focus()},0)},o.onChange=function(e){o.setState({title:e.target.value})},o.onSubmit=function(e){e.preventDefault();var t=o.props,n=t.dispatch,a=t.navigate;var i=o.state.title;o.setState({isLoading:true},v(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return n((0,p.createDraft)({title:i}));case 2:t=r.sent;a({toDraft:t.uid,toEdit:false},{ignoreTransition:true});case 4:case"end":return r.stop()}},e,r)})))},n),m(o,a)}t.prototype.render=function e(){var r=t.STYLES;var n=this.state,o=n.title,a=n.isLoading;return l.createElement(f.Form,{onSubmit:this.onSubmit,styles:[r.draftInput]},l.createElement(f.Form.Input,{placeholder:"Draft title",styles:[r.draftInputInput],onChange:this.onChange,value:o,inputRef:this.inputDidMount,required:true}),l.createElement(f.Button,{styles:[r.draftInputButton],disabled:a},a?l.createElement(f.Loading,null):"Save"))};return t}(l.Component),a.STYLES=u.StyleSheet.create({draftInput:{display:"flex",flexDirection:"row",padding:f.boxes.PADDING_SMALL},draftInputInput:{minWidth:200},draftInputButton:{marginLeft:f.boxes.PADDING_SMALL,backgroundColor:f.colors.BLUE_BASE+" !important"}}),i))||o)||o);t.default=E},2156:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r(0);var l=h(s);var u=r(5);var c=r(13);r(3);var f=r(1);var p=r(19);var d=r(31);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(n=(0,u.connect)(),n(o=(0,p.contentRoutingConnect)(o=(i=a=function(e){m(t,e);function t(){var r,n,o;v(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=y(this,e.call.apply(e,[this].concat(i))),n),n.trackCancel=function(){var e=n.props,t=e.dispatch,r=e.draft;t((0,d.trackCancel)({draft:r}))},r),y(n,o)}t.prototype.render=function e(){var t=this.props.contentContext;return l.createElement(f.Button,{"data-test":"edit",kind:"link",size:"small",component:c.Link,onMouseDown:this.trackCancel,to:(0,p.getContentRoute)(t,{toEdit:false})},"Cancel")};return t}(l.Component),a.defaultProps={draft:null},i))||o)||o);t.default=b},2157:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s;var l=r(0);var u=h(l);var c=r(5);var f=r(2);var p=r(1);var d=r(2158);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(n=(0,c.connect)(function(e){var t=e.diff;return{isActive:t.active}}),n(o=(i=a=function(e){m(t,e);function t(){var r,n,o;v(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=y(this,e.call.apply(e,[this].concat(i))),n),n.onClick=function(){var e=n.props,t=e.dispatch,r=e.isActive;t((0,d.toggleDiff)(!r))},r),y(n,o)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.isActive;return u.createElement("div",{className:(0,f.css)(r.changesSwitch)},u.createElement("span",{className:(0,f.css)(r.changesSwitchLabel)},"Display changes"),u.createElement(p.Switch,{checked:n,onClick:this.onClick,size:"small"}))};return t}(u.Component),a.STYLES=f.StyleSheet.create({changesSwitch:{},changesSwitchLabel:(s={fontSize:p.font.SIZE_XSMALL,marginRight:p.boxes.PADDING_SMALL},s["@media "+p.MEDIA.SMALLER_THAN_TABLET]={display:"none"},s)}),i))||o);t.default=b},2158:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toggleDiff=void 0;var n=r(71);var o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return{type:o.default.DIFF_TOGGLE,diffActive:e}}t.toggleDiff=i},2159:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=f(a);var s=r(5);r(3);var l=r(1);var u=r(31);var c=r(19);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(n=(0,s.connect)(),n(o=(0,c.contentRoutingConnect)(o=function(e){h(t,e);function t(){var r,n,o;p(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=d(this,e.call.apply(e,[this].concat(i))),n),n.onClick=function(){var e=n.props,t=e.dispatch,r=e.draft,o=e.navigate;var a="This draft has unpublished changes, are you sure you want to discard it?";window.confirm(a)&&t((0,u.closeDraft)(r)).then(function(){return o({toPrimary:true,toRootPage:true})})},r),d(n,o)}t.prototype.render=function e(){return i.createElement(l.Button,{kind:"link",size:"small",onClick:this.onClick},"Discard draft")};return t}(i.Component))||o)||o);t.default=v},2160:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=f(a);var s=r(5);var l=r(13);var u=r(1);var c=r(19);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(n=(0,s.connect)(),n(o=(0,c.contentRoutingConnect)(o=function(e){h(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.contentContext;return i.createElement(u.Button,{"data-test":"edit",kind:"primary",size:"small",component:l.Link,to:(0,c.getContentRoute)(t,{toEdit:true}),styles:[u.View.PADDING.S200Horizontal]},"Edit")};return t}(i.Component))||o)||o);t.default=v},2161:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=y(a);var s=r(5);var l=r(1);var u=r(31);var c=r(19);var f=r(93);var p=v(f);var d=r(146);var h=v(d);function v(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(n=(0,s.connect)(),n(o=(0,c.contentRoutingConnect)(o=function(e){g(t,e);function t(){var r=this,n;b(this,t);var o=E(this,e.call(this));o.onPublish=function(e){e.preventDefault();var t=o.props,n=t.dispatch,a=t.navigate;o.setState({isLoading:true},m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return n((0,u.publish)());case 3:a({toEdit:false},{ignoreTransition:true});t.next=10;break;case 6:t.prev=6;t.t0=t["catch"](0);o.setState({isLoading:false});throw t.t0;case 10:case"end":return t.stop()}},e,r,[[0,6]])})))};o.state={isLoading:false};o.keyMap=(n={},n[p.default.SAVE]=o.onPublish,n);return o}t.prototype.render=function e(){var t=this.state.isLoading;return i.createElement(i.Fragment,null,i.createElement(h.default,{keyMap:this.keyMap}),i.createElement(l.Button,{"data-test":"publish",kind:"success",size:"small",disabled:t,onClick:this.onPublish,type:"button"},t?i.createElement(l.Loading,null):"Publish"))};return t}(i.Component))||o)||o);t.default=S},2162:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=f(a);var s=r(5);r(3);var l=r(1);var u=r(31);var c=r(19);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=(n=(0,s.connect)(),n(o=(0,c.contentRoutingConnect)(o=function(e){v(t,e);function t(){var r=this;var n,o,a;d(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=(n=(o=h(this,e.call.apply(e,[this].concat(s))),o),o.state={isLoading:false},o.onClick=function(){var e=o.props,t=e.dispatch,n=e.draft,a=e.navigate;var i="This draft's changes will be merged in the live revision. Any conflicting changes will be lost in favor of this draft's changes. Are you sure you want to publish this draft?";window.confirm(i)&&o.setState({isLoading:true},p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return t((0,u.publishDraft)(n));case 2:o.setState({isLoading:false});a({toEdit:false,toPrimary:true,toRootPage:true},{ignoreTransition:true});t((0,u.closeDraft)(n));case 5:case"end":return r.stop()}},e,r)})))},n),h(o,a)}t.prototype.render=function e(){var t=this.state.isLoading;return i.createElement(l.Button,{kind:"success",size:"small",onClick:this.onClick,disabled:t},t?i.createElement(l.Loading,null):"Publish")};return t}(i.Component))||o)||o);t.default=y},2163:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=p(a);var s=r(5);var l=r(3);var u=r(1);var c=r(31);var f=r(19);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=(n=(0,s.connect)(),n(o=(0,f.contentRoutingConnect)(o=function(e){v(t,e);function t(){var r,n,o;d(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=h(this,e.call.apply(e,[this].concat(i))),n),n.state={isLoading:false},n.onClick=function(){var e=n.props,t=e.revision,r=e.draft,o=e.dispatch,a=e.navigate;var i="Do you really want to restore from this state?";if(!window.confirm(i))return;n.setState({isLoading:true},function(){r?o((0,c.rollback)(t,r)).then(function(){n.setState({isLoading:false});a({toDraft:r.uid})}):o((0,c.rollback)(t)).then(function(){n.setState({isLoading:false});a({toPrimary:true})})})},r),h(n,o)}t.prototype.render=function e(){var t=this.state.isLoading;return i.createElement(u.Button,{kind:"primary",size:"small",onClick:this.onClick,disabled:t},t?i.createElement(u.Loading,null):"Restore from this state")};return t}(i.Component))||o)||o);t.default=y},2164:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=y(a);var s=r(5);r(3);var l=r(1);var u=r(19);var c=r(31);var f=r(93);var p=v(f);var d=r(146);var h=v(d);function v(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(n=(0,s.connect)(),n(o=(0,u.contentRoutingConnect)(o=function(e){g(t,e);function t(){var r=this,n;b(this,t);var o=E(this,e.call(this));o.onSave=function(e){e.preventDefault();var t=o.props,n=t.dispatch,a=t.draft,i=t.navigate;o.setState({isLoading:true},m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return n((0,c.saveDraft)(a));case 3:i({toEdit:false},{ignoreTransition:true});t.next=10;break;case 6:t.prev=6;t.t0=t["catch"](0);o.setState({isLoading:false});throw t.t0;case 10:case"end":return t.stop()}},e,r,[[0,6]])})))};o.state={isLoading:false};o.keyMap=(n={},n[p.default.SAVE]=o.onSave,n);return o}t.prototype.render=function e(){var t=this.state.isLoading;return i.createElement(i.Fragment,null,i.createElement(h.default,{keyMap:this.keyMap}),i.createElement(l.Button,{kind:"warn",size:"small",onClick:this.onSave,disabled:t},t?i.createElement(l.Loading,null):"Save draft"))};return t}(i.Component))||o)||o);t.default=S},2165:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r(0);var l=E(s);var u=r(5);var c=r(2);var f=r(1);var p=r(7);var d=r(31);var h=r(93);var v=b(h);var y=r(146);var m=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=(n=(0,u.connect)(function(e){var t=e.edition;return{edition:t}}),n(o=(i=a=function(e){w(t,e);function t(){var r;g(this,t);var n=S(this,e.call(this));n.onUndo=function(){var e=n.props.dispatch;e((0,d.undo)())};n.onRedo=function(){var e=n.props.dispatch;e((0,d.redo)())};n.keyMap=(r={},r[v.default.REDO]=n.onRedo,r[v.default.REDO2]=n.onRedo,r[v.default.UNDO]=n.onUndo,r);return n}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.edition;return l.createElement("div",{className:(0,c.css)(r.undoRedo)},l.createElement(m.default,{keyMap:this.keyMap}),l.createElement(f.Button,{kind:"link",size:"small",disabled:!n.canUndo,onClick:this.onUndo,styles:[r.undoRedoButton]},l.createElement(p.IconUndo,null)),l.createElement(f.Button,{kind:"link",size:"small",disabled:!n.canRedo,onClick:this.onRedo,styles:[r.undoRedoButton]},l.createElement(p.IconRedo,null)))};return t}(l.Component),a.STYLES=c.StyleSheet.create({undoRedo:{display:"flex",marginRight:-f.spacing.S200},undoRedoButton:{fontSize:18,marginLeft:-f.spacing.S200}}),i))||o);t.default=O},2166:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,l,u,c,f;var p=r(0);var d=g(p);var h=r(2);var v=r(1);var y=r(7);var m=r(14);var b=r(459);var E=r(72);function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=v.zIndexes.CONTROLSBAR-1;var T=v.zIndexes.CONTROLSBAR;var L=v.zIndexes.CONTROLSBAR-2;var x=v.zIndexes.CONTROLSBAR+1;var R=(o=n=function(e){O(t,e);function t(){S(this,t);return w(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.isOpen,a=n.location,i=n.activeTab,s=n.onCloseTab;return d.createElement(d.Fragment,null,o&&d.createElement(I,{onClose:s,isOpen:Boolean(i)},d.createElement(v.TabsPage.MobileHeader,{title:i&&i.defaultTitle}),d.createElement(b.SettingsTab,{isModal:true,location:a})),d.createElement(v.TabsPage.Context,{primary:true},d.createElement(b.SettingsNavigation,{isModal:true,active:i&&i.id,isExpanded:o,styles:[r.fixedSideBar,o&&r.sideBarOpen]})))};return t}(d.Component),n.Z_MENU_BUTTON=T,n.STYLES=h.StyleSheet.create({fixedSideBar:(a={position:"fixed",left:0,top:0,bottom:0,maxHeight:"100%",transform:"translateX(-100%)",opacity:0,zIndex:_,pointerEvents:"auto",transitionProperty:"transform, opacity",transitionDuration:"0.2s",transitionTimingFunction:"ease-out",paddingBottom:2*v.spacing.S200+E.layout.CONTROLSBAR_HEIGHT},a["@media "+v.MEDIA.MOBILE_LANDSCAPE]={paddingBottom:2*v.spacing.S300+E.layout.CONTROLSBAR_HEIGHT},a),sideBarOpen:{opacity:1,transform:"translateX(0%)"}}),o);var I=(s=i=function(e){O(t,e);function t(){var r,n,o;S(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=w(this,e.call.apply(e,[this].concat(i))),n),n.onScroll=function(){n.scrollable.scrollTop=0},r),w(n,o)}t.prototype.render=function e(){var r=this;var n=t.STYLES;var o=this.props,a=o.children,i=o.isOpen,s=o.onClose;return d.createElement(m.ScrollToTop,{onScroll:this.onScroll,isModal:true},d.createElement(v.View,{styles:n.position},d.createElement(v.View,{styles:[n.tabDrawer,i&&n.tabDrawerOpen],elementRef:function e(t){r.scrollable=t}},a,d.createElement("button",{onClick:s,className:(0,h.css)(n.closeX)},d.createElement(y.IconX,null)))))};return t}(d.Component),i.STYLES=h.StyleSheet.create({position:(l={position:"fixed",left:0,top:0,bottom:0,maxHeight:"100%",width:"calc((100% - "+v.layout.CONTAINER_WIDTH+"px - 2 * "+v.layout.CONTAINER_PADDING+"px) / 2 + "+v.TabsPage.SIDEBAR_TOTAL_WIDTH+"px)",minWidth:E.layout.SIDEBAR_TOTAL_WIDTH,paddingLeft:"calc((100% - "+v.layout.CONTAINER_WIDTH+"px - 2 * "+v.layout.CONTAINER_PADDING+"px) / 2 - "+v.spacing.S300+"px)",zIndex:L},l["@media "+v.TabsPage.MEDIA_SIDE_IS_TOGGABLE]={zIndex:x},l),tabDrawer:(u={pointerEvents:"auto",position:"absolute",left:"100%",top:0,bottom:0,width:v.TabsPage.TABBODY_WIDTH,maxWidth:"calc(100vw - "+v.TabsPage.SIDEBAR_TOTAL_WIDTH+"px)",background:v.colors.GREY_LIGHTEST,overflow:"auto",opacity:0,transform:"translateX(-100%)",transition:"transform 0.2s ease-in, opacity 0.2s step-end"},u["@media "+v.TabsPage.MEDIA_SIDE_IS_TOGGABLE]={pointerEvents:"none",width:"100vw",left:0,maxWidth:"initial",transform:"initial",transition:"opacity 0.1s linear"},u),tabDrawerOpen:(c={opacity:1,transform:"translateX(0%)",transition:"transform 0.2s ease-out, opacity 0.2s step-start"},c["@media "+v.TabsPage.MEDIA_SIDE_IS_TOGGABLE]={pointerEvents:"auto",transform:"initial",transition:"opacity 0.1s linear"},c),closeX:(f={cursor:"pointer",background:"none",border:"none",position:"absolute",top:50,right:50,fontSize:"18px",height:40,width:40},f["@media "+v.TabsPage.MEDIA_SIDE_IS_TOGGABLE]={top:10,right:10},f)}),s);t.default=R},2167:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(2168);Object.defineProperty(t,"default",{enumerable:true,get:function e(){return o(n).default}});function o(e){return e&&e.__esModule?e:{default:e}}},2168:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,l,u;var c=r(0);var f=T(c);var p=r(2);var d=r(12);var h=r(3);var v=r(10);var y=r(1);var m=r(7);var b=r(19);var E=r(72);var g=r(2169);var S=_(g);var w=r(2172);var O=_(w);function _(e){return e&&e.__esModule?e:{default:e}}function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function R(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=(n=v.Connectors.database(function(e){var t=e.revision;return{author:h.User.queryByID(t.createdBy)}}),n(o=(0,b.contentRoutingConnect)(o=(i=a=function(e){R(t,e);function t(){var r,n,o;L(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=x(this,e.call.apply(e,[this].concat(i))),n),n.onOpen=function(){n.props.onToggle(true)},n.onClose=function(){n.props.onToggle(false);n.props.onToggleHistory(null)},n.onOpenHistory=function(e){n.props.onToggleHistory(e)},n.onCloseHistory=function(){n.props.onToggleHistory(null)},r),x(n,o)}t.prototype.componentWillReceiveProps=function e(t){this.didRenderAsClosed=this.didRenderAsClosed||!this.props.isOpen;false===t.isOpen&&this.onCloseHistory()};t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.isOpen,a=n.openedHistory,i=n.revision,s=n.draft,l=n.author,u=n.contentContext;var c=Boolean(u.revisionID);return f.createElement(y.View,{styles:[r.statePicker]},f.createElement(y.Popover.ManualPortal,{styles:[r.statePickerPortal],onClose:this.onClose,isOpen:o,closeOnOutsideClick:true,closeOnEsc:true,closeOnScroll:false,anchor:f.createElement(y.View,{role:"button",tabIndex:0,styles:[r.statePickerButton,o&&r.statePickerButtonOpen],onClick:o?this.onClose:this.onOpen},f.createElement(y.View,{styles:[y.View.MARGIN.S200Right,r.statePickerArrow,o&&r.statePickerArrowOpen]},f.createElement(m.IconChevronDown,null)),f.createElement(y.View,{styles:r.statePickerBody},f.createElement(y.View,{styles:r.statePickerTitle},s?f.createElement(y.Badge,{styles:[y.Badge.STYLES.warn],icon:c&&f.createElement(m.IconHistory,null)},"Draft"):f.createElement(y.Badge,{styles:[y.Badge.STYLES.success],icon:c&&f.createElement(m.IconHistory,null)},"Published"),s&&f.createElement(y.Text.UIH400,{styles:[y.View.MARGIN.S100Left,r.statePickerTitleText,o&&r.statePickerOpenTitleText]},s.title)),f.createElement(y.View,{styles:r.statePickerStamp},c?f.createElement(y.Text.TextH300,null,f.createElement(m.IconCornerDownRight,{styles:r.statePickerCornerIcon})," ",l.shortDisplayName," -"," ",f.createElement(d.FormattedDate,{value:i.createdAt,year:"numeric",month:"short",day:"2-digit"})):f.createElement(y.Text.TextH300,null,"Last modified"," ",f.createElement(d.FormattedRelative,{value:i.createdAt})))))},f.createElement(y.View,{styles:[r.statePickerPopover,this.didRenderAsClosed&&r.statePickerPopoverAnimation,a&&r.statePickerPopoverExtended]},f.createElement(S.default,{activeDraft:s,activeRevision:i,onOpenHistory:this.onOpenHistory,openHistory:a}),a&&f.createElement(O.default,{baseID:a.baseID,draft:a.draft,activeRevision:i,onCloseHistory:this.onCloseHistory}))))};return t}(f.PureComponent),a.defaultProps={draft:null},a.STYLES=p.StyleSheet.create({statePicker:(s={position:"relative",width:"100%",height:"100%",maxWidth:E.layout.CONTROLSBAR_PICKER_WIDTH},s["@media "+y.MEDIA.SMALLER_THAN_TABLET]={maxWidth:"none"},s),statePickerPortal:{zIndex:y.zIndexes.CONTROLSBAR-1},statePickerButton:(l={cursor:"pointer",display:"flex",alignItems:"center",width:"100%",height:"100%",padding:"0 "+y.spacing.S200+"px"},l["@media "+y.MEDIA.SMALLER_THAN_TABLET]={padding:"0 "+y.spacing.S200+"px"},l),statePickerButtonOpen:{color:"#fff",backgroundColor:y.colors.BLUE_BASE},statePickerTitle:{display:"flex",alignItems:"center",minHeight:24},statePickerTitleText:{flex:1,display:"inline-block",color:y.colors.BLUE_DARKER,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},statePickerOpenTitleText:{color:"#fff"},statePickerArrow:{display:"flex",alignItems:"center",fontSize:24,transform:"rotateZ(180deg)",transition:"transform 0.2s ease"},statePickerArrowOpen:{transform:"rotateZ(0)"},statePickerBody:{flex:1,overflow:"hidden"},statePickerStamp:{display:"flex"},statePickerCornerIcon:{fontSize:13,marginLeft:7},statePickerPopover:{position:"absolute",left:0,bottom:"100%",pointerEvents:"auto",width:"100%",color:y.colors.BLACK},statePickerPopoverAnimation:{animationName:y.animations.popUp,animationDuration:"0.2s"},statePickerPopoverExtended:(u={display:"grid",gridTemplateColumns:"50% 50%",alignItems:"end",width:"200%"},u["@media "+y.MEDIA.SMALLER_THAN_TABLET]={display:"block",width:"100%"},u)}),i))||o)||o);t.default=I},2169:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,l,u;var c=r(6);var f=r(2);var p=r(0);var d=_(p);var h=r(5);var v=r(3);var y=r(10);var m=r(1);var b=r(72);var E=r(2170);var g=O(E);var S=r(2171);var w=O(S);function O(e){return e&&e.__esModule?e:{default:e}}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=(n=(0,h.connect)(function(e){var t=e.spaceID,r=e.userCanEdit;return{spaceID:t,userCanEdit:r}}),o=y.Connectors.database(function(e){var t=e.spaceID,r=e.userCanEdit;return{drafts:r?v.Draft.queryBySpace(t).where("closedAt",null).setOptions({waitFetched:false}):null}}),a=m.Skeleton.createSkeletonProvider(function(e){return e.userCanEdit&&!e.draftsFetched}),i=m.Skeleton.connectToSkeleton(),n(s=o(s=a(s=i(s=(u=l=function(e){x(t,e);function t(){T(this,t);return L(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=this.props,n=r.activeDraft,o=r.activeRevision,a=r.onOpenHistory,i=r.openHistory,s=r.isLoading;var l=s||!this.props.drafts?(0,c.OrderedMap)():this.props.drafts;var u=t.STYLES;return d.createElement(m.View,{styles:[u.stateList,s&&u.loading]},d.createElement(m.View,{styles:[u.stateListScrollable]},l.toArray().sort(function(e,t){return t.lastModifiedAt-e.lastModifiedAt}).map(function(e){return d.createElement(g.default,{key:e.uid,draft:e,isActive:Boolean(n&&n.uid===e.uid),activeRevision:o,onOpenHistory:a,isOpen:i&&i.draft&&i.draft.uid===e.uid})})),d.createElement(w.default,{isActive:!n,activeRevision:o,onOpenHistory:a,isOpen:i&&!i.draft}))};return t}(d.Component),l.STYLES=f.StyleSheet.create({stateList:{position:"relative",border:"1px solid "+m.colors.GREY_LIGHTER,borderLeft:0,borderBottom:0,borderRadius:m.boxes.RADIUS_NORMAL+"px "+m.boxes.RADIUS_NORMAL+"px 0 0",backgroundColor:"#fff",boxShadow:m.boxes.SHADOW_HIGH,overflow:"hidden",":after":{content:'" "',position:"absolute",left:0,bottom:b.layout.CONTROLSBAR_HEIGHT,height:1,width:"100%",backgroundColor:m.colors.GREY_LIGHTER}},loading:{pointerEvents:"none"},stateListScrollable:{maxHeight:3.5*b.layout.CONTROLSBAR_HEIGHT,overflowY:"auto"}}),u))||s)||s)||s)||s);t.default=R},2170:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n;var o=r(0);var a=v(o);var i=r(12);r(3);var s=r(14);var l=r(1);var u=r(19);var c=r(840);var f=h(c);var p=r(841);var d=h(p);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(0,u.contentRoutingConnect)(n=function(e){b(t,e);function t(){var r,n,o;y(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=m(this,e.call.apply(e,[this].concat(i))),n),n.onClick=function(){var e=n.props,t=e.draft,r=e.navigate;r({toDraft:t.uid,toRootPage:true})},n.onOpenHistory=function(e){e.stopPropagation();var t=n.props,r=t.draft,o=t.onOpenHistory;o({baseID:r.revisionCurrent,draft:r})},r),m(n,o)}t.prototype.render=function e(){var t=this.props,r=t.draft,n=t.activeRevision,o=t.isActive,u=t.isOpen;var c=Boolean(o&&n&&n.uid!==r.revisionCurrent);var p=o&&!c;return a.createElement(f.default,{styles:[!p&&f.default.STYLES.clickable,p&&f.default.STYLES.active,u&&f.default.STYLES.open]},a.createElement(f.default.Left,{onClick:this.onClick},a.createElement(f.default.Avatar,null,a.createElement(s.UserAvatar,{withTooltip:false,userID:r.createdBy,styles:[s.UserAvatar.STYLES.sizeSM]})),a.createElement(f.default.Details,null,a.createElement(f.default.DetailsHeader,null,a.createElement(l.Badge,{styles:[l.Badge.STYLES.warn]},"Draft"),a.createElement(f.default.DetailsTitle,null,r.title)),a.createElement(f.default.DetailsStamp,null,"Last modified"," ",a.createElement(i.FormattedRelative,{value:r.lastModifiedAt})))),a.createElement(f.default.Right,null,a.createElement(d.default,{isActive:c,onClick:this.onOpenHistory})))};return t}(a.Component))||n;t.default=E},2171:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var i=r(0);var s=E(i);var l=r(12);var u=r(5);var c=r(3);var f=r(10);var p=r(1);var d=r(19);var h=r(840);var v=b(h);var y=r(841);var m=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=(n=(0,u.connect)(function(e){var t=e.space;return{space:t}}),o=f.Connectors.database(function(e){var t=e.space;return{revision:c.Revision.queryByID({spaceID:t.uid,revisionID:t.primaryRevision})}}),n(a=o(a=(0,d.contentRoutingConnect)(a=function(e){w(t,e);function t(){var r,n,o;g(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=S(this,e.call.apply(e,[this].concat(i))),n),n.onClick=function(){var e=n.props.navigate;e({toPrimary:true,toRootPage:true})},n.onOpenHistory=function(e){e.stopPropagation();var t=n.props,r=t.revision,o=t.onOpenHistory;o({baseID:r.uid})},r),S(n,o)}t.prototype.render=function e(){var t=this.props,r=t.revision,n=t.isActive,o=t.activeRevision,a=t.isOpen;var i=Boolean(n&&o&&o.uid!==r.uid);var u=n&&!i;return s.createElement(v.default,{styles:[!u&&v.default.STYLES.clickable,u&&v.default.STYLES.active,a&&v.default.STYLES.open]},s.createElement(v.default.Left,{onClick:this.onClick},s.createElement(v.default.Avatar,null),s.createElement(v.default.Details,null,s.createElement(v.default.DetailsHeader,null,s.createElement(p.Badge,{styles:[p.Badge.STYLES.success]},"Published")),s.createElement(v.default.DetailsStamp,null,"Last modified"," ",s.createElement(l.FormattedRelative,{value:r.createdAt})))),s.createElement(v.default.Right,null,s.createElement(m.default,{isActive:i,onClick:this.onOpenHistory})))};return t}(s.Component))||a)||a)||a);t.default=O},2172:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(2173);Object.defineProperty(t,"default",{enumerable:true,get:function e(){return o(n).default}});function o(e){return e&&e.__esModule?e:{default:e}}},2173:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,i,s,l,u,c,f,p,d,h;var v=r(0);var y=R(v);var m=r(5);var b=r(2);var E=r(3);var g=r(1);var S=r(7);var w=r(72);var O=r(2174);var _=x(O);var T=r(2177);var L=x(T);function x(e){return e&&e.__esModule?e:{default:e}}function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function A(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=(o=(0,m.connect)(function(e,t){var r=e.database,n=e.spaceID;var o=t.baseID,a=t.max,i=t.draft;return{revisionIDs:E.Revisioning.walk({baseID:o,max:a,getRevision:function e(t){return r.getDocument(E.Revision.queryByID({spaceID:n,revisionID:t}))},shouldStop:function e(t){return i&&i.revisionInitial===t}})}}),o(a=(s=i=function(e){A(t,e);function t(){I(this,t);return C(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.revisionIDs,a=n.max,i=n.draft,s=n.activeRevision;var l=o.last()===E.Revisioning.walk.END_ENTRY;var u=l?o.butLast():o;return y.createElement(g.View,{styles:r.historyList},y.createElement(L.default,{revisionIDs:u,activeRevisionID:s&&s.uid,isDraft:Boolean(i)}),u.map(function(e){return y.createElement(_.default,{key:e,revisionID:e,draft:i,isActive:s&&s.uid===e})}).toArray(),!l&&Array.from({length:a-o.size}).map(function(e,t){return y.createElement(_.default.Placeholder,{key:t})}))};return t}(y.Component),i.STYLES=b.StyleSheet.create({historyList:{position:"relative"}}),s))||a);var k=(u=l=function(e){A(t,e);function t(){I(this,t);return C(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.onCloseHistory,a=n.draft;return y.createElement(g.View,{styles:r.mobileHeader},y.createElement(g.View,{role:"button",tabIndex:0,styles:[r.mobileHeaderBack],onClick:o},y.createElement(S.IconChevronLeft,null)),y.createElement(g.View,{styles:r.mobileHeaderTitle},a?y.createElement(y.Fragment,null,y.createElement(g.Badge,{styles:[g.Badge.STYLES.warn]},"Draft"),y.createElement(g.Text.UIH400,{styles:r.mobileHeaderTitleText},a.title)):y.createElement(g.Badge,{styles:[g.Badge.STYLES.success]},"Published")),y.createElement(g.View,{styles:r.mobileHeaderHistory},y.createElement(S.IconHistory,null)))};return t}(y.Component),l.STYLES=b.StyleSheet.create({mobileHeader:(c={display:"flex",height:w.layout.CONTROLSBAR_HEIGHT,alignItems:"center",borderBottom:"1px solid "+g.colors.GREY_LIGHTER},c["@media "+g.MEDIA.TABLET]={display:"none"},c),mobileHeaderBack:{cursor:"pointer",flex:"0 0 auto",height:40,width:40,margin:g.spacing.S100,fontSize:18,color:g.colors.GREY_BASE,display:"flex",justifyContent:"center",alignItems:"center"},mobileHeaderTitle:{flex:"1 1 auto",display:"flex",alignItems:"center",overflow:"hidden"},mobileHeaderTitleText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",margin:g.spacing.S100},mobileHeaderHistory:{fontSize:18,color:g.colors.GREY_BASE,margin:g.spacing.S200,marginLeft:"auto"}}),u);var D=10;var B=(p=f=function(e){A(t,e);function t(){var r,n,o;I(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=C(this,e.call.apply(e,[this].concat(i))),n),n.state={max:D},n.onShowMore=function(){n.setState(function(e){var t=e.max;return{max:t+D}})},r),C(n,o)}t.prototype.componentWillReceiveProps=function e(t){var r=this.props,n=r.baseID,o=r.draft;n===t.baseID&&o===t.draft||this.setState({max:D})};t.prototype.componentDidUpdate=function e(t){var r=this.props,n=r.baseID,o=r.draft;n===t.baseID&&o===t.draft||(this.scrollable.scrollTop=0)};t.prototype.render=function e(){var r=this;var o=t.STYLES;var a=this.props,i=a.draft,s=a.onCloseHistory;var l=this.state.max;return y.createElement(g.InfiniteScroll,{onTrigger:this.onShowMore,styles:[o.historyListPager]},y.createElement(k,{draft:i,onCloseHistory:s}),y.createElement(g.View,{styles:o.historyListPagerScrollable,ref:function e(t){r.scrollable=t}},y.createElement(P,n({},this.props,{max:l})),y.createElement(g.View,{styles:o.historyListPagerEnd},y.createElement(g.Text.TextH300,null,i?"End of draft history":"End of history"))))};return t}(y.Component),f.STYLES=b.StyleSheet.create({historyListPager:(d={display:"flex",flexDirection:"column",minHeight:"100%",border:"1px solid "+g.colors.GREY_LIGHTER,borderBottom:0,borderTopRightRadius:g.boxes.RADIUS_NORMAL,backgroundColor:"#fff",boxShadow:g.boxes.SHADOW_HIGH,zIndex:10,marginLeft:-1},d["@media "+g.MEDIA.SMALLER_THAN_TABLET]={position:"absolute",zIndex:1,left:0,bottom:0,width:"100%",borderTopLeftRadius:g.boxes.RADIUS_NORMAL,marginLeft:0},d),historyListPagerScrollable:(h={flex:1,display:"flex",flexDirection:"column",height:"100%",maxHeight:4.5*w.layout.CONTROLSBAR_HEIGHT,overflowY:"auto"},h["@media "+g.MEDIA.SMALLER_THAN_TABLET]={maxHeight:3.5*w.layout.CONTROLSBAR_HEIGHT},h),historyListPagerEnd:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:g.colors.GREY_BASE,borderTop:"1px solid "+g.colors.GREY_LIGHTER,marginTop:-1,minHeight:w.layout.CONTROLSBAR_HEIGHT,position:"relative",zIndex:1}}),p);t.default=B},2174:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,i,s,l,u,c,f;var p=r(0);var d=x(p);var h=r(5);var v=r(12);var y=r(2);var m=r(3);var b=r(10);var E=r(14);var g=r(1);var S=r(7);var w=r(19);var O=r(72);var _=r(2175);var T=L(_);function L(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=(a=o=function(e){C(t,e);function t(){R(this,t);return I(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=P.STYLES;var n=t.STYLES;return d.createElement(g.View,{styles:[r.historyListItem]},d.createElement(g.View,{styles:[r.avatar,n.placeholder]},d.createElement(E.UserAvatar.Placeholder,null)),d.createElement(g.View,{styles:r.details},d.createElement(g.View,{styles:r.detailsTitle},d.createElement(g.Text.TextH300,{placeholder:true,styles:n.placeholderText},g.Text.transformStringToPlaceholder("Lorem ipsum dolor sit amet"))),d.createElement(g.View,{styles:r.detailsStamp},d.createElement(g.Text.TextH300,{placeholder:true,styles:n.placeholderText},"Lea - Nov 21, 2017"))))};return t}(d.Component),o.STYLES=y.StyleSheet.create({placeholder:n({},g.animations.placeholder)}),a);var P=(i=(0,h.connect)(function(e){var t=e.spaceID;return{spaceID:t}}),s=b.Connectors.database(function(e){var t=e.spaceID,r=e.revisionID;return{revision:m.Revision.queryByID({spaceID:t,revisionID:r}).setOptions({waitFetched:false})}}),l=b.Connectors.database(function(e){var t=e.revision;if(null==t)return{};return{user:m.User.queryByID(t.createdBy).setOptions({waitFetched:false})}}),i(u=s(u=l(u=(0,w.contentRoutingConnect)(u=(f=c=function(e){C(t,e);function t(){var r,n,o;R(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=I(this,e.call.apply(e,[this].concat(i))),n),n.navigateToRevision=function(e){var t=n.props,r=t.navigate,o=t.draft;r(o?{toDraft:o.uid,toRevision:e}:{toPrimary:true,toRevision:e})},n.onClick=function(){var e=n.props.revision;e&&n.navigateToRevision(e.uid)},n.onClickRollback=function(e){var t=n.props.revision;e.preventDefault();e.stopPropagation();t&&t.rollbackOf&&n.navigateToRevision(t.rollbackOf)},r),I(n,o)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.revision,a=n.user,i=n.isActive;if(!o||!a)return d.createElement(A,null);return d.createElement(g.View,{role:"button",tabIndex:0,styles:[r.historyListItem,!i&&r.clickable,i&&r.active],onClick:this.onClick},d.createElement(g.View,{styles:r.avatar},d.createElement(E.UserAvatar,{withTooltip:false,user:a,styles:[E.UserAvatar.STYLES.sizeSM]})),d.createElement(g.View,{styles:[r.details]},d.createElement(T.default,{revision:o}),d.createElement(g.View,{styles:[r.meta]},o.isRollback&&d.createElement(g.Badge,{onClick:this.onClickRollback,styles:[g.Badge.STYLES.primary,r.statusBadge,r.statusBadgeClickable],icon:d.createElement(S.IconArrowUp,null)},"Restored"),o.isMerge&&d.createElement(g.Badge,{styles:[g.Badge.STYLES.primary,r.statusBadge],icon:d.createElement(S.IconCornerLeftUp,null)},"Merged"),d.createElement(g.Text.TextH300,{styles:r.detailsStamp},a.shortDisplayName," -"," ",d.createElement(v.FormattedDate,{value:o.createdAt,year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric"})))))};return t}(d.Component),c.Placeholder=A,c.STYLES=y.StyleSheet.create({historyListItem:{display:"flex",alignItems:"center",height:O.layout.CONTROLSBAR_HEIGHT,whiteSpace:"nowrap",borderBottom:"1px solid "+g.colors.GREY_LIGHTER,paddingRight:O.layout.CONTROLSBAR_HEIGHT,":last-child":{borderBottom:0}},clickable:{cursor:"pointer",":hover":{backgroundColor:g.colors.GREY_LIGHTEST}},active:{boxShadow:"inset 4px 0 0 "+g.colors.BLUE_BASE},avatar:{flexShrink:0,margin:(24+2*g.spacing.S200-E.UserAvatar.AVATAR_SIZE.sm)/2},details:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},meta:{display:"flex",alignItems:"center"},detailsStamp:{color:g.colors.GREY_BASE,lineHeight:"20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},statusBadge:{marginRight:g.spacing.S100},statusBadgeClickable:{cursor:"pointer",":hover":{backgroundColor:g.colors.BLUE_LIGHT}}}),f))||u)||u)||u)||u);t.default=P},2175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r(0);var l=h(s);var u=r(5);var c=r(2);r(3);var f=r(1);var p=r(7);var d=r(2176);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(n=(0,u.connect)(),n(o=(i=a=function(e){m(t,e);function t(r){v(this,t);var n=y(this,e.call(this,r));n.onChange=function(e){n.setState({message:e.target.value})};n.onFocus=function(){n.autosizeInput.select()};n.onKeyDown=function(e){var t=13;e.keyCode===t&&n.autosizeInput.blur()};n.onSubmit=function(){var e=n.props,t=e.revision,r=e.dispatch;var o=n.state.message;o!==t.message&&r((0,d.updateRevisionMessage)(t.merge({message:o})))};n.onClick=function(e){e.stopPropagation()};n.onMouseEnter=function(){n.setState({isHover:true})};n.onMouseLeave=function(){n.setState({isHover:false})};n.state={message:r.revision.message,isHover:false};return n}t.prototype.componentWillReceiveProps=function e(t){this.setState({message:t.revision.message})};t.prototype.render=function e(){var r=this;var n=t.STYLES;var o=this.state,a=o.isHover,i=o.message;return l.createElement(f.View,{role:"presentation",onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,styles:[n.messageInput]},l.createElement(p.IconPencil,{styles:[n.messageInputIcon,a&&n.messageInputIconHover]}),l.createElement(f.Text.TextH300,null,l.createElement(f.AutosizeInput,{ref:function e(t){r.autosizeInput=t},onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onSubmit,onKeyDown:this.onKeyDown,value:i,placeholder:"Describe what changed",className:(0,c.css)(n.messageInputAutosize),inputClassName:(0,c.css)(n.messageInputInput)})))};return t}(l.Component),a.STYLES=c.StyleSheet.create({messageInput:{display:"inline-block",alignSelf:"flex-start",overflow:"hidden",borderBottom:"1px solid transparent"},messageInputAutosize:{display:"inline-block"},messageInputInput:{cursor:"text",font:"inherit",color:f.colors.BLACK,border:0,padding:0,background:"transparent",maxWidth:"100%","::placeholder":{color:f.colors.GREY_BASE},":focus":{cursor:"auto"}},messageInputIcon:{transform:"rotateY(180deg)",color:f.colors.GREY_BASE,fontSize:14,marginRight:4},messageInputIconHover:{color:f.colors.BLACK}}),i))||o);t.default=b},2176:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e){return function(t,r,n){var o=r(),a=o.spaceID;return n.database.commit(e.toUpdate(a))}}t.updateRevisionMessage=n},2177:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=c(a);var s=r(2);var l=r(1);var u=r(72);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(o=n=function(e){d(t,e);function t(){f(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.revisionIDs,a=n.activeRevisionID,l=n.isDraft;var u=l?r.historyTimelineItemActiveDraft:r.historyTimelineItemActive;return i.createElement("div",{className:(0,s.css)(r.historyTimeline)},o.map(function(e){return i.createElement("div",{key:e,className:(0,s.css)(r.historyTimelineItem,e===a&&u)})}).toArray())};return t}(i.Component),n.STYLES=s.StyleSheet.create({historyTimeline:{position:"absolute",top:0,right:0,pointerEvents:"none"},historyTimelineItem:{position:"relative",width:u.layout.CONTROLSBAR_HEIGHT,height:u.layout.CONTROLSBAR_HEIGHT,":before":{content:'" "',position:"absolute",zIndex:1,top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"100%",width:10,height:10,backgroundColor:l.colors.GREY_LIGHTER},":after":{content:'" "',position:"absolute",zIndex:0,top:0,left:"50%",transform:"translateX(-50%)",width:1,height:"100%",backgroundColor:l.colors.GREY_LIGHTER},":first-child:after":{top:"50%",height:"50%"},":last-child:after":{height:"50%"}},historyTimelineItemActive:{":before":{backgroundColor:l.colors.GREEN_BASE}},historyTimelineItemActiveDraft:{":before":{backgroundColor:l.colors.ORANGE_LIGHT}}}),o);t.default=h},2178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(48);var o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return r(843)})},modules:["./GitHubSyncIndicator"],webpack:function e(){return[843]},loading:function e(){return null}});t.default=i},2179:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=i(n);var a=r(1);function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){u(t,e);function t(){var r,n,o;s(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(r=(n=l(this,e.call.apply(e,[this].concat(i))),n),n.onClose=function(){n.props.onClose()},r),l(n,o)}t.prototype.render=function e(){var t=this.props.status;var r=t.progress;var n=t.hasError||t.hasTimeout;var i=void 0;i="import"==t.type?"New content is currently being imported from GitHub.":"export"==t.type?"Your changes are currently being exported to GitHub.":"Your legacy content is currently being imported.";var s=t.type;"migration"==t.type&&(s="migrat");return o.createElement(a.ColorPalette.Brand,null,o.createElement(a.Popup,{onClose:this.onClose},o.createElement(a.Modal,{size:a.Modal.SIZES.medium},o.createElement(a.Modal.Header,null,o.createElement(a.Modal.Title,null,n?"Error while synchronizing":"Synchronizing with GitHub ("+r.toFixed(0)+"%)")),o.createElement(a.Modal.Body,null,!n&&o.createElement(o.Fragment,null,o.createElement(a.View,{styles:[a.View.MARGIN.S200Bottom]},o.createElement(a.Text.TextH400,null,i," It may takes a few minutes."))),t.hasError&&o.createElement(o.Fragment,null,o.createElement(a.Alert,{styles:[a.Alert.STYLES.danger]},o.createElement(a.Text.TextH400,null,t.error)),o.createElement(a.View,{styles:[a.View.MARGIN.S200Bottom]},o.createElement(a.Text.TextH400,null,"An error occured during the synchronization"))),!t.hasError&&t.hasTimeout&&o.createElement(a.View,{styles:[a.View.MARGIN.S200Bottom]},o.createElement(a.Text.TextH400,null,"An error occured while "+s+"ing your content.")),n&&o.createElement(a.View,null,o.createElement(a.Text.TextH400,null,"Our team has already been notified."," ",o.createElement(a.Link,{href:"https://www.gitbook.com",target:"_blank"},"Contact us")," ","for more details."))),o.createElement(a.Modal.Footer,null,o.createElement(a.View,null,o.createElement(a.Button,{kind:"cancel",onClick:this.onClose},"Close"))))))};return t}(o.Component);t.default=c},227:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UndoRedo=t.SaveDraftButton=t.RollbackButton=t.PublishDraftButton=t.PublishButton=t.EditButton=t.CloseDraftButton=t.ChangesSwitch=t.CancelEditButton=t.CreateDraftButton=void 0;var n=r(2153);var o=O(n);var a=r(2156);var i=O(a);var s=r(2157);var l=O(s);var u=r(2159);var c=O(u);var f=r(2160);var p=O(f);var d=r(2161);var h=O(d);var v=r(2162);var y=O(v);var m=r(2163);var b=O(m);var E=r(2164);var g=O(E);var S=r(2165);var w=O(S);function O(e){return e&&e.__esModule?e:{default:e}}t.CreateDraftButton=o.default;t.CancelEditButton=i.default;t.ChangesSwitch=l.default;t.CloseDraftButton=c.default;t.EditButton=p.default;t.PublishButton=h.default;t.PublishDraftButton=y.default;t.RollbackButton=b.default;t.SaveDraftButton=g.default;t.UndoRedo=w.default},467:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,i;var s=r(0);var l=b(s);var u=r(2);r(3);var c=r(1);var f=r(183);var p=m(f);var d=r(2167);var h=m(d);var v=r(842);var y=m(v);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(a=o=function(e){S(t,e);function t(){var r,o,a;E(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(r=(o=g(this,e.call.apply(e,[this].concat(s))),o),o.renderWithStatePicker=function(e){var r=t.STYLES;var a=o.props,i=a.revision,s=a.draft,u=a.children;return l.createElement(p.default,{withStatePickerOpen:e.isOpen},l.createElement(p.default.Left,null,l.createElement(h.default,n({revision:i,draft:s},e))),l.createElement(p.default.Right,{styles:[e.isOpen&&r.openBarRight]},u))},r),g(o,a)}t.prototype.render=function e(){return l.createElement(y.default.Consumer,null,this.renderWithStatePicker)};return t}(l.Component),o.defaultProps={draft:null},o.STYLES=u.StyleSheet.create({openBarRight:(i={},i["@media "+c.MEDIA.SMALLER_THAN_TABLET]={display:"none"},i)}),a);t.default=w},801:function(e,t,r){var n;var o;var a;false;e.exports=r(1892)()},802:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(t){n(this,e);var r=[];t=t||{};this.subscribe=function(e){r.push(e)};this.unsubscribe=function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)};this.update=function(e){e&&e(t);r.forEach(function(e){return e(t)})}};t.default=o;e.exports=t["default"]},840:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,l,u,c,f,p,d,h,v,y,m,b;var E=r(0);var g=T(E);var S=r(2);var w=r(14);var O=r(1);var _=r(72);function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function R(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=(o=n=function(e){R(t,e);function t(){L(this,t);return x(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.children;return g.createElement(O.View,{styles:[r.stateListItemAvatar]},n)};return t}(g.Component),n.STYLES=S.StyleSheet.create({stateListItemAvatar:{flexShrink:0,margin:(24+2*O.spacing.S200-w.UserAvatar.AVATAR_SIZE.md)/2}}),o);var C=(i=a=function(e){R(t,e);function t(){L(this,t);return x(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.children;return g.createElement(O.View,{styles:[r.stateListItemDetails]},n)};return t}(g.Component),a.STYLES=S.StyleSheet.create({stateListItemDetails:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden",padding:O.spacing.S100,paddingLeft:0}}),i);var A=(l=s=function(e){R(t,e);function t(){L(this,t);return x(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.children;return g.createElement(O.View,{styles:r.stateListItemDetailsHeader},n)};return t}(g.Component),s.STYLES=S.StyleSheet.create({stateListItemDetailsHeader:{display:"flex",justifyContent:"flex-start",alignItems:"center"}}),l);var P=(c=u=function(e){R(t,e);function t(){L(this,t);return x(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.children;return g.createElement(O.Text.UIH400,{styles:r.stateListItemDetailsTitle},n)};return t}(g.Component),u.STYLES=S.StyleSheet.create({stateListItemDetailsTitle:{flex:"1 1 auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",paddingLeft:O.spacing.S100}}),c);var k=(p=f=function(e){R(t,e);function t(){L(this,t);return x(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.children;return g.createElement(O.Text.TextH300,{styles:r.stateListItemDetailsStamp},n)};return t}(g.Component),f.STYLES=S.StyleSheet.create({stateListItemDetailsStamp:{color:O.colors.GREY_BASE,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),p);var D=(h=d=function(e){R(t,e);function t(){L(this,t);return x(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.onClick,a=n.children;return g.createElement(O.View,{role:"button",tabIndex:0,onClick:o,styles:r.stateListItemLeft},a)};return t}(g.Component),d.STYLES=S.StyleSheet.create({stateListItemLeft:{flex:1,display:"flex",alignItems:"center",width:"100%",overflow:"hidden"}}),h);var B=(y=v=function(e){R(t,e);function t(){L(this,t);return x(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.children;return g.createElement(O.View,{styles:r.stateListItemRight},n)};return t}(g.Component),v.STYLES=S.StyleSheet.create({stateListItemRight:{display:"flex",alignItems:"center"}}),y);var M=(b=m=function(e){R(t,e);function t(){L(this,t);return x(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.styles,a=n.children;return g.createElement(O.View,{styles:[r.stateListItem,o]},a)};return t}(g.Component),m.Avatar=I,m.Details=C,m.DetailsHeader=A,m.DetailsTitle=P,m.DetailsStamp=k,m.Left=D,m.Right=B,m.STYLES=S.StyleSheet.create({stateListItem:{display:"flex",height:_.layout.CONTROLSBAR_HEIGHT,borderBottom:"1px solid "+O.colors.GREY_LIGHTER,boxShadow:"inset 1px 0 0 "+O.colors.GREY_LIGHTER,":last-child":{borderBottom:0}},clickable:{cursor:"pointer",":hover":{backgroundColor:O.colors.GREY_LIGHTEST}},active:{boxShadow:"inset 4px 0 0 "+O.colors.BLUE_BASE},open:{backgroundColor:O.colors.GREY_LIGHTEST}}),b);t.default=M},841:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var i=c(a);var s=r(2);var l=r(1);var u=r(7);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(o=n=function(e){d(t,e);function t(){var r,n,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=p(this,e.call.apply(e,[this].concat(i))),n),n.state={isHover:false},n.onMouseEnter=function(){n.setState({isHover:true})},n.onMouseLeave=function(){n.setState({isHover:false})},r),p(n,o)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.isActive,a=n.onClick;var s=this.state.isHover;return i.createElement(l.View,{role:"button",tabIndex:0,onClick:a,styles:r.historyIcon,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.createElement(u.IconHistory,{styles:[r.historyIconHistory,o&&r.historyIconHistoryActive]}),i.createElement(u.IconChevronRight,{styles:[r.historyIconChevron,s&&r.historyIconChevronHover]}))};return t}(i.Component),n.STYLES=s.StyleSheet.create({historyIcon:{cursor:"pointer",paddingLeft:l.spacing.S200,display:"flex",alignItems:"center",height:"100%",width:60,color:l.colors.GREY_BASE},historyIconHistory:{fontSize:18},historyIconHistoryActive:{color:l.colors.BLUE_BASE},historyIconChevron:{fontSize:24,opacity:.4},historyIconChevronHover:{opacity:1}}),o);t.default=h},842:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(178);var o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)({isOpen:false,openedHistory:null,onToggle:function e(){},onToggleHistory:function e(){}});t.default=i},843:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r(0);var l=m(s);var u=r(3);var c=r(10);var f=r(7);var p=r(1);var d=r(2);var h=r(2179);var v=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(n=c.Connectors.database(function(e){var t=e.space;return{statuses:u.GitHubSyncStatus.queryBySpace(t.uid)}}),n(o=(i=a=function(e){g(t,e);function t(){var r,n,o;b(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=E(this,e.call.apply(e,[this].concat(i))),n),n.state={isPopupOpen:false},n.onPopupClosed=function(){n.setState({isPopupOpen:false})},n.onOpen=function(){n.setState({isPopupOpen:true})},r),E(n,o)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.statuses;var o=this.state.isPopupOpen;var a=n.first();if(!a)return null;var i=a.hasError||a.hasTimeout;return l.createElement(l.Fragment,null,l.createElement(p.View,{onClick:this.onOpen,styles:[r.githubSync]},!i&&l.createElement(p.Loading,null),i?l.createElement(p.View,{styles:[r.githubSyncText]},l.createElement(f.IconAlert,null)," Github Sync Error"):l.createElement(p.View,{styles:[r.githubSyncText]},"Github Syncing (",a.progress.toFixed(),"%)"),l.createElement(p.View,{styles:[r.separator]})),o&&l.createElement(v.default,{status:a,onClose:this.onPopupClosed}))};return t}(l.Component),a.STYLES=d.StyleSheet.create({githubSync:{fontSize:12,display:"flex",alignItems:"center",cursor:"pointer"},githubSyncText:{marginLeft:p.spacing.S100},separator:{margin:"0 "+p.spacing.S200+"px",height:"100%",border:"solid 0.5px "+p.colors.BLUE_LIGHT}}),i))||o);t.default=S}});