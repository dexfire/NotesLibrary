webpackJsonp([35],{102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PLANS=t.upcomingInvoiceQuery=t.invoicesQuery=t.invoiceQuery=t.CardForm=t.LabelGroup=void 0;var r=n(2709);var o=v(r);var a=n(2710);var i=v(a);var l=n(2711);var u=v(l);var c=n(2712);var s=v(c);var p=n(2713);var f=v(p);var d=n(2714);var m=v(d);function v(e){return e&&e.__esModule?e:{default:e}}t.LabelGroup=o.default;t.CardForm=i.default;t.invoiceQuery=u.default;t.invoicesQuery=s.default;t.upcomingInvoiceQuery=f.default;t.PLANS=m.default},2699:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n(0);var a=h(o);var i=n(48);var l=y(i);var u=n(505);var c=y(u);var s=n(13);var p=n(1);var f=n(196);var d=y(f);var m=n(327);var v=y(m);function y(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(0,l.default)({loader:function e(){return Promise.resolve().then(function(){return n(938)})},modules:["./Billing"],webpack:function e(){return[938]},loading:function e(){return null}});var C=(0,l.default)({loader:function e(){return Promise.resolve().then(function(){return n(941)})},modules:["./RoutePrintInvoice"],webpack:function e(){return[941]},loading:function e(){return null}});var P=function(e){E(t,e);function t(){g(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this;var n=this.props,o=n.match,i=n.org,l=n.membership;return a.createElement(s.Switch,null,a.createElement(s.Route,{exact:true,path:o.url,render:function e(){return a.createElement(v.default,{org:i,membership:l,active:d.default.TABS.BILLING},a.createElement(p.TabsPage.Header,null,a.createElement(p.TabsPage.Header.Desc,null,"Choose your plan, and manage your subscription.")),a.createElement(c.default,null,a.createElement(w,{org:i})))}}),a.createElement(s.Route,{exact:true,path:o.url+"/:invoiceID",render:function e(n){return a.createElement(C,r({},t.props,n))}}))};return t}(a.Component);t.default=P},2700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n(0);var a=u(o);var i=n(17);var l=u(i);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){f(t,e);function t(e){s(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(!window.Stripe)throw new Error("Please load Stripe.js (https://js.stripe.com/v3/) on this page to use react-stripe-elements.");var r=n.props,o=r.apiKey,a=r.children,i=c(r,["apiKey","children"]);window.Stripe.__cachedInstances=window.Stripe.__cachedInstances||{};var l="key="+o+" options="+JSON.stringify(i);n._stripe=window.Stripe.__cachedInstances[l]||window.Stripe(o,i);window.Stripe.__cachedInstances[l]=n._stripe;n._didWarn=false;return n}r(t,[{key:"getChildContext",value:function e(){return{stripe:this._stripe}}},{key:"componentWillReceiveProps",value:function e(t){if(!this._didWarn&&this.props.apiKey!==t.apiKey&&window.console&&window.console.error){this._didWarn=true;console.error("StripeProvider does not support changing the apiKey parameter.")}}},{key:"render",value:function e(){return a.default.Children.only(this.props.children)}}]);return t}(a.default.Component);d.propTypes={apiKey:l.default.string.isRequired,children:l.default.node};d.childContextTypes={stripe:l.default.object.isRequired};d.defaultProps={children:null};t.default=d},2701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var i=n(0);var l=s(i);var u=n(17);var c=s(u);function s(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function e(t){var n,i;var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s=u.withRef,v=void 0!==s&&s;return i=n=function(e){m(n,e);function n(e,t){f(this,n);if(!t||!t.registeredElements)throw new Error("It looks like you are trying to inject Stripe context outside of an Elements context.\nPlease be sure the component that calls createSource or createToken is within an <Elements> component.");var r=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));r.requireElement=function(e){var t=r.findElement(e);if(t)return t;throw new Error("You did not specify the type of Source or Token to create.\n        We could not infer which Element you want to use for this operation.")};r.findElement=function(e){var t=r.context.registeredElements||[];var n="auto"===e?t:t.filter(function(t){var n=t.type;return n===e});if(1===n.length)return n[0].element;if(n.length>1)throw new Error("You did not specify the type of Source or Token to create.\n        We could not infer which Element you want to use for this operation.");return null};r.wrappedCreateToken=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"object"===("undefined"===typeof e?"undefined":o(e))){var n=e.type,a=p(e,["type"]);var i="string"===typeof n?n:"auto";var l=r.requireElement(i);return r.context.stripe.createToken(l,a)}if("string"===typeof e)return r.context.stripe.createToken(e,t);throw new Error("Invalid options passed to createToken. Expected an object, got "+("undefined"===typeof e?"undefined":o(e))+".")};r.wrappedCreateSource=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&"object"===("undefined"===typeof e?"undefined":o(e))){var t=e.type,n=p(e,["type"]);var a="string"===typeof t?t:"auto";var i=r.findElement(a);if(i)return r.context.stripe.createSource(i,n);if("auto"!==a)return r.context.stripe.createSource(e);throw new Error("You did not specify the type of Source to create.\n          We also could not find any Elements in the current context.")}throw new Error("Invalid options passed to createSource. Expected an object, got "+("undefined"===typeof e?"undefined":o(e))+".")};return r}a(n,[{key:"getWrappedInstance",value:function e(){if(!v)throw new Error("To access the wrapped instance, the `{withRef: true}` option must be set when calling `injectStripe()`");return this.wrappedInstance}},{key:"stripeProps",value:function e(){return r({},this.context.stripe,{createToken:this.wrappedCreateToken,createSource:this.wrappedCreateSource})}},{key:"render",value:function e(){var n=this;return l.default.createElement(t,r({},this.props,{stripe:this.stripeProps(),ref:v?function(e){n.wrappedInstance=e}:null}))}}]);return n}(l.default.Component),n.contextTypes={stripe:c.default.object.isRequired,registeredElements:c.default.arrayOf(c.default.shape({element:c.default.object.isRequired,type:c.default.string.isRequired}))},n.displayName="InjectStripe("+(t.displayName||t.name||"Component")+")",i};t.default=v},2702:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n(0);var a=u(o);var i=n(17);var l=u(i);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){d(t,e);function t(e,n){p(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.handleRegisterElement=function(e,t){r.setState(function(n){return{registeredElements:[].concat(s(n.registeredElements),[{type:e,element:t}])}})};r.handleUnregisterElement=function(e){r.setState(function(t){return{registeredElements:t.registeredElements.filter(function(t){var n=t.element;return n!==e})}})};var o=r.props,a=o.children,i=c(o,["children"]);r._elements=r.context.stripe.elements(i);r.state={registeredElements:[]};return r}r(t,[{key:"getChildContext",value:function e(){return{elements:this._elements,registerElement:this.handleRegisterElement,unregisterElement:this.handleUnregisterElement,registeredElements:this.state.registeredElements}}},{key:"render",value:function e(){return a.default.Children.only(this.props.children)}}]);return t}(a.default.Component);m.childContextTypes={elements:l.default.object.isRequired,registerElement:l.default.func.isRequired,unregisterElement:l.default.func.isRequired,registeredElements:l.default.arrayOf(l.default.shape({type:l.default.string.isRequired,element:l.default.object.isRequired})).isRequired};m.contextTypes={stripe:l.default.object.isRequired};m.defaultProps={children:null};t.default=m},2703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n(0);var a=s(o);var i=n(17);var l=s(i);var u=n(939);var c=s(u);function s(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}var v=function e(){};var y=function e(t){var n=t.className,r=t.elementRef,o=t.onChange,a=t.onFocus,i=t.onBlur,l=t.onReady,u=m(t,["className","elementRef","onChange","onFocus","onBlur","onReady"]);return u};var h=function e(t){var n,o;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o=n=function(e){d(n,e);function n(e,r){p(this,n);var o=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,r));o.handleRef=function(e){o._ref=e};var a=y(o.props);o._element=o.context.elements.create(t,a);o._setupEventListeners();o._options=a;return o}r(n,[{key:"componentDidMount",value:function e(){this._element.mount(this._ref);i.sourceType&&this.context.registerElement(i.sourceType,this._element)}},{key:"componentWillReceiveProps",value:function e(t){var n=y(t);if(0!==Object.keys(n).length&&!(0,c.default)(n,this._options)){this._options=n;this._element.update(n)}}},{key:"componentWillUnmount",value:function e(){this._element.destroy();this.context.unregisterElement(this._element)}},{key:"_setupEventListeners",value:function e(){var t=this;this._element.on("ready",function(){t.props.elementRef(t._element);t.props.onReady()});this._element.on("change",function(e){t.props.onChange(e)});this._element.on("blur",function(){var e;return(e=t.props).onBlur.apply(e,arguments)});this._element.on("focus",function(){var e;return(e=t.props).onFocus.apply(e,arguments)})}},{key:"render",value:function e(){return a.default.createElement("div",{className:this.props.className,ref:this.handleRef})}}]);return n}(a.default.Component),n.propTypes={className:l.default.string,elementRef:l.default.func,onChange:l.default.func,onBlur:l.default.func,onFocus:l.default.func,onReady:l.default.func},n.defaultProps={className:"",elementRef:v,onChange:v,onBlur:v,onFocus:v,onReady:v},n.contextTypes={elements:l.default.object.isRequired,registerElement:l.default.func.isRequired,unregisterElement:l.default.func.isRequired},o};t.default=h},2704:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var a=n(0);var i=p(a);var l=n(17);var u=p(l);var c=n(939);var s=p(c);function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}var y=function e(){};var h=function e(t){var n=t.className,r=t.elementRef,o=t.onBlur,a=t.onClick,i=t.onFocus,l=t.onReady,u=t.paymentRequest,c=v(t,["className","elementRef","onBlur","onClick","onFocus","onReady","paymentRequest"]);return c};var g=function(e){m(t,e);function t(e,n){f(this,t);var o=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.handleRef=function(e){o._ref=e};var a=h(e);o._element=o.context.elements.create("paymentRequestButton",r({paymentRequest:e.paymentRequest},a));o._options=a;o._element.on("ready",function(){o.props.elementRef(o._element);o.props.onReady()});o._element.on("focus",function(){var e;return(e=o.props).onFocus.apply(e,arguments)});o._element.on("click",function(){var e;return(e=o.props).onClick.apply(e,arguments)});o._element.on("blur",function(){var e;return(e=o.props).onBlur.apply(e,arguments)});return o}o(t,[{key:"componentDidMount",value:function e(){this._element.mount(this._ref)}},{key:"componentWillReceiveProps",value:function e(t){this.props.paymentRequest!==t.paymentRequest&&console.warn("Unsupported prop change: paymentRequest is not a customizable property.");var n=h(t);if(0!==Object.keys(n).length&&!(0,s.default)(n,this._options)){this._options=n;this._element.update(n)}}},{key:"componentWillUnmount",value:function e(){this._element.destroy()}},{key:"render",value:function e(){return i.default.createElement("div",{className:this.props.className,ref:this.handleRef})}}]);return t}(i.default.Component);g.propTypes={className:u.default.string,elementRef:u.default.func,onBlur:u.default.func,onClick:u.default.func,onFocus:u.default.func,onReady:u.default.func,paymentRequest:u.default.shape({canMakePayment:u.default.func.isRequired,on:u.default.func.isRequired,show:u.default.func.isRequired}).isRequired};g.defaultProps={className:"",elementRef:y,onBlur:y,onClick:y,onFocus:y,onReady:y};g.contextTypes={elements:u.default.object.isRequired,registerElement:u.default.func.isRequired,unregisterElement:u.default.func.isRequired};t.default=g},2705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(6);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){i(t,e);function t(){o(this,t);return a(this,e.apply(this,arguments))}t.createFromResult=function e(n){var r=n.id,o=n.percent_off,a=n.amount_off;return new t({id:r,percentOff:o,amountOff:a})};return t}((0,r.Record)({id:"",percentOff:null,amountOff:null}));t.default=l},2706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(2707);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},2707:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=m(a);var l=n(13);var u=n(12);var c=n(2);var s=n(1);n(3);var p=n(7);var f=n(2708);var d=n(102);function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(o=r=function(e){h(t,e);function t(){v(this,t);return y(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.billingConfig,o=n.onSwitchPlan,a=n.isCollapsed,c=n.onToggle,m=n.upcomingInvoice,v=n.orgUsage,y=n.onUpcomingInvoicePopupDisplay;var h=t.STYLES;return i.createElement(s.Panel,null,i.createElement(s.Panel.Header,{onClick:a?c:null},i.createElement(s.Panel.Header.Left,null,i.createElement(s.Panel.Header.Title,null,"Plan"),a&&i.createElement(s.Panel.Header.Hint,null,d.PLANS[r.activePlan].title," ",m&&i.createElement(u.FormattedNumber,{value:m.total/100,style:"currency",currency:m.currency}))),i.createElement(s.Panel.Header.Right,null,!a&&i.createElement(s.Panel.Header.Hint,{styles:[h.info]},i.createElement(s.Link,{to:"/pricing",component:l.Link,styles:[h.pricingLink]},i.createElement(s.Button,{kind:"link",icon:i.createElement(p.IconInfoCircle,null)},"Learn more about pricing"))),i.createElement(s.Panel.Toggle,{isCollapsed:a}))),!a&&i.createElement(i.Fragment,null,i.createElement(s.Panel.Body,null,r.isLegacyPlan()&&i.createElement(s.Alert,{icon:i.createElement(p.IconInfoCircle,null),styles:[s.Alert.STYLES.info,h.alert]},"You're currently on a legacy plan.\n                                            You can migrate on a new plan as\n                                            soon as you want."),"free"===r.plan&&"free"!==r.activePlan&&i.createElement(s.Alert,{icon:i.createElement(p.IconInfoCircle,null),styles:[s.Alert.STYLES.info,h.alert]},"Your "+d.PLANS[r.activePlan].title+" subscription is still active. You will be downgraded to the Free plan at\n                                                the end of the billing period",m&&i.createElement("span",null," (",i.createElement(u.FormattedDate,{value:m.periodEnd,month:"short",day:"numeric",year:"numeric"}),")")),i.createElement(s.View,{styles:[h.plans]},i.createElement(f.PlanCardFree,{billingConfig:r,onSwitchPlan:o}),i.createElement(f.PlanCardStartup,{billingConfig:r,onSwitchPlan:o}),i.createElement(f.PlanCardBusiness,{billingConfig:r,onSwitchPlan:o}))),m&&i.createElement(s.Panel.Footer,{styles:[h.footer]},i.createElement(s.View,null,i.createElement(s.Text.TextH300,null,i.createElement(s.Badge,{styles:[s.Badge.STYLES.primary]},v.membersCount," USERS")," ","in your organization")),i.createElement(s.View,{styles:[h.upcomingInvoice],role:"button",tabIndex:0,onClick:y},i.createElement(s.View,null,i.createElement(s.Text.TextH300,null,"Upcoming Invoice -"," ",i.createElement(u.FormattedDate,{value:m.periodEnd,month:"short",day:"numeric",year:"numeric"}))),i.createElement(s.View,{styles:[h.price,s.View.MARGIN.S100Left]},i.createElement(s.Text.TextH500,null,i.createElement(u.FormattedNumber,{value:m.amountDue/100,style:"currency",currency:m.currency})))))))};return t}(i.Component),r.STYLES=c.StyleSheet.create({pricingLink:{textDecoration:"none"},footer:{color:s.colors.GREY_BASE},upcomingInvoice:{marginLeft:"auto",display:"flex",alignItems:"center",cursor:"pointer"},plans:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridGap:s.spacing.S200},info:{color:s.colors.BLUE_BASE,marginRight:s.spacing.S200},price:{color:s.colors.BLUE_BASE}}),o);t.default=g},2709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=c(a);var l=n(2);var u=n(1);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){s(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.label,o=n.content;var a=t.STYLES;return i.createElement(u.View,{styles:[a.element]},i.createElement(u.View,{styles:[a.label]},i.createElement(u.Text.InfoH200,null,r)),i.createElement(u.View,null,o))};return t}(i.Component),r.STYLES=l.StyleSheet.create({element:{display:"flex",flexDirection:"column"},label:{color:u.colors.GREY_BASE}}),o);t.default=d},2710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=s(a);var l=n(328);var u=n(2);var c=n(1);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=r=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.onSubmit,u=o.onChange;return i.createElement(c.Form,{ref:function e(t){n.form=t},onSubmit:a},i.createElement(c.View,{styles:[c.View.PADDING.S100,r.cardWrapper]},i.createElement(l.CardElement,{hidePostalCode:true,style:{base:{fontSize:"18px"}},onChange:u})),i.createElement(c.Form.Hint,{styles:[r.hint]},"Your credit card details are never stored on or even reach our servers. Payments and credit card data are handled by Stripe."))};return t}(i.Component),r.STYLES=u.StyleSheet.create({cardWrapper:{border:"1px solid "+c.colors.GREY_LIGHTER,borderRadius:4,background:"white"},hint:{marginBottom:0}}),o);t.default=m},2711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r="\n        query invoice($id: String!, $invoiceID: ID!) {\n          organization(id: $id) {\n            billing {\n              invoice(id: $invoiceID)  {\n                amountDue\n                subtotal\n                total\n                currency\n                coupon{\n                  id\n                  amountOff\n                  percentOff\n                }\n                date\n                periodStart\n                periodEnd\n                lines{\n                  proration\n                  currency\n                  description\n                  quantity\n                  amount\n                  startAt\n                  endAt\n                  plan\n                }\n              }\n            }\n          }\n        }\n        ";t.default=r},2712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r="\n        query invoices($id: String!) {\n          organization(id: $id) {\n            billing {\n              invoices {\n                id\n                amountDue\n                currency\n                periodStart\n                periodEnd\n              }\n            }\n          }\n        }\n        ";t.default=r},2713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r="\n        query upcomingInvoice($id: String!) {\n          organization(id: $id) {\n            billing {\n              upcomingInvoice {\n                amountDue\n                subtotal\n                total\n                currency\n                coupon{\n                  id\n                  amountOff\n                  percentOff\n                }\n                periodStart\n                periodEnd\n                lines{\n                  currency\n                  proration\n                  description\n                  quantity\n                  amount\n                  startAt\n                  endAt\n                  plan\n                }\n              }\n            }\n          }\n        }\n        ";t.default=r},2714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r={"overcharge-user":{title:"Overcharge Member"},"overcharge-space":{title:"Overcharge Space"},free:{title:"Free"},organization:{title:"Organization"},pro:{title:"Pro"},plus:{title:"Plus"},small:{title:"Startup"},medium:{title:"Business"},large:{title:"Enterprise"},v2_startup:{title:"Startup",priceInfo:"Per month - Starting at 5 users"},v2_business:{title:"Business",priceInfo:"Per month - Starting at 20 users"}};t.default=r},2715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(2716);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},2716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(0);var o=s(r);var a=n(1);var i=n(3);var l=n(2717);var u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.onToggle,r=t.isCollapsed,i=t.billingConfig,l=t.upcomingInvoice,c=t.onUpdateCardPopupDisplay,s=t.onCouponPopupDisplay;return o.createElement(a.Panel,null,o.createElement(a.Panel.Header,{onClick:r?n:null},o.createElement(a.Panel.Header.Left,null,o.createElement(a.Panel.Header.Title,null,"Payment method"),r&&i.card&&o.createElement(a.Panel.Header.Hint,null,i.card.brand," - **** ***** ****"," ",i.card.last4)),o.createElement(a.Panel.Header.Right,null,o.createElement(a.Panel.Toggle,{isCollapsed:r}))),!r&&o.createElement(o.Fragment,null,o.createElement(a.Panel.Body,null,o.createElement(u.default,{card:i.card,upcomingInvoice:l})),o.createElement(a.Panel.Footer,null,o.createElement(a.Panel.Footer.Controls,null,o.createElement(a.Button,{kind:"link",onClick:s},"Add coupon"),o.createElement(a.Button,{kind:"primary",onClick:c},"Update credit card")))))};return t}(o.Component);t.default=m},2717:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=P(a);var l=n(2);n(3);var u=n(1);var c=n(102);var s=n(2718);var p=C(s);var f=n(2719);var d=C(f);var m=n(2720);var v=C(m);var y=n(2721);var h=C(y);var g=n(2722);var b=C(g);var E=n(2723);var w=C(E);function C(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=(o=r=function(e){O(t,e);function t(){_(this,t);return S(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.card,o=n.upcomingInvoice;var a=t.STYLES;return i.createElement(u.View,{styles:[a.container]},i.createElement(u.View,{styles:[a.logo,a["logo"+r.brand],u.View.MARGIN.S400Right]}),i.createElement(u.View,{styles:[a.info]},i.createElement(c.LabelGroup,{label:"CARD NUMBER",content:"**** **** **** "+r.last4}),i.createElement(c.LabelGroup,{label:"EXPIRATION",content:r.expMonth+"/"+r.expYear}),o&&o.coupon&&o.coupon.percentOff&&i.createElement(c.LabelGroup,{label:"COUPON",content:o.coupon.percentOff+"%"})))};return t}(i.Component),r.STYLES=l.StyleSheet.create({container:{display:"flex",alignItems:"center"},info:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",width:"100%"},logo:{backgroundSize:"cover",width:64,height:40},logoVisa:{backgroundImage:"url("+w.default+")"},logoMasterCard:{backgroundImage:"url("+b.default+")"},logoAmericanExpress:{backgroundImage:"url("+p.default+")"},logoDiscover:{backgroundImage:"url("+v.default+")"},logoDinersClub:{backgroundImage:"url("+d.default+")"},logoJCB:{backgroundImage:"url("+h.default+")"}}),o);t.default=R},2718:function(e,t,n){e.exports=n.p+"images/e98d429307a1421c45071d7eada35f60.png"},2719:function(e,t,n){e.exports=n.p+"images/4d235446dff4f1b9ff282ae80de89d7f.png"},2720:function(e,t,n){e.exports=n.p+"images/5cc14b7619e9e9638681c88ce90c72cb.png"},2721:function(e,t,n){e.exports=n.p+"images/93ef4865618024eebc8ab78b46de409b.png"},2722:function(e,t,n){e.exports=n.p+"images/5186e3f60aa26fab78381660f4c4e167.png"},2723:function(e,t,n){e.exports=n.p+"images/de7e8ab023afb1ba9e61366d368f43d8.png"},2724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(2725);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},2725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=s(a);var l=n(2);var u=n(1);n(3);var c=n(102);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=r=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.billingConfig,a=r.isCollapsed,l=r.onToggle,s=r.onInfoPopupDisplay;var p=o.organization,f=o.street,d=o.zip,m=o.region,v=o.country,y=o.name,h=o.email,g=o.phone,b=o.vat;var E=[f,d,m,v].filter(Boolean).join(", ");return i.createElement(u.Panel,null,i.createElement(u.Panel.Header,{onClick:a?l:null},i.createElement(u.Panel.Header.Left,null,i.createElement(u.Panel.Header.Title,null,"Billing Details"),a&&i.createElement(u.Panel.Header.Hint,null,p," ",E&&"- "+E)),i.createElement(u.Panel.Header.Right,null,i.createElement(u.Panel.Toggle,{isCollapsed:a}))),!a&&i.createElement(i.Fragment,null,i.createElement(u.Panel.Body,null,i.createElement(u.View,{styles:[n.grid]},p&&i.createElement(c.LabelGroup,{label:"organization",content:p}),y&&i.createElement(c.LabelGroup,{label:"name",content:y}),f&&i.createElement(c.LabelGroup,{label:"billing address",content:E}),h&&i.createElement(c.LabelGroup,{label:"email",content:h}),g&&i.createElement(c.LabelGroup,{label:"phone",content:g}),b&&i.createElement(c.LabelGroup,{label:"VAT",content:b}))),i.createElement(u.Panel.Footer,null,i.createElement(u.Panel.Footer.Controls,null,i.createElement(u.Button,{onClick:s},"Update billing details")))))};return t}(i.Component),r.STYLES=l.StyleSheet.create({grid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridRowGap:u.spacing.S200,gridColumnGap:u.spacing.S200}}),o);t.default=m},2726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(2727);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},2727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l,u;var c=n(0);var s=b(c);var p=n(13);var f=n(12);var d=n(2);var m=n(7);var v=n(1);var y=n(329);var h=g(y);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=(o=r=function(e){C(t,e);function t(){E(this,t);return w(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.onToggle,a=r.isCollapsed,i=r.invoices;var l=i?i[0]:null;return s.createElement(v.Panel,null,s.createElement(v.Panel.Header,{onClick:a?o:null},s.createElement(v.Panel.Header.Left,null,s.createElement(v.Panel.Header.Title,null,"Invoices"),a&&l&&s.createElement(v.Panel.Header.Hint,null,s.createElement(f.FormattedDate,{value:l.periodEnd,month:"short",day:"numeric",year:"numeric"}),", ",s.createElement(f.FormattedNumber,{value:l.amountDue/100,style:"currency",currency:l.currency}))),s.createElement(v.Panel.Header.Right,null,s.createElement(v.Panel.Toggle,{isCollapsed:a}))),!i&&!a&&s.createElement(v.Panel.DataGrid.Placeholder,null),i&&!a&&s.createElement(v.Panel.DataGrid,null,s.createElement(v.Panel.DataGrid.Header,null,s.createElement(v.Panel.DataGrid.HeaderCell,{isFirst:true},"Date"),s.createElement(v.Panel.DataGrid.HeaderCell,null,"Amount"),s.createElement(v.Panel.DataGrid.HeaderCell,null)),s.createElement(v.Panel.DataGrid.Body,{styles:n.dataGrid},i.map(function(e){return s.createElement(_,{invoice:e,key:e.id})}))))};return t}(s.Component),r.STYLES=d.StyleSheet.create({dataGrid:{maxHeight:300}}),o);var _=(0,p.withRouter)(a=(l=i=function(e){C(t,e);function t(){var n,r,o;E(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=w(this,e.call.apply(e,[this].concat(i))),r),r.state={isHover:false},r.onMouseLeave=function(){r.setState({isHover:false})},r.onMouseEnter=function(){r.setState({isHover:true})},r.onClick=function(){var e=r.props,t=e.history,n=e.invoice;t.push("./billing/"+n.id)},n),w(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.invoice;var o=this.state.isHover;return s.createElement(v.Panel.DataGrid.Row,{styles:[n.row],onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},s.createElement(v.Panel.DataGrid.Cell,{label:"Date"},s.createElement(f.FormattedDate,{value:new Date(r.periodStart),day:"numeric",month:"short",year:"numeric"})),s.createElement(v.Panel.DataGrid.Cell,{label:"Amount"},s.createElement(f.FormattedNumber,{value:r.amountDue/100,style:"currency",currency:r.currency})),s.createElement(v.Panel.DataGrid.Cell,null,s.createElement(v.View,{styles:[n.icon,o&&n.iconHover]},s.createElement(m.IconDownload,null))))};return t}(s.Component),i.STYLES=d.StyleSheet.create({icon:(u={},u["@media "+v.MEDIA.TABLET]={width:40,marginLeft:"auto",textAlign:"center"},u),iconHover:{color:v.colors.BLUE_BASE}}),l))||a;t.default=P},2728:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UpgradePlanPopup=t.UpdateCardPopup=t.UpcomingInvoicePopup=t.InfoPopup=t.DowngradePopup=t.CouponPopup=void 0;var r=n(2729);var o=v(r);var a=n(2730);var i=v(a);var l=n(2731);var u=v(l);var c=n(2732);var s=v(c);var p=n(2733);var f=v(p);var d=n(2734);var m=v(d);function v(e){return e&&e.__esModule?e:{default:e}}t.CouponPopup=o.default;t.DowngradePopup=i.default;t.InfoPopup=u.default;t.UpcomingInvoicePopup=s.default;t.UpdateCardPopup=f.default;t.UpgradePlanPopup=m.default},2729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=s(a);var l=n(5);n(3);var u=n(1);var c=n(10);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(r=(0,l.connect)(),r(o=function(e){m(t,e);function t(){var n=this;var r,o,a;f(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=d(this,e.call.apply(e,[this].concat(l))),o),o.state={coupon:o.props.billingConfig.coupon||""},o.onSave=p(regeneratorRuntime.mark(function e(){var t,r,a,i,l;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.dispatch,a=t.org,i=t.billingConfig,l=t.onClose;n.next=3;return r(c.Flux.organization.updateBillingConfig(a,i,i.merge({coupon:o.state.coupon})));case 3:l();case 4:case"end":return n.stop()}},e,n)})),o.onCouponChange=function(e){o.setState({coupon:e.target.value})},r),d(o,a)}t.prototype.render=function e(){var t=this.props.onClose;var n=this.state.coupon;return i.createElement(u.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:t},i.createElement(u.Modal,{size:u.Modal.SIZES.small},i.createElement(u.Modal.Header,null,i.createElement(u.Modal.Title,null,"Add coupon")),i.createElement(u.Modal.Body,null,i.createElement(u.Form.Input,{type:"text",placeholder:"Coupon code",value:n,onChange:this.onCouponChange})),i.createElement(u.Modal.Footer,null,i.createElement(u.Button,{kind:"cancel",onClick:t},"Cancel"),i.createElement(u.Button,{kind:"primary",onClick:this.onSave},"Apply coupon"))))};return t}(i.Component))||o);t.default=v},2730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(0);var o=l(r);var a=n(14);var i=n(1);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){s(t,e);function t(){var n,r,o;u(this,t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return o=(n=(r=c(this,e.call.apply(e,[this].concat(l))),r),r.onContactUs=function(){var e=r.props.onClose;(0,a.openSupportDialog)();e()},n),c(r,o)}t.prototype.render=function e(){var t=this.props.onClose;return o.createElement(i.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:t},o.createElement(i.Modal,{size:i.Modal.SIZES.small},o.createElement(i.Modal.Header,null,o.createElement(i.Modal.Title,null,"Downgrade")),o.createElement(i.Modal.Body,null,o.createElement(i.Text,null,"Please contact us for downgrade")),o.createElement(i.Modal.Footer,null,o.createElement(i.Button,{kind:"cancel",onClick:t},"Cancel"),o.createElement(i.Button,{kind:"primary",onClick:this.onContactUs},"Contact us"))))};return t}(o.Component);t.default=p},2731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n(0);var u=d(l);var c=n(5);var s=n(2);var p=n(10);n(3);var f=n(1);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(r=(0,c.connect)(function(e){var t=e.config;return{config:t}}),r(o=(i=a=function(e){h(t,e);function t(){var n=this;var r,o,a;v(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=y(this,e.call.apply(e,[this].concat(l))),o),o.state={billingAddress:o.props.billingConfig.billingAddress},o.onSave=m(regeneratorRuntime.mark(function e(){var t,r,a,i,l;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.dispatch,a=t.org,i=t.billingConfig,l=t.onClose;n.next=3;return r(p.Flux.organization.updateBillingConfig(a,i,i.merge({billingAddress:o.state.billingAddress})));case 3:l();case 4:case"end":return n.stop()}},e,n)})),o.onChange=function(e,t){var n;o.setState({billingAddress:o.state.billingAddress.merge((n={},n[e]=t.currentTarget.value,n))})},o.onChangeOrganization=function(e){return o.onChange("organization",e)},o.onChangeFirstName=function(e){return o.onChange("firstName",e)},o.onChangeLastName=function(e){return o.onChange("lastName",e)},o.onChangeEmail=function(e){return o.onChange("email",e)},o.onChangePhone=function(e){return o.onChange("phone",e)},o.onChangeStreet=function(e){return o.onChange("street",e)},o.onChangeCountry=function(e){return o.onChange("country",e)},o.onChangeRegion=function(e){return o.onChange("region",e)},o.onChangeCity=function(e){return o.onChange("city",e)},o.onChangeZip=function(e){return o.onChange("zip",e)},o.onChangeVAT=function(e){return o.onChange("vat",e)},r),y(o,a)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.onClose,a=r.plan;var i=this.state.billingAddress;return u.createElement(f.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:o},u.createElement(f.Modal,{size:f.Modal.SIZES.medium},u.createElement(f.Modal.Header,null,u.createElement(f.Modal.Title,null,"Billing details")),u.createElement(f.Modal.Body,null,u.createElement(f.Form,{onSubmit:this.onSave},u.createElement(f.Form.Group,{title:"Organization",labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"Gitbook",value:i.organization,onChange:this.onChangeOrganization})),u.createElement(f.View,{styles:[n.row]},u.createElement(f.Form.Group,{title:"First Name",styles:n.groupRow,labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"John",value:i.firstName,onChange:this.onChangeFirstName})),u.createElement(f.Form.Group,{title:"Last Name",styles:n.groupRow,labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"Doe",value:i.lastName,onChange:this.onChangeLastName}))),u.createElement(f.View,{styles:[n.row]},u.createElement(f.Form.Group,{title:"Email",styles:n.groupRow,labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"john.doe@example.com",value:i.email,onChange:this.onChangeEmail})),u.createElement(f.Form.Group,{title:"Phone",styles:n.groupRow,labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"(123) 4567890",value:i.phone,onChange:this.onChangePhone}))),u.createElement(f.Form.Group,{title:"Billing Address",labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"1235 Brookdale Ave",value:i.street,onChange:this.onChangeStreet})),u.createElement(f.View,{styles:[n.row]},u.createElement(f.Form.Group,{title:"Country",styles:n.groupRow,labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"United States",value:i.country,onChange:this.onChangeCountry})),u.createElement(f.Form.Group,{title:"Region",styles:n.groupRow,labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"California",value:i.region,onChange:this.onChangeRegion})),u.createElement(f.Form.Group,{title:"City",styles:n.groupRow,labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"Mountain View",value:i.city,onChange:this.onChangeCity})),u.createElement(f.Form.Group,{title:"Zip",styles:n.groupRow,labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"94040",value:i.zip,onChange:this.onChangeZip}))),u.createElement(f.Form.Group,{title:"VAT",labelStyles:n.label},u.createElement(f.Form.Input,{type:"text",placeholder:"Company VAT (optional)",value:i.vat,onChange:this.onChangeVAT})))),u.createElement(f.Modal.Footer,null,u.createElement(f.Button,{kind:"cancel",onClick:o},a?"Later":"Cancel"),u.createElement(f.Button,{kind:"primary",onClick:this.onSave},"Confirm details"))))};return t}(u.Component),a.STYLES=s.StyleSheet.create({row:{display:"flex"},groupRow:{flex:1,marginRight:10,":last-child":{marginRight:0}},label:{fontSize:12,lineHeight:1.5,fontWeight:500,textTransform:"uppercase"}}),i))||o);t.default=g},2732:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n(0);var u=h(l);var c=n(2);var s=n(12);var p=n(3);var f=n(1);var d=n(329);var m=y(d);var v=n(102);function y(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(o=r=function(e){E(t,e);function t(){g(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.upcomingInvoice,a=r.onClose,i=r.orgUsage,l=r.billingConfig;var c=p.BILLING.BILLING_SPEC[l.activePlan];return u.createElement(f.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:a},u.createElement(f.Modal,{size:f.Modal.SIZES.small},u.createElement(f.Modal.Header,null,u.createElement(f.Modal.Title,null,"Upcoming Invoice")),u.createElement(f.Modal.Body,null,u.createElement(C,{label:"plan",content:v.PLANS[l.activePlan].title}),u.createElement(C,{label:"period",content:u.createElement(u.Fragment,null,u.createElement(s.FormattedDate,{value:o.periodStart,month:"short",day:"numeric",year:"numeric"}),u.createElement("span",null," to "),u.createElement(s.FormattedDate,{value:o.periodEnd,month:"short",day:"numeric",year:"numeric"}))}),u.createElement(C,{label:"amount",content:u.createElement(u.Fragment,null,o.subtotal/100===i.membersCount*c.priceByMemberMonthly&&i.membersCount+" users x $"+c.priceByMemberMonthly+" = ",u.createElement(s.FormattedNumber,{value:o.subtotal/100,style:"currency",currency:o.currency}))}),o.coupon&&o.coupon.percentOff&&u.createElement(C,{label:"coupon",content:o.coupon.percentOff+"%"}),u.createElement(C,{label:"amount due",content:u.createElement(f.Text,{styles:[n.primary]},u.createElement(s.FormattedNumber,{value:o.total/100,style:"currency",currency:o.currency}))})),u.createElement(f.Modal.Footer,null,u.createElement(f.Button,{kind:"cancel",onClick:a},"Close"))))};return t}(u.Component),r.STYLES=c.StyleSheet.create({primary:{color:f.colors.BLUE_BASE}}),o);var C=(i=a=function(e){E(t,e);function t(){g(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.label,o=n.content;var a=t.STYLES;return u.createElement(f.View,{styles:[f.View.MARGIN.S300Bottom,a.row]},u.createElement(f.Text.TextH300,{styles:[a.label]},r),u.createElement(f.Text,null,o))};return t}(u.Component),a.STYLES=c.StyleSheet.create({row:{display:"flex",alignItems:"center",justifyContent:"space-between",":last-child":{marginBottom:0}},label:{color:f.colors.GREY_BASE,fontWeight:500,textTransform:"uppercase"}}),i);t.default=w},2733:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(0);var o=c(r);var a=n(328);n(3);var i=n(1);var l=n(7);var u=n(102);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){d(t,e);function t(){var n=this;var r,o,a;p(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=f(this,e.call.apply(e,[this].concat(l))),o),o.state={error:null,pending:false,isFetchingToken:false},o.onChange=function(e){if(e.error){o.setState({error:e.error});return}o.setState({error:null})},o.onSubmit=s(regeneratorRuntime.mark(function e(){var t,r,a,i;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.onSuccess,a=t.stripe;o.setState({error:null,isFetchingToken:true});i=void 0;n.prev=3;n.next=6;return a.createToken();case 6:i=n.sent;if(!i.error){n.next=9;break}throw i.error;case 9:n.next=15;break;case 11:n.prev=11;n.t0=n["catch"](3);o.setState({isFetchingToken:false,error:n.t0});return n.abrupt("return");case 15:o.setState({pending:true});r(i.token.id);case 17:case"end":return n.stop()}},e,n,[[3,11]])})),r),f(o,a)}t.prototype.componentWillReceiveProps=function e(t){if(this.props.billingConfig.token&&!t.billingConfig.token&&t.billingConfig.error){this.setState({error:new Error(t.billingConfig.error),pending:false,isFetchingToken:false});return}if(this.props.billingConfig.cardID!==t.billingConfig.cardID){this.setState({pending:false});this.props.onClose()}};t.prototype.render=function e(){var t=this.props,n=t.billingConfig,r=t.onClose;var a=this.state,c=a.error,s=a.pending,p=a.isFetchingToken;return o.createElement(i.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:r},o.createElement(i.Modal,{size:i.Modal.SIZES.small},c&&o.createElement(i.Modal.Status,{styles:[i.View.PADDING.S200Vertical,i.Modal.Status.STYLES.danger]},o.createElement(l.IconAlert,null)," ",c.message),o.createElement(i.Modal.Header,null,o.createElement(i.Modal.Title,null,"Credit card information")),o.createElement(i.Modal.Body,null,o.createElement(u.CardForm,{onSubmit:this.onSubmit,billingConfig:n})),o.createElement(i.Modal.Footer,null,o.createElement(i.Button,{kind:"cancel",onClick:r},"Cancel"),o.createElement(i.Button,{onClick:this.onSubmit},!p&&!s||c?o.createElement(o.Fragment,null,"Update card"):o.createElement(i.Loading,null)))))};return t}(o.Component);t.default=(0,a.injectStripe)(m)},2734:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=v(a);var l=n(2);var u=n(328);n(3);var c=n(7);var s=n(1);var p=n(102);var f=n(2735);var d=m(f);function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(o=r=function(e){b(t,e);function t(){var n=this;var r,o,a;h(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=g(this,e.call.apply(e,[this].concat(l))),o),o.state={error:null,pending:false,isFetchingToken:false,displayCardForm:!o.props.billingConfig.cardID},o.onChange=function(e){if(e.error){o.setState({error:e.error});return}o.setState({error:null})},o.onUpdatePlan=y(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props.onUpdatePlan;o.setState({pending:true});n.next=4;return t();case 4:case"end":return n.stop()}},e,n)})),o.onUpdateCard=y(regeneratorRuntime.mark(function e(){var t,r,a,i;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.onUpdateCard,a=t.stripe;o.setState({isFetchingToken:true,error:null});i=void 0;n.prev=3;n.next=6;return a.createToken();case 6:i=n.sent;if(!i.error){n.next=9;break}throw i.error;case 9:n.next=15;break;case 11:n.prev=11;n.t0=n["catch"](3);o.setState({isFetchingToken:false,error:n.t0});return n.abrupt("return");case 15:o.setState({pending:true});r(i.token.id);case 17:case"end":return n.stop()}},e,n,[[3,11]])})),r),g(o,a)}t.prototype.componentWillReceiveProps=function e(t){if(this.props.billingConfig.token&&!t.billingConfig.token&&!t.billingConfig.cardID&&t.billingConfig.error){this.setState({error:new Error(t.billingConfig.error),pending:false,isFetchingToken:false});return}if(t.billingConfig.cardID&&t.billingConfig.activePlan===t.billingConfig.plan){this.setState({pending:false});this.props.onClose();this.props.onInfoPopupDisplay()}};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.billingConfig,a=r.onClose,l=r.plan;var u=this.state,f=u.error,d=u.pending,m=u.isFetchingToken,v=u.displayCardForm;return i.createElement(s.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:a},i.createElement(s.Modal,{size:s.Modal.SIZES.small,error:o.error},f&&i.createElement(s.Modal.Status,{styles:[s.View.PADDING.S200Vertical,s.Modal.Status.STYLES.danger]},i.createElement(c.IconAlert,null)," ",f.message),i.createElement(s.Modal.Header,{styles:[n.header]},i.createElement(s.Modal.Title,null,"Upgrade to ",p.PLANS[l].title," plan")),i.createElement(s.Modal.Body,{styles:[s.View.PADDING.S300Vertical]},i.createElement(s.View,{styles:[n.logo,n["logo"+l]]}),v?i.createElement(i.Fragment,null,i.createElement(s.View,{styles:[s.View.PADDING.S300Vertical,n.subline]},i.createElement(s.Text,null,"Please enter your credit card information for upgrading to"," ",p.PLANS[l].title," plan")),i.createElement(p.CardForm,{onSubmit:this.onUpdateCard,billingConfig:o,onChange:this.onChange})):i.createElement(s.View,{styles:[s.View.PADDING.S300Vertical,n.subline]},i.createElement(s.Text,null,"Please confirm to upgrade to"," ",p.PLANS[l].title," plan."))),i.createElement(s.Modal.Footer,null,i.createElement(s.Button,{kind:"cancel",onClick:a},"Cancel"),i.createElement(s.Button,{onClick:o.cardID?this.onUpdatePlan:this.onUpdateCard},!m&&!d||f?i.createElement(i.Fragment,null,o.cardID?"Upgrade":"Add a card"):i.createElement(s.Loading,null)))))};return t}(i.Component),r.STYLES=l.StyleSheet.create({header:{textAlign:"center"},subline:{color:s.colors.GREY_BASE,textAlign:"center"},logo:{height:84,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},logov2_startup:{backgroundImage:"url("+d.default+")"}}),o);t.default=(0,u.injectStripe)(E)},2735:function(e,t,n){e.exports=n.p+"images/d70b6ea6ada17cfa759641997dad9972.svg"},2736:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n(0);var u=S(l);var c=n(3);var s=n(329);var p=_(s);var f=n(940);var d=_(f);var m=n(1);var v=n(7);var y=n(10);var h=n(14);var g=n(5);var b=n(12);var E=n(2);var w=n(102);var C=n(2737);var P=_(C);function _(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=E.StyleSheet.create({printButton:{marginBottom:10,"@media print":{display:"none"}},invoiceWrapper:{flex:1,display:"flex"},invoiceDetails:{padding:"1cm",width:"21cm",margin:"0px auto",background:"#fff","@media print":{padding:0}},header:{display:"flex",justifyContent:"space-between"},recipient:{margin:"50px 0"},headerRight:{textAlign:"right"},fontLarge:{fontSize:20},borderBottom:{borderBottom:"solid 1px black"},fontMedium:{fontSize:16},subscriptions:{width:"100%",textAlign:"left"},total:{marginTop:50,float:"right",textAlign:"right"},gitbookWrapper:{display:"flex",maxWidth:100},gitbookLogo:{marginRight:5,fontSize:24,color:m.colors.BLUE_BASE},date:{float:"right"}});var x=(r=(0,g.connect)(function(e){var t=e.config,n=e.user;return{config:t,authHeader:n.authorizationHeader}}),o=y.Connectors.database(function(e){var t=e.org,n=e.user;return{billingConfig:t?c.BillingConfig.queryByID(t.uid):null}}),a=y.Connectors.graphQL(function(e){var t=e.org,n=e.config,r=e.authHeader,o=e.match.params.invoiceID;return{invoice:{url:n.urls.api,query:w.invoiceQuery,operationName:"invoice",headers:{Authorization:r},variables:{id:t&&t.baseDomain,invoiceID:o},mapState:function e(t){var n=t.data;return n&&n.organization&&n.organization.billing&&n.organization.billing.invoice}}}}),r(i=o(i=a(i=function(e){T(t,e);function t(){O(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.invoice,r=t.org,o=t.billingConfig;if(!r||!o||!n)return u.createElement(h.ErrorPage.NotFound,null);return u.createElement("div",{className:(0,E.css)(j.invoiceWrapper)},u.createElement("div",{className:(0,E.css)(j.invoiceDetails)},u.createElement(k,{invoice:n}),u.createElement(I,{org:r,billingConfig:o}),u.createElement(A,{lines:n.lines}),u.createElement(M,{invoice:n})))};return t}(u.Component))||i)||i)||i);var k=function(e){T(t,e);function t(){var n,r,o;O(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=R(this,e.call.apply(e,[this].concat(i))),r),r.onPrint=function(){window.print()},n),R(r,o)}t.prototype.render=function e(){var t=this.props.invoice;return u.createElement("div",{className:(0,E.css)(j.header)},u.createElement("div",null,u.createElement("div",{className:(0,E.css)(j.gitbookWrapper)},u.createElement(v.Logo,{className:(0,E.css)(j.gitbookLogo)})," ",u.createElement("span",{className:(0,E.css)(j.fontLarge)},"GitBook")),u.createElement("div",null,"1235 Brookdale Ave"),u.createElement("div",null,"Mountain View CA 94040"),u.createElement("div",null,"United States")),u.createElement("div",{className:(0,E.css)(j.headerRight)},u.createElement("div",{className:(0,E.css)(j.printButton)},u.createElement(m.Button,{onClick:this.onPrint},"Print")),u.createElement("div",{className:(0,E.css)(j.fontLarge)},"INVOICE"),u.createElement("div",null,"Date:"," ",u.createElement(b.FormattedDate,{value:t.date,month:"short",day:"numeric",year:"numeric"}))))};return t}(u.Component);var I=function(e){T(t,e);function t(){O(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.billingConfig.billingAddress,n=t.organization,r=t.street,o=t.country,a=t.zip;return u.createElement("div",{className:(0,E.css)(j.recipient)},u.createElement("div",{className:(0,E.css)(j.fontLarge)},"Billed to"),u.createElement("div",null,u.createElement("div",null,n),u.createElement("div",null,r,a&&u.createElement("span",null,", ",a)),u.createElement("div",null,o)))};return t}(u.Component);var M=function(e){T(t,e);function t(){O(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.invoice;return u.createElement("div",{className:(0,E.css)(j.total)},t.coupon&&u.createElement("div",null,u.createElement("div",{className:(0,E.css)(j.fontLarge)},"Total ="," ",u.createElement(b.FormattedNumber,{value:t.subtotal/100,style:"currency",currency:t.currency})),t.coupon&&t.coupon.percentOff&&u.createElement("div",null,"Discount ",t.coupon.id,":"," ",t.coupon.percentOff,"%"),t.coupon&&t.coupon.amountOff&&u.createElement("div",null,"Discount ",t.coupon.id,":"," ",u.createElement(b.FormattedNumber,{value:t.coupon.amountOff/100,style:"currency",currency:t.currency})),u.createElement("div",null)),u.createElement("div",{className:(0,E.css)(j.fontLarge)},"Amount due ="," ",u.createElement(b.FormattedNumber,{value:t.amountDue/100,style:"currency",currency:t.currency})))};return t}(u.Component);var A=function(e){T(t,e);function t(){O(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.lines;return u.createElement("div",null,u.createElement("div",{className:(0,E.css)(j.fontLarge,j.borderBottom)},"Subscriptions"),u.createElement("table",{className:(0,E.css)(j.subscriptions)},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",{className:(0,E.css)(j.fontMedium)},"Description"),u.createElement("th",{className:(0,E.css)(j.fontMedium)},"Period"),u.createElement("th",{className:(0,E.css)(j.fontMedium)},"Amount"))),u.createElement("tbody",null,t.filter(function(e){return 0!==e.amount}).map(function(e,t){return u.createElement(P.default,{key:t,startAt:e.startAt,endAt:e.endAt,amount:e.amount,currency:e.currency,description:e.description||w.PLANS[e.plan].title})}))))};return t}(u.Component);t.default=x},2737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=c(a);var l=n(12);var u=n(2);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){s(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.startAt,a=r.endAt,c=r.description,s=r.amount,p=r.currency;return i.createElement("tr",null,i.createElement("td",null,i.createElement("div",{className:(0,u.css)(n.description)},c)),i.createElement("td",null,i.createElement("div",null,i.createElement(l.FormattedDate,{value:o,month:"short",day:"numeric",year:"numeric"}),i.createElement("span",null," to "),i.createElement(l.FormattedDate,{value:a,month:"short",day:"numeric",year:"numeric"}))),i.createElement("td",null,i.createElement(l.FormattedNumber,{value:s/100,style:"currency",currency:p})))};return t}(i.Component),r.STYLES=u.StyleSheet.create({description:{maxWidth:450,overflow:"auto",textOverflow:"ellipsis"}}),o);t.default=d},2744:function(e,t,n){var r=n(2745);var o={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};e.exports=a;function a(e,t,n){var r=Object.create(null);var a=Object.create(null);n=n||{};var u="function"===typeof n.easing?n.easing:o[n.easing];if(!u){n.easing&&console.warn("Unknown easing function in amator: "+n.easing);u=o.ease}var c="function"===typeof n.step?n.step:i;var s="function"===typeof n.done?n.done:i;var p=l(n.scheduler);var f=Object.keys(t);f.forEach(function(n){r[n]=e[n];a[n]=t[n]-e[n]});var d=n.duration||400;var m=Math.max(1,.06*d);var v;var y=0;v=p.next(g);return{cancel:h};function h(){p.cancel(v);v=0}function g(){var t=u(y/m);y+=1;b(t);if(y<=m){v=p.next(g);c(e)}else{v=0;setTimeout(function(){s(e)},0)}}function b(t){f.forEach(function(n){e[n]=a[n]*t+r[n]})}}function i(){}function l(e){if(!e){var t="undefined"!==typeof window&&window.requestAnimationFrame;return t?u():c()}if("function"!==typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!==typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}function u(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function c(){return{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}},2745:function(e,t){var n=4;var r=.001;var o=1e-7;var a=10;var i=11;var l=1/(i-1);var u="function"===typeof Float32Array;function c(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function p(e){return 3*e}function f(e,t,n){return((c(t,n)*e+s(t,n))*e+p(t))*e}function d(e,t,n){return 3*c(t,n)*e*e+2*s(t,n)*e+p(t)}function m(e,t,n,r,i){var l,u,c=0;do{u=t+(n-t)/2;l=f(u,r,i)-e;l>0?n=u:t=u}while(Math.abs(l)>o&&++c<a);return u}function v(e,t,r,o){for(var a=0;a<n;++a){var i=d(t,r,o);if(0===i)return t;var l=f(t,r,o)-e;t-=l/i}return t}e.exports=function e(t,n,o,a){if(!(0<=t&&t<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");var c=u?new Float32Array(i):new Array(i);if(t!==n||o!==a)for(var s=0;s<i;++s)c[s]=f(s*l,t,o);function p(e){var n=0;var a=1;var u=i-1;for(;a!==u&&c[a]<=e;++a)n+=l;--a;var s=(e-c[a])/(c[a+1]-c[a]);var p=n+s*l;var f=d(p,t,o);return f>=r?v(e,p,t,o):0===f?p:m(e,n,n+l,t,o)}return function e(r){if(t===n&&o===a)return r;if(0===r)return 0;if(1===r)return 1;return f(p(r),n,a)}}},2752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l;var u=n(0);var c=C(u);var s=n(5);var p=n(6);var f=n(2);var d=n(3);var m=n(10);var v=n(1);var y=n(78);var h=n(2753);var g=w(h);var b=n(2754);var E=w(b);function w(e){return e&&e.__esModule?e:{default:e}}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function P(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=(r=m.Connectors.database(function(e){var t=e.org;return{orgMembers:d.Membership.queryByOrg(t.uid).setOptions({waitFetched:false}),invites:d.Invite.queryByOrg(t.uid).setOptions({waitFetched:false})}}),o=(0,s.connect)(function(e,t){var n=t.invites,r=t.team;return{invites:n.filter(function(e){return r?e.teamID==r.uid:!e.teamID})}}),r(a=o(a=(l=i=function(e){O(t,e);function t(){var n=this;var r,o,a;_(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=S(this,e.call.apply(e,[this].concat(l))),o),o.state={roles:(0,p.Map)()},o.onChangeRoles=function(e){o.setState({roles:e})},o.onAdd=P(regeneratorRuntime.mark(function e(){var t,r,a,i,l,u,c;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.org,a=t.team,i=t.orgMembers,l=t.dispatch,u=t.onClose;c=o.state.roles;if(a){n.next=4;break}throw new Error('Cannot add members without a team. Did you try to add to "All members"?');case 4:n.next=6;return l((0,y.updateMembersTeams)(r,c.reduce(function(e,t,n){var r=i.get(n);var o=r.teams.set(a.uid,d.TeamMembership.create({role:t}));var l=r.set("teams",o);return e.push(l)},(0,p.List)())));case 6:u();case 7:case"end":return n.stop()}},e,n)})),o.onRevokeInvites=function(){var e=o.props,t=e.org,n=e.invites,r=e.team,a=e.dispatch;window.confirm("All your previous invite links will be invalidated by this action, are you sure that you want to revoke them?")&&a(m.Flux.invites.revokeInvites(t,n,r))},r),S(o,a)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.org,a=r.orgMembers,i=r.team,l=r.invites,u=r.onClose;var s=this.state.roles;var f=i?a.filterNot(function(e){return e.teams.has(i.uid)}):(0,p.OrderedMap)();return c.createElement(v.Popup,{onClose:u},c.createElement(v.Modal,{size:v.Modal.SIZES.medium,styles:[n.teamInvite]},c.createElement(v.Modal.Header,null,c.createElement(v.Modal.Title,null,i?"Add members in "+i.name:"Invite new members")),c.createElement(v.Modal.Body,{title:f.size>0?"Invite new members":null},c.createElement(v.View,{styles:[v.View.MARGIN.S100Bottom,n.teamInviteHint]},c.createElement(v.Text.TextH300,null,"Share this link to invite new team members as writers, readers or admins.")),c.createElement(g.default,{org:o,invites:l}),c.createElement(v.View,{styles:[v.View.MARGIN.S100Top]},c.createElement(v.Link,{component:"span",onClick:this.onRevokeInvites},c.createElement(v.Text.TextH300,null,"Revoke previous invites")))),f.size>0&&c.createElement(v.Modal.Body,{title:"Or add an existing member",styles:[n.teamMembersRole]},c.createElement(E.default,{roles:s,onChangeRoles:this.onChangeRoles,members:f})),c.createElement(v.Modal.Footer,null,c.createElement(v.View,null,c.createElement(v.Button,{kind:"cancel",onClick:u},"Cancel")),c.createElement(v.View,null,f.size>0&&c.createElement(v.Button,{onClick:this.onAdd},"Add")))))};return t}(c.Component),i.STYLES=f.StyleSheet.create({teamInvite:{overflow:"visible"},teamInviteHint:{color:v.colors.GREY_BASE},teamMembersRole:{paddingLeft:0,paddingRight:0,paddingBottom:0,marginBottom:-1}}),l))||a)||a);t.default=R},2753:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n(0);var u=_(l);var c=n(5);var s=n(844);var p=P(s);var f=n(162);var d=P(f);var m=n(312);var v=P(m);var y=n(107);var h=P(y);var g=n(2);var b=n(3);var E=n(1);var w=n(7);var C=n(240);function P(e){return e&&e.__esModule?e:{default:e}}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function R(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=function(e){R(t,e);function t(){var n,r,o;S(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=O(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(e){var t=r.props,n=t.onClick,o=t.role;n(o)},n),O(r,o)}t.prototype.render=function e(){var t=this.props.role;return u.createElement(E.Menu.Item,{onMouseDown:this.onClick},"As ",t,"s")};return t}(u.Component);var j=(r=(0,c.connect)(function(e){var t=e.config;return{config:t}}),r(o=(i=a=function(e){R(t,e);function t(){var n,r,o;S(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=O(this,e.call.apply(e,[this].concat(i))),r),r.state={isOpen:false,activeRole:b.ROLES.READER,copiedURL:null},r.getInviteURL=function(){var e=r.props,t=e.org,n=e.config,o=e.invites;var a=r.state.activeRole;var i=o.find(function(e){return e.role===a});if(!i)return"";var l=(0,C.createAuthRoute)({toMode:"invite",toOrg:t.baseDomain,withInvite:i.uid});return(0,h.default)(n.urls.website,l.pathname)+l.search},r.onCopyInviteLink=function(){r.input.select();r.setState({copiedURL:(0,v.default)(r.getInviteURL())})},r.onSelectRole=function(e){r.setState({activeRole:e,copiedURL:null})},r.onTogglePopover=function(){r.setState(function(e){var t=e.isOpen;return{isOpen:!t}})},r.onClosePopover=function(){var e=r.state.isOpen;e&&r.setState({isOpen:false})},n),O(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.state,a=o.isOpen,i=o.activeRole,l=o.copiedURL;return u.createElement(p.default,{onClickOutside:this.onClosePopover},u.createElement(E.Form.Input,{title:l?"URL was copied to clipboard!":"Copy to clipboard",value:this.getInviteURL(),size:E.Form.Input.SIZES.small,onClick:this.onCopyInviteLink,inputRef:function e(t){n.input=t},readOnly:true},u.createElement(E.Form.InputAddOn,{styles:[r.inviteLinkPrefix],onClick:this.onTogglePopover,prefix:true},u.createElement(E.Text.UIH300,null,u.createElement(w.IconChevronDown,null)," As ",i,"s"),a&&u.createElement(E.Popover,null,u.createElement(E.Menu,null,(0,d.default)(b.ROLES).map(function(e){return e!==b.ROLES.REVIEWER&&u.createElement(T,{key:e,onClick:n.onSelectRole,role:e})}))))))};return t}(u.Component),a.STYLES=g.StyleSheet.create({inviteLinkPrefix:{position:"relative",cursor:"pointer",":hover":{color:E.colors.BLUE_BASE}}}),i))||o);t.default=j},2754:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o,a,i,l,u,c;var s=n(0);var p=C(s);var f=n(2);var d=n(3);var m=n(14);var v=n(10);var y=n(1);var h=n(521);var g=w(h);var b=n(942);var E=w(b);function w(e){return e&&e.__esModule?e:{default:e}}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=(o=v.Connectors.database(function(e){var t=e.member;return{user:d.User.queryByID(t.uid)}}),o(a=(l=i=function(e){S(t,e);function t(){var n,r,o;P(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=_(this,e.call.apply(e,[this].concat(i))),r),r.onToggleReader=function(){var e=r.props,t=e.user,n=e.role,o=e.onChangeRole;o(t.uid,n===d.ROLES.READER?null:d.ROLES.READER)},r.onToggleWriter=function(){var e=r.props,t=e.user,n=e.role,o=e.onChangeRole;o(t.uid,n===d.ROLES.WRITER?null:d.ROLES.WRITER)},r.onToggleAdmin=function(){var e=r.props,t=e.user,n=e.role,o=e.onChangeRole;o(t.uid,n===d.ROLES.ADMIN?null:d.ROLES.ADMIN)},n),_(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.user,a=r.role;return p.createElement(g.default.Row,null,p.createElement(g.default.Cell,null,p.createElement(m.UserAvatar,{user:o,styles:[y.View.MARGIN.S200Right,m.UserAvatar.STYLES.sizeMD,n.avatar],withTooltip:false}),p.createElement(y.Text.UIH400,{styles:[n.displayName]},o.displayName)),p.createElement(g.default.Cell,null,p.createElement(y.Form.Radio,{type:"checkbox",onChange:this.onToggleReader,checked:a===d.ROLES.READER})),p.createElement(g.default.Cell,null,p.createElement(y.Form.Radio,{type:"checkbox",onChange:this.onToggleWriter,checked:a===d.ROLES.WRITER})),p.createElement(g.default.Cell,null,p.createElement(y.Form.Radio,{type:"checkbox",onChange:this.onToggleAdmin,checked:a===d.ROLES.ADMIN})))};return t}(p.Component),i.STYLES=f.StyleSheet.create({avatar:{flexShrink:0},displayName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),l))||a);var R=10;var T=4;var j=(c=u=function(e){S(t,e);function t(){var n,r,o;P(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=_(this,e.call.apply(e,[this].concat(i))),r),r.state={query:"",membersLimit:R},r.uncheckAll=function(){var e=r.props,t=e.onChangeRoles,n=e.roles;t(n.clear())},r.toggleAll=function(e){var t=r.props,n=t.onChangeRoles,o=t.members;n(o.map(function(){return e}).toMap())},r.onChangeQuery=function(e){r.setState({query:e.target.value,membersLimit:R})},r.onChangeRole=function(e,t){var n=r.props,o=n.onChangeRoles,a=n.roles;o(t?a.set(e,t):a.delete(e))},r.onToggleAllReader=function(){r.isAllReader?r.uncheckAll():r.toggleAll(d.ROLES.READER)},r.onToggleAllWriter=function(){r.isAllWriter?r.uncheckAll():r.toggleAll(d.ROLES.WRITER)},r.onToggleAllAdmin=function(){r.isAllAdmin?r.uncheckAll():r.toggleAll(d.ROLES.ADMIN)},r.onIncreaseMembersLimit=function(){r.setState(function(e){var t=e.membersLimit;return{membersLimit:t+T}})},n),_(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props.roles;var a=this.state,i=a.query,l=a.membersLimit;var u=this.props.members.slice(0,l);return p.createElement(g.default,null,p.createElement(g.default.Head,null,p.createElement(g.default.Row,null,p.createElement(g.default.Cell,null,false),p.createElement(g.default.Cell,null,p.createElement(g.default.Label,null,"Reader"),p.createElement(y.Form.Radio,{type:"checkbox",onChange:this.onToggleAllReader,checked:this.isAllReader})),p.createElement(g.default.Cell,null,p.createElement(g.default.Label,null,"Writer"),p.createElement(y.Form.Radio,{type:"checkbox",onChange:this.onToggleAllWriter,checked:this.isAllWriter})),p.createElement(g.default.Cell,null,p.createElement(g.default.Label,null,"Admin"),p.createElement(y.Form.Radio,{type:"checkbox",onChange:this.onToggleAllAdmin,checked:this.isAllAdmin})))),p.createElement(y.InfiniteScroll,{component:g.default.Body,onTrigger:this.onIncreaseMembersLimit},u.map(function(e){return p.createElement(O,{key:e.uid,member:e,onChangeRole:n.onChangeRole,role:o.get(e.uid)})}).toArray()))};r(t,[{key:"isAllReader",get:function e(){var t=this.props,n=t.roles,r=t.members;return r.every(function(e){return n.get(e.uid)===d.ROLES.READER})}},{key:"isAllWriter",get:function e(){var t=this.props,n=t.roles,r=t.members;return r.every(function(e){return n.get(e.uid)===d.ROLES.WRITER})}},{key:"isAllAdmin",get:function e(){var t=this.props,n=t.roles,r=t.members;return r.every(function(e){return n.get(e.uid)===d.ROLES.ADMIN})}}]);return t}(p.Component),u.STYLES=f.StyleSheet.create({input:{maxWidth:240}}),c);t.default=j},328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PaymentRequestButtonElement=t.PostalCodeElement=t.CardCVCElement=t.CardExpiryElement=t.CardNumberElement=t.CardElement=t.Elements=t.injectStripe=t.StripeProvider=void 0;var r=n(2700);var o=d(r);var a=n(2701);var i=d(a);var l=n(2702);var u=d(l);var c=n(2703);var s=d(c);var p=n(2704);var f=d(p);function d(e){return e&&e.__esModule?e:{default:e}}var m=(0,s.default)("card",{sourceType:"card"});var v=(0,s.default)("cardNumber",{sourceType:"card"});var y=(0,s.default)("cardExpiry");var h=(0,s.default)("cardCvc");var g=(0,s.default)("postalCode");t.StripeProvider=o.default;t.injectStripe=i.default;t.Elements=u.default;t.CardElement=m;t.CardNumberElement=v;t.CardExpiryElement=y;t.CardCVCElement=h;t.PostalCodeElement=g;t.PaymentRequestButtonElement=f.default},329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(6);var o=n(940);var a=u(o);var i=n(2705);var l=u(i);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){p(t,e);function t(){c(this,t);return s(this,e.apply(this,arguments))}t.createFromResult=function e(n){return new t({id:n.id,amountDue:n.amount_due,subtotal:n.subtotal,total:n.total,currency:n.currency,date:new Date(1e3*n.date),periodStart:new Date(1e3*n.period_start),periodEnd:new Date(1e3*n.period_end),nextPaymentAttempt:n.next_payment_attempt?new Date(1e3*n.next_payment_attempt):null,coupon:n.discount&&n.discount.coupon?l.default.createFromResult(n.discount.coupon):null,lines:n.lines.data.sort(function(e,t){if(e.period.start===t.period.start)return e.amount-t.amount;return e.period.start-t.period.start}).map(function(e){return a.default.createFromResult(e)})})};return t}((0,r.Record)({id:null,amountDue:0,subtotal:0,total:0,currency:"usd",date:new Date,periodStart:new Date,periodEnd:new Date,nextPaymentAttempt:null,coupon:null,lines:[]}));t.default=f},938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n(0);var u=O(l);var c=n(328);var s=n(5);var p=n(10);var f=n(3);var d=n(329);var m=S(d);var v=n(2706);var y=S(v);var h=n(2715);var g=S(h);var b=n(2724);var E=S(b);var w=n(2726);var C=S(w);var P=n(102);var _=n(2728);function S(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function R(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=(r=p.Connectors.database(function(e){var t=e.org;return{billingConfig:f.BillingConfig.queryByID(t.uid).defaultsTo(null),orgUsage:f.OrgUsage.queryByID(t.uid).defaultsTo(null)}}),o=(0,s.connect)(function(e,t){var n=e.config,r=e.user;var o=t.org,a=t.billingConfig;return{user:r,config:n,billingConfig:a||f.BillingConfig.create({orgID:o.uid,billingAddress:{organization:o.name}}),authHeader:r.authorizationHeader}}),a=p.Connectors.graphQL(function(e){var t=e.org,n=e.config,r=e.billingConfig,o=e.authHeader;return{upcomingInvoice:{url:n.urls.api,query:P.upcomingInvoiceQuery,operationName:"upcomingInvoice",headers:{Authorization:o},variables:{id:t.baseDomain,activePlan:r&&r.activePlan,coupon:r&&r.coupon,fetch:r&&"free"!==r.activePlan&&"free"===r.plan},mapState:function e(t){var n=t.data;return n&&n.organization&&n.organization.billing?n.organization.billing.upcomingInvoice:null},background:true},invoices:{url:n.urls.api,query:P.invoicesQuery,operationName:"invoices",headers:{Authorization:o},variables:{id:t.baseDomain,customerID:r&&r.customerID,subscriptionID:r&&r.subscriptionID},mapState:function e(t){var n=t.data;return n&&n.organization&&n.organization.billing&&n.organization.billing.invoices?n.organization.billing.invoices:null},background:true}}}),r(i=o(i=a(i=function(e){x(t,e);function t(){var n=this;var r,o,a;T(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=j(this,e.call.apply(e,[this].concat(l))),o),o.state={selectedPanel:"plans",displayUpdateCardPopup:false,displayUpgradePlanPopup:false,displayUpcomingInvoicePopup:false,newPlan:null,displayInfoPopup:false,displayCouponPopup:false,displayDowngradePopup:false},o.onUpdateCard=function(){var e=R(regeneratorRuntime.mark(function e(t){var r,a,i,l,u,c;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=o.props,a=r.dispatch,i=r.org,l=r.billingConfig;u=o.state.newPlan;c=l.merge({token:t,error:null,plan:u||l.plan});n.next=5;return a(p.Flux.organization.updateBillingConfig(i,l,c));case 5:case"end":return n.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),o.onUpdatePlan=R(regeneratorRuntime.mark(function e(){var t,r,a,i,l;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.org,a=t.billingConfig,i=t.dispatch;l=o.state.newPlan;n.next=4;return i(p.Flux.organization.updateBillingConfig(r,a,a.merge({plan:l})));case 4:case"end":return n.stop()}},e,n)})),o.onSwitchPlan=function(){var e=R(regeneratorRuntime.mark(function e(t){var r,a,i,l,u;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=o.props,a=r.billingConfig,i=r.user,l=r.org,u=r.dispatch;if(!f.BillingConfig.isUpgrade(a.plan,t)){n.next=4;break}o.setState({newPlan:t,displayUpgradePlanPopup:true});return n.abrupt("return");case 4:if(!(f.BillingConfig.isDowngrade(a.plan,t)&&!i.isSiteAdmin)){n.next=7;break}o.setState({displayDowngradePopup:true});return n.abrupt("return");case 7:n.next=9;return u(p.Flux.organization.updateBillingConfig(l,a,a.merge({plan:t})));case 9:case"end":return n.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),o.onUpgradePlanClose=function(){o.setState({displayUpgradePlanPopup:false})},o.onDowngradePopupClose=function(){o.setState({displayDowngradePopup:false})},o.onUpdateCardPopupClose=function(){o.setState({displayUpdateCardPopup:false})},o.onUpdateCardPopupDisplay=function(){o.setState({displayUpdateCardPopup:true})},o.onUpcomingInvoicePopupClose=function(){o.setState({displayUpcomingInvoicePopup:false})},o.onUpcomingInvoicePopupDisplay=function(){o.setState({displayUpcomingInvoicePopup:true})},o.onInfoPopupClose=function(){o.setState({displayInfoPopup:false,newPlan:null})},o.onInfoPopupDisplay=function(){o.setState({displayInfoPopup:true})},o.onCouponPopupClose=function(){o.setState({displayCouponPopup:false})},o.onCouponPopupDisplay=function(){o.setState({displayCouponPopup:true})},o.onTogglePlans=function(){o.setState({selectedPanel:"plans"})},o.onToggleCard=function(){o.setState({selectedPanel:"card"})},o.onToggleInfo=function(){o.setState({selectedPanel:"info"})},o.onToggleInvoices=function(){o.setState({selectedPanel:"invoices"})},r),j(o,a)}t.prototype.render=function e(){var t=this.props,n=t.config,r=t.billingConfig,o=t.org,a=t.invoices,i=t.upcomingInvoice,l=t.orgUsage;var s=this.state,p=s.newPlan,d=s.selectedPanel,m=s.displayUpdateCardPopup,v=s.displayUpgradePlanPopup,h=s.displayUpcomingInvoicePopup,b=s.displayInfoPopup,w=s.displayCouponPopup,P=s.displayDowngradePopup;return u.createElement(c.StripeProvider,{apiKey:n.stripe.public_key},u.createElement(u.Fragment,null,u.createElement(y.default,{billingConfig:r,orgUsage:l||f.OrgUsage.create(),upcomingInvoice:i,isCollapsed:"plans"!==d,onToggle:this.onTogglePlans,onSwitchPlan:this.onSwitchPlan,onUpcomingInvoicePopupDisplay:this.onUpcomingInvoicePopupDisplay}),r.cardID&&u.createElement(c.Elements,null,u.createElement(g.default,{billingConfig:r,upcomingInvoice:i,isCollapsed:"card"!==d,onToggle:this.onToggleCard,onUpdateCardPopupDisplay:this.onUpdateCardPopupDisplay,onCouponPopupDisplay:this.onCouponPopupDisplay})),r.cardID&&u.createElement(E.default,{billingConfig:r,isCollapsed:"info"!==d,onToggle:this.onToggleInfo,onInfoPopupDisplay:this.onInfoPopupDisplay}),r.customerID&&u.createElement(C.default,{billingConfig:r,org:o,invoices:a,isCollapsed:"invoices"!==d,onToggle:this.onToggleInvoices}),m&&u.createElement(c.Elements,null,u.createElement(_.UpdateCardPopup,{billingConfig:r,onClose:this.onUpdateCardPopupClose,onSuccess:this.onUpdateCard})),v&&u.createElement(c.Elements,null,u.createElement(_.UpgradePlanPopup,{billingConfig:r,plan:p,onUpdateCard:this.onUpdateCard,onUpdatePlan:this.onUpdatePlan,onInfoPopupDisplay:this.onInfoPopupDisplay,onClose:this.onUpgradePlanClose})),h&&i&&u.createElement(_.UpcomingInvoicePopup,{billingConfig:r,upcomingInvoice:i,orgUsage:l,onClose:this.onUpcomingInvoicePopupClose}),b&&u.createElement(_.InfoPopup,{org:o,billingConfig:r,onClose:this.onInfoPopupClose,plan:p}),w&&u.createElement(_.CouponPopup,{org:o,billingConfig:r,onClose:this.onCouponPopupClose}),P&&u.createElement(_.DowngradePopup,{onClose:this.onDowngradePopupClose})))};return t}(u.Component))||i)||i)||i);t.default=k},939:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function e(t,n){var r=Object.keys(t);var o=Object.keys(n);return r.length===o.length&&r.every(function(e){return n.hasOwnProperty(e)&&n[e]===t[e]})};t.default=r},940:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(6);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){i(t,e);function t(){o(this,t);return a(this,e.apply(this,arguments))}t.createFromResult=function e(n){var r=n.quantity,o=n.description,a=n.amount,i=n.currency,l=n.proration,u=n.plan,c=n.period;return new t({quantity:r,description:o,amount:a,currency:i,proration:l,plan:u.id,startAt:new Date(1e3*c.start),endAt:new Date(1e3*c.end)})};return t}((0,r.Record)({quantity:0,description:null,plan:"",currency:"usd",proration:false,amount:0,startAt:new Date,endAt:new Date}));t.default=l},941:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(2736);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default}});