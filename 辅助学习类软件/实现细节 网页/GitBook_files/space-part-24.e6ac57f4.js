webpackJsonp([9],{2008:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=function(){function e(e,t){var n=[];var r=true;var o=false;var a=void 0;try{for(var i=e[Symbol.iterator](),l;!(r=(l=i.next()).done);r=true){n.push(l.value);if(t&&n.length===t)break}}catch(e){o=true;a=e}finally{try{!r&&i["return"]&&i["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();t.default=w;var i=n(0);var l=y(i);var s=n(825);var u=y(s);var c=n(56);var f=n(36);var p=y(f);var d=n(2013);var h=y(d);var v=n(305);function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e){var t,n;var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:false};return n=t=function(t){O(n,t);function n(e){g(this,n);var t=m(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.handleStart=function(e){var n=t.props,r=n.distance,o=n.shouldCancelStart;if(2===e.button||o(e))return false;t._touched=true;t._pos={x:e.pageX,y:e.pageY};var a=(0,v.closest)(e.target,function(e){return null!=e.sortableInfo});if(a&&a.sortableInfo&&t.nodeIsChild(a)&&!t.state.sorting){var i=t.props.useDragHandle;var l=a.sortableInfo,s=l.index,u=l.collection;if(i&&!(0,v.closest)(e.target,function(e){return null!=e.sortableHandle}))return;t.manager.active={index:s,collection:u};"a"===e.target.tagName.toLowerCase()&&e.preventDefault();r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout(function(){return t.handlePress(e)},t.props.pressDelay))}};t.nodeIsChild=function(e){return e.sortableInfo.manager===t.manager};t.handleMove=function(e){var n=t.props,r=n.distance,o=n.pressThreshold;if(!t.state.sorting&&t._touched){t._delta={x:t._pos.x-e.pageX,y:t._pos.y-e.pageY};var a=Math.abs(t._delta.x)+Math.abs(t._delta.y);if(r||o&&!(o&&a>=o))r&&a>=r&&t.manager.isActive()&&t.handlePress(e);else{clearTimeout(t.cancelTimer);t.cancelTimer=setTimeout(t.cancel,0)}}};t.handleEnd=function(){var e=t.props.distance;t._touched=false;e||t.cancel()};t.cancel=function(){if(!t.state.sorting){clearTimeout(t.pressTimer);t.manager.active=null}};t.handlePress=function(e){var n=t.manager.getActive();if(n){var r=t.props,o=r.axis,a=r.getHelperDimensions,i=r.helperClass,l=r.helperStyle,s=r.hideSortableGhost,u=r.onSortStart,c=r.useWindowAsScrollContainer;var f=n.node,p=n.collection;var d=f.sortableInfo.index;var h=(0,v.getElementMargin)(f);var y=t.container.getBoundingClientRect();var g=a({index:d,node:f,collection:p});t.node=f;t.margin=h;t.width=g.width;t.height=g.height;t.marginOffset={x:t.margin.left+t.margin.right,y:Math.max(t.margin.top,t.margin.bottom)};t.boundingClientRect=f.getBoundingClientRect();t.containerBoundingRect=y;t.index=d;t.newIndex=d;t.axis={x:o.indexOf("x")>=0,y:o.indexOf("y")>=0};t.offsetEdge=t.getEdgeOffset(f);t.initialOffset=t.getOffset(e);t.initialScroll={top:t.scrollContainer.scrollTop,left:t.scrollContainer.scrollLeft};t.initialWindowScroll={top:window.pageYOffset,left:window.pageXOffset};var m=f.querySelectorAll("input, textarea, select");var O=f.cloneNode(true);var w=[].concat(b(O.querySelectorAll("input, textarea, select")));w.forEach(function(e,t){"file"!==e.type&&m[t]&&(e.value=m[t].value)});t.helper=t.document.body.appendChild(O);l&&Object.keys(l).forEach(function(e){t.helper.style[e]=l[e]});t.helper.style.position="fixed";t.helper.style.top=t.boundingClientRect.top-h.top+"px";t.helper.style.left=t.boundingClientRect.left-h.left+"px";t.helper.style.width=t.width+"px";t.helper.style.height=t.height+"px";t.helper.style.boxSizing="border-box";t.helper.style.pointerEvents="none";if(s){t.sortableGhost=f;f.style.visibility="hidden";f.style.opacity=0}t.minTranslate={};t.maxTranslate={};if(t.axis.x){t.minTranslate.x=(c?0:y.left)-t.boundingClientRect.left-t.width/2;t.maxTranslate.x=(c?t.contentWindow.innerWidth:y.left+y.width)-t.boundingClientRect.left-t.width/2}if(t.axis.y){t.minTranslate.y=(c?0:y.top)-t.boundingClientRect.top-t.height/2;t.maxTranslate.y=(c?t.contentWindow.innerHeight:y.top+y.height)-t.boundingClientRect.top-t.height/2}if(i){var E;(E=t.helper.classList).add.apply(E,b(i.split(" ")))}t.listenerNode=e.touches?f:t.contentWindow;v.events.move.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,false)});v.events.end.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,false)});t.setState({sorting:true,sortingIndex:d});u&&u({node:f,index:d,collection:p},e)}};t.handleSortMove=function(e){var n=t.props.onSortMove;e.preventDefault();t.updatePosition(e);t.animateNodes();t.autoscroll();n&&n(e)};t.handleSortEnd=function(e){var n=t.props,r=n.hideSortableGhost,o=n.onSortEnd;var a=t.manager.active.collection;if(t.listenerNode){v.events.move.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)});v.events.end.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})}t.helper.parentNode.removeChild(t.helper);t.helper=null;if(r&&t.sortableGhost){t.sortableGhost.style.visibility="";t.sortableGhost.style.opacity=""}var i=t.manager.refs[a];for(var l=0,s=i.length;l<s;l++){var u=i[l];var c=u.node;u.edgeOffset=null;c.style[v.vendorPrefix+"Transform"]="";c.style[v.vendorPrefix+"TransitionDuration"]=""}clearInterval(t.autoscrollInterval);t.autoscrollInterval=null;t.manager.active=null;t.setState({sorting:false,sortingIndex:null});"function"===typeof o&&o({oldIndex:t.index,newIndex:t.newIndex,collection:a},e);t._touched=false};t.autoscroll=function(){var e=t.translate;var n={x:0,y:0};var r={x:1,y:1};var o={x:10,y:10};if(e.y>=t.maxTranslate.y-t.height/2){n.y=1;r.y=o.y*Math.abs((t.maxTranslate.y-t.height/2-e.y)/t.height)}else if(e.x>=t.maxTranslate.x-t.width/2){n.x=1;r.x=o.x*Math.abs((t.maxTranslate.x-t.width/2-e.x)/t.width)}else if(e.y<=t.minTranslate.y+t.height/2){n.y=-1;r.y=o.y*Math.abs((e.y-t.height/2-t.minTranslate.y)/t.height)}else if(e.x<=t.minTranslate.x+t.width/2){n.x=-1;r.x=o.x*Math.abs((e.x-t.width/2-t.minTranslate.x)/t.width)}if(t.autoscrollInterval){clearInterval(t.autoscrollInterval);t.autoscrollInterval=null;t.isAutoScrolling=false}0===n.x&&0===n.y||(t.autoscrollInterval=setInterval(function(){t.isAutoScrolling=true;var e={left:1*r.x*n.x,top:1*r.y*n.y};t.scrollContainer.scrollTop+=e.top;t.scrollContainer.scrollLeft+=e.left;t.translate.x+=e.left;t.translate.y+=e.top;t.animateNodes()},5))};t.manager=new h.default;t.events={start:t.handleStart,move:t.handleMove,end:t.handleEnd};(0,p.default)(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.");t.state={};return t}a(n,[{key:"getChildContext",value:function e(){return{manager:this.manager}}},{key:"componentDidMount",value:function e(){var t=this;var n=this.props,r=n.getContainer,o=n.useWindowAsScrollContainer;var a=this.props.contentWindow||window;this.container="function"===typeof r?r(this.getWrappedInstance()):(0,c.findDOMNode)(this);this.document=this.container.ownerDocument||document;this.scrollContainer=o?this.document.body:this.container;this.contentWindow="function"===typeof a?a():a;var i=function e(n){t.events.hasOwnProperty(n)&&v.events[n].forEach(function(e){return t.container.addEventListener(e,t.events[n],false)})};for(var l in this.events)i(l)}},{key:"componentWillReceiveProps",value:function e(t){var n=this;if(this.helper){if(!(0,v.areEqualShallow)(this.props.helperStyle,t.helperStyle)){Object.keys(t.helperStyle||{}).forEach(function(e){n.helper.style[e]=t.helperStyle[e]});Object.keys(this.props.helperStyle||{}).forEach(function(e){if(t.helperStyle&&t.helperStyle[e])return;n.helper.style[e]=null})}if(this.props.helperClass!==t.helperClass){if(t.helperClass){var r;(r=this.helper.classList).add.apply(r,b(t.helperClass.split(" ")))}if(this.props.helperClass){var o;(o=this.helper.classList).remove.apply(o,b(this.props.helperClass.split(" ")))}}}}},{key:"componentWillUnmount",value:function e(){var t=this;var n=function e(n){t.events.hasOwnProperty(n)&&v.events[n].forEach(function(e){return t.container.removeEventListener(e,t.events[n])})};for(var r in this.events)n(r)}},{key:"getEdgeOffset",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{top:0,left:0};if(t){var r={top:n.top+t.offsetTop,left:n.left+t.offsetLeft};return t.parentNode!==this.container?this.getEdgeOffset(t.parentNode,r):r}}},{key:"getOffset",value:function e(t){return{x:t.touches?t.touches[0].pageX:t.pageX,y:t.touches?t.touches[0].pageY:t.pageY}}},{key:"getLockPixelOffsets",value:function e(){var t=this.props.lockOffset;Array.isArray(t)||(t=[t,t]);(0,p.default)(2===t.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",t);var n=t,r=o(n,2),a=r[0],i=r[1];return[this.getLockPixelOffset(a),this.getLockPixelOffset(i)]}},{key:"getLockPixelOffset",value:function e(t){var n=t;var r=t;var o="px";if("string"===typeof t){var a=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);(0,p.default)(null!==a,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t);n=r=parseFloat(t);o=a[1]}(0,p.default)(isFinite(n)&&isFinite(r),"lockOffset value should be a finite. Given %s",t);if("%"===o){n=n*this.width/100;r=r*this.height/100}return{x:n,y:r}}},{key:"updatePosition",value:function e(t){var n=this.props,r=n.lockAxis,a=n.lockToContainerEdges;var i=this.getOffset(t);var l={x:i.x-this.initialOffset.x,y:i.y-this.initialOffset.y};l.y-=window.pageYOffset-this.initialWindowScroll.top;l.x-=window.pageXOffset-this.initialWindowScroll.left;this.translate=l;if(a){var s=this.getLockPixelOffsets(),u=o(s,2),c=u[0],f=u[1];var p={x:this.width/2-c.x,y:this.height/2-c.y};var d={x:this.width/2-f.x,y:this.height/2-f.y};l.x=(0,v.limit)(this.minTranslate.x+p.x,this.maxTranslate.x-d.x,l.x);l.y=(0,v.limit)(this.minTranslate.y+p.y,this.maxTranslate.y-d.y,l.y)}"x"===r?l.y=0:"y"===r&&(l.x=0);this.helper.style[v.vendorPrefix+"Transform"]="translate3d("+l.x+"px,"+l.y+"px, 0)"}},{key:"animateNodes",value:function e(){var t=this.props,n=t.transitionDuration,r=t.hideSortableGhost,o=t.onSortOver;var a=this.manager.getOrderedRefs();var i={left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top};var l={left:this.offsetEdge.left+this.translate.x+i.left,top:this.offsetEdge.top+this.translate.y+i.top};var s={top:window.pageYOffset-this.initialWindowScroll.top,left:window.pageXOffset-this.initialWindowScroll.left};var u=this.newIndex;this.newIndex=null;for(var c=0,f=a.length;c<f;c++){var p=a[c].node;var d=p.sortableInfo.index;var h=p.offsetWidth;var y=p.offsetHeight;var b={width:this.width>h?h/2:this.width/2,height:this.height>y?y/2:this.height/2};var g={x:0,y:0};var m=a[c].edgeOffset;m||(a[c].edgeOffset=m=this.getEdgeOffset(p));var O=c<a.length-1&&a[c+1];var w=c>0&&a[c-1];O&&!O.edgeOffset&&(O.edgeOffset=this.getEdgeOffset(O.node));if(d===this.index){if(r){this.sortableGhost=p;p.style.visibility="hidden";p.style.opacity=0}continue}n&&(p.style[v.vendorPrefix+"TransitionDuration"]=n+"ms");if(this.axis.x){if(this.axis.y){if(d<this.index&&(l.left+s.left-b.width<=m.left&&l.top+s.top<=m.top+b.height||l.top+s.top+b.height<=m.top)){g.x=this.width+this.marginOffset.x;if(m.left+g.x>this.containerBoundingRect.width-b.width){g.x=O.edgeOffset.left-m.left;g.y=O.edgeOffset.top-m.top}null===this.newIndex&&(this.newIndex=d)}else if(d>this.index&&(l.left+s.left+b.width>=m.left&&l.top+s.top+b.height>=m.top||l.top+s.top+b.height>=m.top+y)){g.x=-(this.width+this.marginOffset.x);if(m.left+g.x<this.containerBoundingRect.left+b.width){g.x=w.edgeOffset.left-m.left;g.y=w.edgeOffset.top-m.top}this.newIndex=d}}else if(d>this.index&&l.left+s.left+b.width>=m.left){g.x=-(this.width+this.marginOffset.x);this.newIndex=d}else if(d<this.index&&l.left+s.left<=m.left+b.width){g.x=this.width+this.marginOffset.x;null==this.newIndex&&(this.newIndex=d)}}else if(this.axis.y)if(d>this.index&&l.top+s.top+b.height>=m.top){g.y=-(this.height+this.marginOffset.y);this.newIndex=d}else if(d<this.index&&l.top+s.top<=m.top+b.height){g.y=this.height+this.marginOffset.y;null==this.newIndex&&(this.newIndex=d)}p.style[v.vendorPrefix+"Transform"]="translate3d("+g.x+"px,"+g.y+"px,0)"}null==this.newIndex&&(this.newIndex=this.index);o&&this.newIndex!==u&&o({newIndex:this.newIndex,oldIndex:u,index:this.index,collection:this.manager.active.collection})}},{key:"getWrappedInstance",value:function e(){(0,p.default)(s.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call");return this.refs.wrappedInstance}},{key:"render",value:function t(){var n=s.withRef?"wrappedInstance":null;return l.default.createElement(e,r({ref:n},(0,v.omit)(this.props,"contentWindow","useWindowAsScrollContainer","distance","helperClass","hideSortableGhost","transitionDuration","useDragHandle","pressDelay","pressThreshold","shouldCancelStart","onSortStart","onSortMove","onSortEnd","axis","lockAxis","lockOffset","lockToContainerEdges","getContainer","getHelperDimensions")))}}]);return n}(i.Component),t.displayName=(0,v.provideDisplayName)("sortableList",e),t.defaultProps={axis:"y",transitionDuration:300,pressDelay:0,pressThreshold:5,distance:0,useWindowAsScrollContainer:false,hideSortableGhost:true,shouldCancelStart:function e(t){var n=["input","textarea","select","option","button"];if(-1!==n.indexOf(t.target.tagName.toLowerCase()))return true},lockToContainerEdges:false,lockOffset:"50%",getHelperDimensions:function e(t){var n=t.node;return{width:n.offsetWidth,height:n.offsetHeight}}},t.propTypes={axis:u.default.oneOf(["x","y","xy"]),distance:u.default.number,lockAxis:u.default.string,helperClass:u.default.string,helperStyle:u.default.object,transitionDuration:u.default.number,contentWindow:u.default.any,onSortStart:u.default.func,onSortMove:u.default.func,onSortOver:u.default.func,onSortEnd:u.default.func,shouldCancelStart:u.default.func,pressDelay:u.default.number,useDragHandle:u.default.bool,useWindowAsScrollContainer:u.default.bool,hideSortableGhost:u.default.bool,lockToContainerEdges:u.default.bool,lockOffset:u.default.oneOfType([u.default.number,u.default.string,u.default.arrayOf(u.default.oneOfType([u.default.number,u.default.string]))]),getContainer:u.default.func,getHelperDimensions:u.default.func},t.childContextTypes={manager:u.default.object.isRequired},n}},2009:function(e,t,n){"use strict";var r=n(2010);var o=n(2011);var a=n(2012);e.exports=function(){function e(e,t,n,r,i,l){if(l===a)return;o(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};n.checkPropTypes=r;n.PropTypes=n;return n}},2010:function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function e(){};o.thatReturns=r;o.thatReturnsFalse=r(false);o.thatReturnsTrue=r(true);o.thatReturnsNull=r(null);o.thatReturnsThis=function(){return this};o.thatReturnsArgument=function(e){return e};e.exports=o},2011:function(e,t,n){"use strict";var r=function e(t){};false;function o(e,t,n,o,a,i,l,s){r(t);if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,a,i,l,s];var f=0;u=new Error(t.replace(/%s/g,function(){return c[f++]}));u.name="Invariant Violation"}u.framesToPop=1;throw u}}e.exports=o},2012:function(e,t,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},2013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n(2014);var a=s(o);var i=n(2028);var l=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(){u(this,e);this.refs={}}r(e,[{key:"add",value:function e(t,n){this.refs[t]||(this.refs[t]=[]);this.refs[t].push(n)}},{key:"remove",value:function e(t,n){var r=this.getIndex(t,n);-1!==r&&this.refs[t].splice(r,1)}},{key:"isActive",value:function e(){return this.active}},{key:"getActive",value:function e(){var t=this;return(0,a.default)(this.refs[this.active.collection],function(e){var n=e.node;return n.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function e(t,n){return this.refs[t].indexOf(n)}},{key:"getOrderedRefs",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return(0,l.default)(this.refs[t],function(e){var t=e.node;return t.sortableInfo.index})}}]);return e}();t.default=c},2014:function(e,t,n){var r=n(2015),o=n(2024);var a=r(o);e.exports=a},2016:function(e,t,n){var r=n(2017),o=n(2018),a=n(827);function i(e){var t=o(e);if(1==t.length&&t[0][2])return a(t[0][0],t[0][1]);return function(n){return n===e||r(n,e,t)}}e.exports=i},2019:function(e,t,n){var r=n(372),o=n(2020),a=n(637),i=n(387),l=n(826),s=n(827),u=n(170);var c=1,f=2;function p(e,t){if(i(e)&&l(t))return s(u(e),t);return function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,c|f)}}e.exports=p},2020:function(e,t,n){var r=n(275);function o(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}e.exports=o},2021:function(e,t,n){var r=n(2022),o=n(2023),a=n(387),i=n(170);function l(e){return a(e)?r(i(e)):o(e)}e.exports=l},2022:function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},2023:function(e,t,n){var r=n(275);function o(e){return function(t){return r(t,e)}}e.exports=o},2028:function(e,t,n){var r=n(640),o=n(2029),a=n(208),i=n(635);var l=a(function(e,t){if(null==e)return[];var n=t.length;n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]);return o(e,r(t,1),[])});e.exports=l},2029:function(e,t,n){var r=n(210),o=n(306),a=n(2030),i=n(2033),l=n(380),s=n(2034),u=n(273);function c(e,t,n){var c=-1;t=r(t.length?t:[u],l(o));var f=a(e,function(e,n,o){var a=r(t,function(t){return t(e)});return{criteria:a,index:++c,value:e}});return i(f,function(e,t){return s(e,t,n)})}e.exports=c},2030:function(e,t,n){var r=n(2031),o=n(136);function a(e,t){var n=-1,a=o(e)?Array(e.length):[];r(e,function(e,r,o){a[++n]=t(e,r,o)});return a}e.exports=a},2031:function(e,t,n){var r=n(829),o=n(2032);var a=o(r);e.exports=a},2032:function(e,t,n){var r=n(136);function o(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);var a=n.length,i=t?a:-1,l=Object(n);while(t?i--:++i<a)if(false===o(l[i],i,l))break;return n}}e.exports=o},2033:function(e,t){function n(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}e.exports=n},2034:function(e,t,n){var r=n(2035);function o(e,t,n){var o=-1,a=e.criteria,i=t.criteria,l=a.length,s=n.length;while(++o<l){var u=r(a[o],i[o]);if(u){if(o>=s)return u;var c=n[o];return u*("desc"==c?-1:1)}}return e.index-t.index}e.exports=o},2035:function(e,t,n){var r=n(209);function o(e,t){if(e!==t){var n=void 0!==e,o=null===e,a=e===e,i=r(e);var l=void 0!==t,s=null===t,u=t===t,c=r(t);if(!s&&!c&&!i&&e>t||i&&l&&u&&!s&&!c||o&&l&&u||!n&&u||!a)return 1;if(!o&&!i&&!c&&e<t||c&&n&&a&&!o&&!i||s&&n&&a||!l&&a||!u)return-1}return 0}e.exports=o},2036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();t.default=b;var a=n(0);var i=d(a);var l=n(825);var s=d(l);var u=n(56);var c=n(36);var f=d(c);var p=n(305);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e){var t,n;var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:false};return n=t=function(t){y(n,t);function n(){h(this,n);return v(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}o(n,[{key:"componentDidMount",value:function e(){var t=this.props,n=t.collection,r=t.disabled,o=t.index;r||this.setDraggable(n,o)}},{key:"componentWillReceiveProps",value:function e(t){this.props.index!==t.index&&this.node&&(this.node.sortableInfo.index=t.index);if(this.props.disabled!==t.disabled){var n=t.collection,r=t.disabled,o=t.index;r?this.removeDraggable(n):this.setDraggable(n,o)}else if(this.props.collection!==t.collection){this.removeDraggable(this.props.collection);this.setDraggable(t.collection,t.index)}}},{key:"componentWillUnmount",value:function e(){var t=this.props,n=t.collection,r=t.disabled;r||this.removeDraggable(n)}},{key:"setDraggable",value:function e(t,n){var r=this.node=(0,u.findDOMNode)(this);r.sortableInfo={index:n,collection:t,manager:this.context.manager};this.ref={node:r};this.context.manager.add(t,this.ref)}},{key:"removeDraggable",value:function e(t){this.context.manager.remove(t,this.ref)}},{key:"getWrappedInstance",value:function e(){(0,f.default)(l.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call");return this.refs.wrappedInstance}},{key:"render",value:function t(){var n=l.withRef?"wrappedInstance":null;return i.default.createElement(e,r({ref:n},(0,p.omit)(this.props,"collection","disabled","index")))}}]);return n}(a.Component),t.displayName=(0,p.provideDisplayName)("sortableElement",e),t.contextTypes={manager:s.default.object.isRequired},t.propTypes={index:s.default.number.isRequired,collection:s.default.oneOfType([s.default.number,s.default.string]),disabled:s.default.bool},t.defaultProps={collection:0},n}},2037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();t.default=v;var a=n(0);var i=f(a);var l=n(56);var s=n(36);var u=f(s);var c=n(305);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e){var t,n;var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:false};return n=t=function(t){h(n,t);function n(){p(this,n);return d(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}o(n,[{key:"componentDidMount",value:function e(){var t=(0,l.findDOMNode)(this);t.sortableHandle=true}},{key:"getWrappedInstance",value:function e(){(0,u.default)(s.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call");return this.refs.wrappedInstance}},{key:"render",value:function t(){var n=s.withRef?"wrappedInstance":null;return i.default.createElement(e,r({ref:n},this.props))}}]);return n}(a.Component),t.displayName=(0,c.provideDisplayName)("sortableHandle",e),n}},2233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(0);var o=h(r);var a=n(57);var i=d(a);n(40);var l=n(3);var s=n(855);var u=d(s);var c=n(2234);var f=d(c);var p=n(852);function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e){var t=e||{},n=t.SideControls,r=void 0===n?u.default:n,a=t.AroundControls,s=void 0===a?f.default:a;return function(e){var t,n;return n=t=function(t){b(n,t);function n(){v(this,n);return y(this,t.apply(this,arguments))}n.prototype.render=function t(){var n=this.props,a=n.readOnly,i=n.parent,u=n.node,c=n.isSelected,f=n.editor,d=n.value;if(a||!l.Edition.canShowBlockControlsIn(i))return o.createElement(e,this.props);var h=l.Edition.isSortableBlock(this.props);var v=h?p.BlockControlsWrapperSortable:p.BlockControlsWrapper;var y=h?d.document.nodes.findIndex(function(e){return e.key===u.key}):void 0;return o.createElement(v,{SideControls:r,AroundControls:s,index:y,isSelected:c,blockFocused:l.Edition.isNodeFocused(d,u),node:u,parent:i,editor:f,value:d},o.createElement(e,this.props))};return n}(o.Component),t.displayName="withBlockControls("+(0,i.default)(e)+")",n}}t.default=g},2234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=b(a);var l=n(2);var s=n(1);var u=n(3);var c=n(313);var f=n(472);var p=y(f);var d=n(856);var h=y(d);var v=n(315);function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){O(t,e);function t(){g(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.parent,r=t.node,o=t.editor;var a=u.Edition.shouldShowInsertionControls({parent:n,node:r});return i.createElement(i.Fragment,null,a.before&&i.createElement(E,{position:"Before",node:r,parent:n,editor:o}),a.after&&i.createElement(E,{position:"After",node:r,parent:n,editor:o}))};return t}(i.Component);var E=(o=r=function(e){O(t,e);function t(){var n,r,o;g(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=m(this,e.call.apply(e,[this].concat(i))),r),r.state={isHover:false,isOpen:false},r.onMouseEnter=function(){r.setState({isHover:true})},r.onMouseLeave=function(){r.setState({isHover:false})},r.onOpen=function(){r.setState({isOpen:true})},r.onClose=function(){r.setState({isOpen:false,isHover:false})},r.onStartTyping=function(){r.state.isHover&&r.setState({isHover:false})},n),m(r,o)}t.prototype.componentDidUpdate=function e(t,n){var r=n.isHover;var o=this.state.isHover;!r&&o?window.document.body.addEventListener("keydown",this.onStartTyping):r&&!o&&window.document.body.removeEventListener("keydown",this.onStartTyping)};t.prototype.componentWillUnmount=function e(){window.document.body.removeEventListener("keydown",this.onStartTyping)};t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.position,l=o.parent,u=o.node,f=o.editor;var d=this.state,v=d.isHover,y=d.isOpen;var b="document"===l.object;return i.createElement(s.View,{styles:[r.hoverArea,r["hoverArea"+a]],contentEditable:false},i.createElement(s.View,{styles:[r.insertionLine,v&&r.insertionLineVisible]}),i.createElement(p.default,{styles:[r.blockControls],isVisible:v,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,parent:l,node:u},i.createElement(c.ContextPage.Consumer,null,function(e){return i.createElement(s.View,{styles:[r.controlWrapper,b&&r.circleAlign]},i.createElement(s.View,{styles:[r.insertionLineExtension,v&&r.insertionLineVisible]}),i.createElement(h.default,{node:u,parent:l,index:"After"===a?l.nodes.indexOf(u)+1:l.nodes.indexOf(u),replace:false,page:e.page,isOpen:y,onOpen:n.onOpen,onClose:n.onClose,isVisible:v,editor:f,small:true,hideSearch:true}))})))};return t}(i.Component),r.STYLES=l.StyleSheet.create({hoverArea:{position:"absolute",left:0,right:0,height:s.spacing.S300},hoverAreaAfter:{top:"100%"},hoverAreaBefore:{bottom:"100%"},blockControls:{top:"50%",transform:"translate(-100%, -50%)"},controlWrapper:{position:"relative"},circleAlign:{display:"flex",alignItems:"center",justifyContent:"center",width:v.CIRCLE_SIZE,height:v.CIRCLE_SIZE},insertionLine:{background:"transparent",position:"absolute",height:2,top:"50%",left:0,right:0,transform:"translateY(-50%)",transition:"background 0.4s"},insertionLineExtension:{background:"transparent",position:"absolute",height:2,width:50,left:"100%",top:"50%",transform:"translateY(-50%)",transition:"background 0.4s"},insertionLineVisible:{background:s.colors.GREY_LIGHTER}}),o);t.default=w},2236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i;var l=n(0);var s=w(l);n(4);var u=n(2);var c=n(3);var f=n(1);var p=n(2237);var d=O(p);var h=n(2238);var v=O(h);var y=n(2239);var b=O(y);var g=n(2936);var m=O(g);function O(e){return e&&e.__esModule?e:{default:e}}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(o={},o[c.DOC_BLOCKS.HEADING_1]=f.Text.HeadingH700,o[c.DOC_BLOCKS.HEADING_2]=f.Text.HeadingH600,o[c.DOC_BLOCKS.HEADING_3]=f.Text.HeadingH400,o);var C=u.StyleSheet.create({blockHeading:{position:"relative",display:"flex",margin:0,marginBottom:f.spacing.S300,color:f.colors.BLACK},blockHeadingContent:{flex:1},blockHeading1WithMargin:{position:"relative",marginTop:f.spacing.S400+f.spacing.S500+1,":before":{content:'" "',position:"absolute",top:-f.spacing.S400,left:0,height:1,width:"100%",backgroundColor:f.colors.GREY_LIGHTER}},blockHeading2WithMargin:{marginTop:f.spacing.S400},blockHeading3WithMargin:{marginTop:f.spacing.S300}});var P=(i=a=function(e){x(t,e);function t(n){E(this,t);var r=S(this,e.call(this,n));r.onMouseEnter=function(){r.setState({isHover:true})};r.onMouseLeave=function(){r.setState({isHover:false})};r.state={isHover:false};return r}t.prototype.render=function e(){var t=this.props,n=t.value,o=t.node,a=t.children,i=t.attributes,l=t.appendID,f=t.placeholder,p=t.headingIDs,h=t.readOnly;var y=this.state.isHover;var g=this.onMouseEnter,m=this.onMouseLeave;var O=c.Edition.Heading.getLevel(o);var w=p.get(o.key);var E=0===o.text.length&&f;var S=h&&1===O;var x=!c.Edition.isFirstNode(n.document.getParent(o.key),o);var P=_[o.type];return s.createElement("h"+O,r({id:l?w:null,className:(0,u.css)(C.blockHeading,x&&C["blockHeading"+O+"WithMargin"]),onMouseEnter:g,onMouseLeave:m},i),s.createElement("div",{className:(0,u.css)(C.blockHeadingContent)},E&&s.createElement(v.default,{placeholder:f}),s.createElement(P,null,a),h&&s.createElement(b.default,{id:w,hidden:!y})),S&&s.createElement(d.default,null))};return t}(s.Component),a.defaultProps={placeholder:"",appendID:true},a.BlockControls=m.default,i);t.default=P},2237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l;var s=n(0);var u=d(s);var c=n(2);var f=n(1);var p=n(7);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(r=f.ColorPalette.connect(["primary"]),r(o=(i=a=function(e){y(t,e);function t(){var n,r,o;h(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=v(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(){window.scroll(0,0)},n),v(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.colorPrimary;return u.createElement("div",{role:"button",tabIndex:0,className:(0,c.css)(n.blockHeadingUp),style:{color:r},contentEditable:false,onClick:this.onClick},u.createElement(p.IconArrowUp,null))};return t}(u.Component),a.STYLES=c.StyleSheet.create({blockHeadingUp:(l={cursor:"pointer",outline:"none",width:"1em",height:"1em",lineHeight:"1em"},l["@media "+f.MEDIA.TABLET]={display:"none"},l)}),i))||o);t.default=b},2238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=u(a);var l=n(2);var s=n(1);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){p(t,e);function t(){c(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.placeholder;return i.createElement("span",{className:(0,l.css)(n.blockHeadingPlaceholder),contentEditable:false},r)};return t}(i.Component),r.STYLES=l.StyleSheet.create({blockHeadingPlaceholder:{position:"absolute",top:0,left:0,bottom:0,right:0,pointerEvents:"none",opacity:.33,fontWeight:s.font.WEIGHT_LIGHT}}),o);t.default=d},2239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=c(a);var l=n(2);var s=n(1);var u=n(7);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(o=r=function(e){d(t,e);function t(){f(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.id,a=r.hidden;return i.createElement("a",{href:"#"+o,contentEditable:false,className:(0,l.css)(n.blockHeadingAnchor,a&&n.blockHeadingAnchorHidden)},i.createElement("span",{className:(0,l.css)(n.blockHeadingAnchorIcon)},i.createElement(u.IconLink,null)))};return t}(i.Component),r.STYLES=l.StyleSheet.create({blockHeadingAnchor:{width:20,paddingLeft:4,lineHeight:"1em",color:s.colors.BLACK,transition:"opacity 150ms ease",":hover":{color:s.colors.BLUE_BASE}},blockHeadingAnchorIcon:{fontSize:s.font.SIZE_MEDIUM,verticalAlign:"middle"},blockHeadingAnchorHidden:{opacity:0}}),o);t.default=h},2254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InsertionParagraphPlaceholder=t.FirstParagraphPlaceholder=void 0;var r,o;var a=n(0);var i=v(a);var l=n(2);var s=n(12);var u=n(1);var c=n(316);var f=h(c);var p=n(93);var d=h(p);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=l.StyleSheet.create({blockParagraphPlaceholder:{display:"flex",alignItems:"center",position:"absolute",top:0,left:"0.5rem",bottom:0,right:0,pointerEvents:"none",color:u.colors.GREY_BASE},blockParagraphPlaceholderDelayed:{animationName:u.animations.fadeIn,animationDuration:"1s",animationFillMode:"both",animationDelay:"800ms"},commandPaletteShortcut:{border:"1px solid",borderRadius:"3px",padding:"0 0.3rem"}});var O=function(e){g(t,e);function t(){y(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){return i.createElement("span",{className:(0,l.css)(m.blockParagraphPlaceholder),contentEditable:false},i.createElement(s.FormattedMessage,{id:"BlockParagraph.firstPlaceholder",defaultMessage:"Enter your content here..."}))};return t}(i.Component);var w=(o=r=function(e){g(t,e);function t(){y(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.parent;var n="{shortcut} for commands "+(t?"or paste a link to embed content":"")+".";return i.createElement("span",{className:(0,l.css)(m.blockParagraphPlaceholder,m.blockParagraphPlaceholderDelayed),contentEditable:false},i.createElement(s.FormattedMessage,{id:"BlockParagraph.commandsPlaceholder",defaultMessage:n,values:{shortcut:i.createElement("span",{className:(0,l.css)(m.commandPaletteShortcut)},f.default.prettifyUnsafe(d.default.COMMAND_PALETTE))}}))};return t}(i.Component),r.defaultProps={parent:false},o);t.FirstParagraphPlaceholder=O;t.InsertionParagraphPlaceholder=w},2255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n(0);var a=u(o);n(4);var i=n(3);var l=n(471);var s=n(313);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){p(t,e);function t(){var n,r,o;c(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=f(this,e.call.apply(e,[this].concat(i))),r),r.state={newBlockOpen:false},r.onOpenNewBlock=function(){r.setState({newBlockOpen:true})},r.onCloseNewBlock=function(){r.setState({newBlockOpen:false})},n),f(r,o)}t.prototype.render=function e(){var t=this;var n=this.props,o=n.editor,u=n.parent,c=n.node,f=n.blockHovered,p=n.blockFocused;var d=this.state.newBlockOpen;var h="document"===u.object;var v=i.Edition.isEmptyBlock(c);var y=i.Edition.canInsertBlockIn(u);if(v&&y){var b=d||f||p;return a.createElement(l.BlockControls,{parent:u,node:c,isVisible:b},h&&a.createElement(l.BlockGrabber,null),a.createElement(s.ContextPage.Consumer,null,function(e){return a.createElement(s.ContextHint.Consumer,null,function(n){return a.createElement(l.NewBlockControl,r({},t.props,{isVisible:b,isOpen:d,onOpen:t.onOpenNewBlock,onClose:t.onCloseNewBlock,withKeyboardShortcut:p,index:u.nodes.indexOf(c),page:e.page,hideSearch:n,replace:true}))})}))}if(!v&&y)return a.createElement(l.BlockBaseControls,r({},this.props,{menu:a.createElement(l.TextControlsMenu,{node:c,editor:o})}));return null};return t}(a.Component);t.default=d},2932:function(e,t,n){"use strict";var r=function(e,t,n,r,o,a,i,l){false;if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,a,i,l];var c=0;s=new Error(t.replace(/%s/g,function(){return u[c++]}));s.name="Invariant Violation"}s.framesToPop=1;throw s}};e.exports=r},2933:function(e,t,n){"use strict";t.__esModule=true;t.default=p;var r=s(n(0));var o=s(n(2932));var a=l(n(2934));var i="src/index.js";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e;return t}function s(e){return e&&e.__esModule?e:{default:e}}function u(){u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return u.apply(this,arguments)}function c(e,t){if(null==e)return{};var n={};var r=Object.keys(e);var o,a;for(a=0;a<r.length;a++){o=r[a];if(t.indexOf(o)>=0)continue;n[o]=e[o]}if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++){o=i[a];if(t.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;n[o]=e[o]}}return n}function f(e,t){e.prototype.__proto__=t&&t.prototype;e.__proto__=t}function p(e,t,n){void 0===n&&(n=[]);var o=e.displayName||e.name||"Component";var l=a.canAcceptRef(e);var s=Object.keys(t);var d=s.map(a.defaultKey);l||!n.length?void 0:invariant(false);var h=function(o){f(i,o);function i(){var e;for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];e=o.call.apply(o,[this].concat(a))||this;e.handlers=Object.create(null);s.forEach(function(n){var r=t[n];var o=function t(o){if(e.props[r]){var a;e._notifying=true;for(var i=arguments.length,l=new Array(i>1?i-1:0),s=1;s<i;s++)l[s-1]=arguments[s];(a=e.props)[r].apply(a,[o].concat(l));e._notifying=false}e._values[n]=o;e.unmounted||e.forceUpdate()};e.handlers[r]=o});n.length&&(e.attachRef=function(t){e.inner=t});return e}var l=i.prototype;l.shouldComponentUpdate=function e(){return!this._notifying};l.componentWillMount=function e(){var t=this;var n=this.props;this._values=Object.create(null);s.forEach(function(e){t._values[e]=n[a.defaultKey(e)]})};l.componentWillReceiveProps=function e(t){var n=this;var r=this.props;s.forEach(function(e){!a.isProp(t,e)&&a.isProp(r,e)&&(n._values[e]=t[a.defaultKey(e)])})};l.componentWillUnmount=function e(){this.unmounted=true};l.render=function t(){var n=this;var o=this.props,a=o.innerRef,i=c(o,["innerRef"]);d.forEach(function(e){delete i[e]});var l={};s.forEach(function(e){var t=n.props[e];l[e]=void 0!==t?t:n._values[e]});return r.default.createElement(e,u({},i,l,this.handlers,{ref:a||this.attachRef}))};return i}(r.default.Component);h.displayName="Uncontrolled("+o+")";h.propTypes=u({innerRef:function e(){}},a.uncontrolledPropTypes(t,o));n.forEach(function(e){h.prototype[e]=function t(){var n;return(n=this.inner)[e].apply(n,arguments)}});var v=h;if(r.default.forwardRef){v=r.default.forwardRef(function(e,t){return r.default.createElement(h,u({},e,{innerRef:t,__source:{fileName:i,lineNumber:127},__self:this}))});v.propTypes=h.propTypes}v.ControlledComponent=e;v.deferControlTo=function(e,n,r){void 0===n&&(n={});return p(e,u({},t,n),r)};return v}e.exports=t["default"]},2934:function(e,t,n){"use strict";t.__esModule=true;t.uncontrolledPropTypes=l;t.isProp=s;t.defaultKey=u;t.canAcceptRef=c;var r=o(n(2932));function o(e){return e&&e.__esModule?e:{default:e}}var a=function e(){};function i(e,t){return function(n,r){if(void 0!==n[r]&&!n[e])return new Error("You have provided a `"+r+"` prop to `"+t+"` without an `"+e+"` handler prop. This will render a read-only field. If the field should be mutable use `"+u(r)+"`. Otherwise, set `"+e+"`.")}}function l(e,t){var n={};Object.keys(e).forEach(function(e){n[u(e)]=a;var t;false});return n}function s(e,t){return void 0!==e[t]}function u(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function c(e){return!!e&&("function"!==typeof e||e.prototype&&e.prototype.isReactComponent)}},2935:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(0);var o=c(r);var a=n(4);n(40);var i=n(3);var l=n(1);var s=n(7);var u=n(473);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){d(t,e);function t(){var n,r,o;f(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return o=(n=(r=p(this,e.call.apply(e,[this].concat(s))),r),r.onDelete=function(){var e=r.props,t=e.editor,n=e.node;i.Edition.onChange(t,function(e){return e.removeNodeByKey(n.key)})},r.onClickCommand=function(e){var t=r.props,n=t.editor,o=t.node;var l=e.convertOperation;if(!l)return;var s=a.Range.create().moveToRangeOf(o);i.Edition.onChange(n,function(e){return l(e,{range:s})})},r.onChangeToParagraph=function(){var e=r.props,t=e.editor,n=e.node;i.Edition.onChange(t,function(e){return i.Edition.Paragraph.convertToParagraph(e,n)})},n),p(r,o)}t.prototype.render=function e(){var t=this;var n=this.props,r=n.children,a=n.node;return o.createElement(l.Menu,null,[u.COMMANDS.PARAGRAPH,u.COMMANDS.H1,u.COMMANDS.H2,u.COMMANDS.H3].map(function(e){return o.createElement(u.CommandItem,{key:e.id,command:e,active:e.type===a.type,onClick:t.onClickCommand})}),o.createElement(l.Menu.Divider,null),r,o.createElement(l.Menu.Item,{icon:o.createElement(s.IconTrashcan,null),onClick:this.onDelete},"Delete"))};return t}(o.Component);t.default=h},2936:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n(0);var a=h(o);n(40);var i=n(1);var l=n(7);var s=n(3);var u=n(471);var c=n(313);var f=n(2937);var p=d(f);function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){b(t,e);function t(){var n,r,o;v(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=y(this,e.call.apply(e,[this].concat(i))),r),r.state={controlsOpen:false,editAnchor:false},r.onStartChangeAnchor=function(e){e.preventDefault();e.stopPropagation();r.setState({editAnchor:true})},r.onPopoverToggle=function(e){r.setState({editAnchor:false,controlsOpen:e})},r.onAnchorChanged=function(e){var t=r.props,n=t.editor,o=t.node;s.Edition.onChange(n,function(t){return t.setNodeByKey(o.key,{data:e?{id:e}:{}})})},r.onAnchorBlurred=function(){r.setState({controlsOpen:false,editAnchor:false})},n),y(r,o)}t.prototype.render=function e(){var t=this;var n=this.props,o=n.node,s=n.editor;var f=this.state,d=f.controlsOpen,h=f.editAnchor;return a.createElement(u.BlockBaseControls,r({},this.props,{isOpen:d,onToggle:this.onPopoverToggle,menu:h?a.createElement(c.ContextDocument.Consumer,null,function(e){var n=e.headingIDs;return a.createElement(p.default,{value:n.get(o.key),onChange:t.onAnchorChanged,onBlur:t.onAnchorBlurred})}):a.createElement(u.TextControlsMenu,{node:o,editor:s},a.createElement(i.Menu.Item,{icon:a.createElement(l.IconLink,null),onClick:this.onStartChangeAnchor},"Change anchor"))}))};return t}(a.Component);t.default=g},2937:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n(0);var i=h(a);var l=n(2);var s=n(100);var u=d(s);var c=n(3);var f=n(1);var p=n(313);function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(o=r=function(e){b(t,e);function t(){var n,r,o;v(this,t);for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return o=(n=(r=y(this,e.call.apply(e,[this].concat(l))),r),r.input=i.createRef(),r.slugify=function(e){var t=e.target.value.replace(/\s/g,"-");if(!t||"-"===t.slice(-1))return t;return c.Edition.Heading.normalizeID(t)},r.onStopClickEvent=function(e){e.stopPropagation()},r.onStopKeyEvent=function(e){e.stopPropagation();27!==e.keyCode&&13!==e.keyCode||e.preventDefault()},n),y(r,o)}t.prototype.componentDidMount=function e(){if(this.input.current){this.input.current.focus();this.input.current.select()}};t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.value,s=o.onChange,c=o.onBlur;return i.createElement(p.ContextPage.Consumer,null,function(e){var t=e.page,o=e.version;var p=o.page.getURLOf(t);return i.createElement(f.View,{styles:[r.anchorInput],onClick:n.onStopClickEvent,onKeyDown:n.onStopKeyEvent,onKeyUp:n.onStopKeyEvent},i.createElement(f.View,{styles:[r.anchorInputPrefix]},i.createElement(f.Text,null,"/"+p+"#")),i.createElement(u.default,{component:f.AutosizeInput,ref:n.input,type:"text",value:a||"",className:(0,l.css)(r.anchorInputInner),inputClassName:(0,l.css)(r.anchorInputInnerInput),onBeforeChange:n.slugify,onChange:s,onBlur:c,placeholder:"Anchor for this heading",placeholderIsMinWidth:true}))})};return t}(i.Component),r.STYLES=l.StyleSheet.create({anchorInput:{display:"flex",alignItems:"center"},anchorInputPrefix:{padding:f.spacing.S100,flex:"0",background:f.colors.GREY_LIGHTEST,whiteSpace:"nowrap"},anchorInputInner:{flex:"1"},anchorInputInnerInput:{padding:f.spacing.S100,font:"inherit",background:"transparent",border:"none",outline:"none",maxWidth:300}}),o);t.default=g},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.arrayMove=r;t.omit=o;t.closest=l;t.limit=s;t.getElementMargin=c;t.provideDisplayName=f;t.areEqualShallow=p;function r(e,t,n){var r=e.slice(0);if(n>=r.length){var o=n-r.length;while(1+o--)r.push(void 0)}r.splice(n,0,r.splice(t,1)[0]);return r}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).reduce(function(t,r){-1===n.indexOf(r)&&(t[r]=e[r]);return t},{})}var a=t.events={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","touchcancel","mouseup"]};var i=t.vendorPrefix=function(){if("undefined"===typeof window||"undefined"===typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"];var t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function l(e,t){while(e){if(t(e))return e;e=e.parentNode}}function s(e,t,n){if(n<e)return e;if(n>t)return t;return n}function u(e){if("px"===e.substr(-2))return parseFloat(e);return 0}function c(e){var t=window.getComputedStyle(e);return{top:u(t.marginTop),right:u(t.marginRight),bottom:u(t.marginBottom),left:u(t.marginLeft)}}function f(e,t){var n=t.displayName||t.name;return n?e+"("+n+")":e}function p(e,t){if(e===t)return true;for(var n in e)if(!(n in t)||e[n]!==t[n])return false;for(var r in t)if(!(r in e)||e[r]!==t[r])return false;return true}},306:function(e,t,n){var r=n(2016),o=n(2019),a=n(273),i=n(76),l=n(2021);function s(e){if("function"==typeof e)return e;if(null==e)return a;if("object"==typeof e)return i(e)?o(e[0],e[1]):r(e);return l(e)}e.exports=s},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a;var i=n(0);var l=c(i);var s=n(2);var u=n(1);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(a=o=function(e){h(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var o=this.props,a=o.styles,i=o.children,s=f(o,["styles","children"]);return l.createElement(u.View,r({styles:[n.blockControl,a]},s),i)};return t}(l.Component),o.STYLES=s.StyleSheet.create({blockControl:{cursor:"pointer"}}),a);t.default=v},472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,l;var s=n(0);var u=d(s);n(4);var c=n(2);var f=n(3);var p=n(1);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(a=o=function(e){b(t,e);function t(){v(this,t);return y(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES,o=t.PARENT_STYLES,a=t.NODE_STYLES;var i=this.props,l=i.isVisible,s=i.styles,c=i.parent,f=i.node,d=i.children,v=h(i,["isVisible","styles","parent","node","children"]);var y=o[c.type||c.object];var b=a[f.type];return u.createElement(p.View,r({styles:[n.blockControls,l&&n.visible,y,b,s],contentEditable:false},v),d)};return t}(u.Component),o.STYLES=c.StyleSheet.create({blockControls:{position:"absolute",zIndex:p.zIndexes.CONTROLS,height:30,top:0,left:0,paddingRight:p.spacing.S200,transform:"translateX(-100%)",opacity:0,transition:"opacity 0.2s",display:"flex",alignItems:"center",justifyContent:"flex-end",maxWidth:p.spacing.S900,":hover":{opacity:1,zIndex:p.zIndexes.CONTROLS+1}},visible:{opacity:1,zIndex:p.zIndexes.CONTROLS+1}}),o.NODE_STYLES=c.StyleSheet.create((i={},i[f.DOC_BLOCKS.HEADING_1]={top:4},i[f.DOC_BLOCKS.HEADING_2]={top:0},i[f.DOC_BLOCKS.HEADING_3]={top:-2},i[f.DOC_BLOCKS.PARAGRAPH]={top:-2},i)),o.PARENT_STYLES=c.StyleSheet.create((l={document:{width:p.spacing.S900}},l[f.DOC_BLOCKS.BLOCKQUOTE]={paddingRight:7},l[f.DOC_BLOCKS.HINT]={paddingRight:42},l[f.DOC_BLOCKS.TABS_ITEM]={paddingRight:p.spacing.S200-1},l)),a);t.default=g},825:function(e,t,n){var r;var o;var a;false;e.exports=n(2009)()},826:function(e,t,n){var r=n(66);function o(e){return e===e&&!r(e)}e.exports=o},827:function(e,t){function n(e,t){return function(n){if(null==n)return false;return n[e]===t&&(void 0!==t||e in Object(n))}}e.exports=n},829:function(e,t,n){var r=n(626),o=n(168);function a(e,t){return e&&r(e,t,o)}e.exports=a},852:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BlockControlsWrapperSortable=t.BlockControlsWrapper=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i;var l=n(0);var s=d(l);var u=n(2);var c=n(47);var f=n(3);var p=n(1);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t,n){return t!==n&&e.some(function(e){return t[e]!==n[e]})}var g=(a=o=function(e){y(t,e);function t(){var n,r,o;h(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=v(this,e.call.apply(e,[this].concat(i))),r),r.state={blockHovered:false},r.onMouseEnter=function(){r.setState({blockHovered:true})},r.onMouseLeave=function(){r.setState({blockHovered:false})},r.onStartTyping=function(){r.state.blockHovered&&r.setState({blockHovered:false})},n),v(r,o)}t.prototype.shouldComponentUpdate=function e(t,n){if(n.blockHovered!==this.state.blockHovered)return true;if(b(["node","editor","blockFocused","SideControls","AroundControls","sortable"],this.props,t))return true;if(b(["type","object","data"],this.props.parent,t.parent))return true;if(this.props.isSelected||t.isSelected)return true;var r=f.Edition.shouldShowInsertionControls({parent:this.props.parent,node:this.props.node});var o=f.Edition.shouldShowInsertionControls({parent:t.parent,node:t.node});if(b(["after","before"],r,o))return true;return false};t.prototype.componentDidUpdate=function e(t,n){var r=n.blockHovered;var o=this.state.blockHovered;!r&&o?window.document.body.addEventListener("keydown",this.onStartTyping):r&&!o&&window.document.body.removeEventListener("keydown",this.onStartTyping)};t.prototype.componentWillUnmount=function e(){window.document.body.removeEventListener("keydown",this.onStartTyping)};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.SideControls,a=r.AroundControls,i=r.children,l=r.node,u=r.parent,c=r.editor,f=r.sortable,d=r.blockFocused;var h=this.state.blockHovered;return s.createElement(p.View,{styles:n.blockWrapper},s.createElement(p.View,{styles:n.sideControlsWrapper,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},s.createElement(o,{node:l,editor:c,parent:u,blockHovered:h,blockFocused:d,sortable:f}),i),s.createElement(a,{node:l,parent:u,editor:c}))};return t}(s.Component),o.STYLES=u.StyleSheet.create({blockWrapper:{position:"relative"},sideControlsWrapper:{position:"relative"}}),a);var m=(0,c.SortableElement)(i=function(e){y(t,e);function t(){h(this,t);return v(this,e.apply(this,arguments))}t.prototype.render=function e(){return s.createElement(g,r({sortable:true},this.props))};return t}(s.Component))||i;t.BlockControlsWrapper=g;t.BlockControlsWrapperSortable=m},853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(0);var o=g(r);var a=n(2933);var i=b(a);var l=n(1);var s=n(7);var u=n(472);var c=b(u);var f=n(854);var p=b(f);var d=n(314);var h=b(d);var v=n(315);var y=b(v);function b(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=function(e){w(t,e);function t(){var n,r,o;m(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=O(this,e.call.apply(e,[this].concat(i))),r),r.onToggleMenu=function(){var e=r.props,t=e.isOpen,n=e.onToggle,o=e.onClose;t&&o&&o();n(!t)},n),O(r,o)}t.prototype.render=function e(){var t=this.props,n=t.isOpen,r=t.menu,a=t.parent,i=t.node,u=t.blockHovered,f=t.blockFocused;var d="document"===a.object;return o.createElement(c.default,{isVisible:u||f||n,parent:a,node:i},d&&o.createElement(p.default,null),o.createElement(h.default,null,o.createElement(l.Popover.ManualPortal,{closeOnOutsideClick:true,closeOnEsc:true,fixed:false,onClose:this.onToggleMenu,anchor:o.createElement(y.default,{small:!d,onClick:this.onToggleMenu,active:n,rotated:n?-180:0},o.createElement(s.IconChevronDown,null)),isOpen:n},o.createElement(l.Popover,{position:"south",autoPosition:true,align:"start"},r))))};return t}(o.Component);var S=(0,i.default)(E,{isOpen:"onToggle"});t.default=S},854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n(0);var l=v(i);var s=n(2);var u=n(47);var c=n(7);var f=n(1);var p=n(314);var d=h(p);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(0,u.SortableHandle)(r=(a=o=function(e){g(t,e);function t(){y(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;return l.createElement(d.default,{styles:[n.blockGrabber]},l.createElement(c.IconGrabber,null))};return t}(l.Component),o.STYLES=s.StyleSheet.create({blockGrabber:{display:"flex",marginRight:12,cursor:"grab",fontSize:"18px",height:18,width:18,color:f.colors.GREY_BASE,":hover":{color:f.colors.GREY_DARKER}}}),a))||r;t.default=m},855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(0);var o=f(r);n(4);var a=n(3);var i=n(1);var l=n(7);var s=n(853);var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){h(t,e);function t(){var n,r,o;p(this,t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return o=(n=(r=d(this,e.call.apply(e,[this].concat(l))),r),r.onDelete=function(){var e=r.props,t=e.editor,n=e.node;a.Edition.onChange(t,function(e){return e.removeNodeByKey(n.key)})},n),d(r,o)}t.prototype.render=function e(){var t=this.props,n=t.parent,r=t.node,a=t.blockHovered,s=t.blockFocused;return o.createElement(u.default,{node:r,parent:n,blockHovered:a,blockFocused:s,menu:o.createElement(i.Menu,null,o.createElement(i.Menu.Item,{icon:o.createElement(l.IconTrashcan,null),onMouseDown:this.onDelete},"Delete"))})};return t}(o.Component);t.default=v},856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l;var s=n(0);var u=P(s);var c=n(2);var f=n(5);var p=n(3);var d=n(1);var h=n(14);var v=n(7);var y=n(93);var b=C(y);var g=n(31);var m=n(146);var O=C(m);var w=n(473);var E=n(315);var S=C(E);var x=n(314);var _=C(x);function C(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=(r=(0,f.connect)(),r(o=(i=a=function(e){j(t,e);function t(n){var r;k(this,t);var o=T(this,e.call(this,n));o.keyMap=(r={},r[b.default.COMMAND_PALETTE]=function(){var e=o.props.isOpen;o.toggleMenu({isOpen:!e})},r);o.insertImageOperation=function(){o.fileUploader&&h.FileUploader.promptFile(o.fileUploader)};o.insertPageRefOperation=function(e,t){var n=o.props.page;var r=p.Edition.PageRef.createPageRef(n);return p.Edition.insertBlockAt(e,r,t)};o.onClose=function(){o.toggleMenu({isOpen:false})};o.onOpen=function(){o.toggleMenu({isOpen:true})};o.onKeyDown=function(e){var t=o.onPick,n=o.onCursorMove;var r=o.state.paletteState;(0,w.commandKeydown)(e,{onPick:function e(){var n=r.getCurrentCommand();n&&t(n)},onCursorMove:n,onClose:function e(){o.toggleMenu({isOpen:false,focusEditor:true})}})};o.onInputChange=function(e){var t=e.target.value;o.setState(function(e){return{paletteState:e.paletteState.updateQuery(t)}})};o.onPick=function(e){var t=o.props,n=t.editor,r=t.parent,a=t.index,i=t.replace;var l=e.insertOperation||e.id===w.COMMANDS.IMAGE.id&&o.insertImageOperation||e.id===w.COMMANDS.PAGE_REF.id&&o.insertPageRefOperation;var s=e.id!==w.COMMANDS.IMAGE.id;s&&o.toggleMenu({isOpen:false});p.Edition.onChange(n,function(e){l&&l(e,{parent:r,index:a,replace:i});return s?e.focus():e})};o.onCursorMove=function(e,t){o.setState(function(n){return{paletteState:n.paletteState.moveCursor(e,t)}})};o.onFiles=function(e){var t=o.props,n=t.dispatch,r=t.editor,a=t.parent,i=t.index,l=t.replace;p.Asset.createFromFile(e[0]).then(function(e){n((0,g.createAsset)(e));p.Edition.onChange(r,function(t){return t.call(p.Edition.insertBlockAt,p.Edition.Image.createImage({assetID:e.uid}),{parent:a,index:i,replace:l})});o.toggleMenu({isOpen:false,focusEditor:true})})};var a=w.COMMANDS.ALL.filter(function(e){return p.Edition.canInsertBlockIn(n.parent,e.type)});o.state={paletteState:w.CommandPaletteState.create(a)};return o}t.prototype.componentWillReceiveProps=function e(t){var n=this.props.parent!==t.parent;if(n){var r=w.COMMANDS.ALL.filter(function(e){return p.Edition.canInsertBlockIn(t.parent,e.type)});this.setState({paletteState:w.CommandPaletteState.create(r)})}};t.prototype.toggleMenu=function e(t){var n=t.isOpen,r=t.focusEditor,o=void 0!==r&&r;var a=this.props,i=a.onClose,l=a.onOpen,s=a.editor;this.setState(function(e){return{paletteState:e.paletteState.reset()}});n?l():i();o&&p.Edition.onChange(s,function(e){return e.focus()})};t.prototype.render=function e(){var n=this;var r=t.STYLES,o=t.SEARCH_STYLES;var a=this.props,i=a.isOpen,l=a.parent,s=a.node,c=a.replace,f=a.hideSearch,p=a.small,y=a.isVisible,b=a.withKeyboardShortcut;var g=this.state.paletteState;var m="document"===l.object;var E=o[l.type];return u.createElement(_.default,{styles:[r.newBlockControl,(y||i)&&r.visible]},i&&u.createElement(d.View,{styles:[r.searchContainer,E,f&&r.searchContainerHidden]},u.createElement(w.CommandSearch,{autoFocus:true,withBackground:m,onKeyDown:this.onKeyDown,value:g.query,onChange:this.onInputChange})),u.createElement(d.Popover.ManualPortal,{closeOnOutsideClick:true,fixed:false,onClose:this.onClose,anchor:u.createElement(S.default,{small:p||!m,onClick:i?this.onClose:this.onOpen,active:i,rotated:i?45:0},u.createElement(v.IconPlus,null)),isOpen:i},u.createElement(d.Popover,{position:"south",autoPosition:true,align:"start"},u.createElement(h.FileUploader,{ref:function e(t){n.fileUploader=t},onFiles:this.onFiles}),u.createElement(w.CommandPalette,{paletteState:g,onPick:this.onPick,activeType:c?s.type:""}))),b&&u.createElement(O.default,{keyMap:this.keyMap}))};return t}(u.Component),a.defaultProps={hideSearch:false,small:false,withKeyboardShortcut:false},a.STYLES=c.StyleSheet.create({newBlockControl:{position:"relative",transition:"opacity 0.2s",opacity:0,":hover":{opacity:1}},visible:{opacity:1},searchContainer:{display:"flex",alignItems:"center",position:"absolute",paddingLeft:d.spacing.S200,left:"100%",top:0,bottom:0},searchContainerHidden:{opacity:0}}),a.SEARCH_STYLES=c.StyleSheet.create((l={},l[p.DOC_BLOCKS.HINT]={paddingLeft:42},l)),i))||o);t.default=M}});