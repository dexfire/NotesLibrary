//dependencies=tslib#?,react#?,react-dom#?,@uifabric/utilities/Async#0,@uifabric/utilities/object#0,@uifabric/utilities/EventGroup,@uifabric/utilities/dom#0,@uifabric/merge-styles/Stylesheet,@uifabric/merge-styles/transforms/kebabRules#0,@uifabric/merge-styles/getVendorSettings#0,@uifabric/merge-styles/transforms/prefixRules,@uifabric/merge-styles/transforms/provideUnits#0,@uifabric/merge-styles/transforms/rtlifyRules,@uifabric/merge-styles/styleToClassName,@uifabric/merge-styles/extractStyleParts,@uifabric/merge-styles/mergeStyles,@uifabric/merge-styles/concatStyleSets#0,@uifabric/merge-styles/mergeStyleSets,@uifabric/merge-styles/fontFace,@uifabric/merge-styles/keyframes,@uifabric/merge-styles/index,@uifabric/merge-styles/lib/index,@uifabric/utilities/scroll,@uifabric/utilities/AutoScroll,@uifabric/utilities/warn#0,@uifabric/utilities/keyboard#0,@uifabric/utilities/initializeFocusRects,@uifabric/utilities/initializeDir,@uifabric/utilities/BaseComponent,@uifabric/utilities/Context,@uifabric/utilities/GlobalSettings#0,@uifabric/utilities/Customizations,prop-types#?,@uifabric/utilities/Customizer,@uifabric/utilities/DelayedRender,@uifabric/utilities/FabricPerformance#0,@uifabric/utilities/KeyCodes#0,@uifabric/utilities/Rectangle#0,@uifabric/utilities/array#0,@uifabric/utilities/assertNever#0,@uifabric/utilities/autobind#0,@uifabric/utilities/classNamesFunction,@uifabric/utilities/createRef#0,@uifabric/utilities/css#0,@uifabric/utilities/hoistStatics#0,@uifabric/utilities/customizable,@uifabric/utilities/focus,@uifabric/utilities/hoist#0,@uifabric/utilities/initials#0,@uifabric/utilities/localStorage#0,@uifabric/utilities/language,@uifabric/utilities/math#0,@uifabric/utilities/memoize#0,@uifabric/utilities/overflow#0,@uifabric/utilities/properties,@uifabric/utilities/resources#0,@uifabric/utilities/sessionStorage#0,@uifabric/merge-styles/lib/transforms/rtlifyRules,@uifabric/utilities/rtl,@uifabric/utilities/string#0,@uifabric/utilities/styled,@uifabric/utilities/index,@uifabric/utilities/lib/index,OfficeFabric/Utilities,OfficeFabric/components/DetailsList/DetailsList.types#0,OfficeFabric/components/FocusZone/FocusZone.types#0,OfficeFabric/components/FocusZone/FocusZone,OfficeFabric/components/FocusZone/index,OfficeFabric/FocusZone,OfficeFabric/components/Icon/Icon.types#0,OfficeFabric/components/Image/Image.types#0,OfficeFabric/components/Image/Image.base,@uifabric/styling/MergeStyles,@uifabric/styling/utilities/buildClassMap,@uifabric/utilities/lib/warn,@uifabric/utilities/lib/GlobalSettings,@uifabric/styling/utilities/icons,@uifabric/styling/utilities/getIconClassName,@uifabric/styling/utilities/index,@uifabric/styling/styles/AnimationStyles,@uifabric/styling/styles/DefaultPalette#0,@uifabric/styling/styles/fonts#0,@uifabric/utilities/lib/language,@uifabric/styling/styles/DefaultFontStyles,@uifabric/styling/styles/CommonStyles#0,@uifabric/utilities/lib/initializeFocusRects,@uifabric/styling/styles/zIndexes#0,@uifabric/styling/styles/getFocusStyle,@uifabric/styling/styles/hiddenContentStyle#0,@uifabric/styling/styles/PulsingBeaconAnimationStyles,@uifabric/styling/styles/getGlobalClassNames#0,@uifabric/utilities/lib/Customizations,@microsoft/load-themed-styles#?,@uifabric/styling/styles/theme,@uifabric/styling/styles/GeneralStyles#0,@uifabric/styling/styles/index,@uifabric/styling/classNames/AnimationClassNames,@uifabric/styling/classNames/FontClassNames,@uifabric/styling/classNames/ColorClassNames,@uifabric/styling/classNames/index,@uifabric/styling/index,@uifabric/styling/lib/index,OfficeFabric/Styling,OfficeFabric/components/Image/Image.styles,OfficeFabric/components/Image/Image,OfficeFabric/components/Icon/Icon.base,OfficeFabric/components/Icon/Icon.styles#0,OfficeFabric/components/Icon/Icon,OfficeFabric/components/Icon/index,OfficeFabric/Icon,OfficeFabric/components/Fabric/Fabric.styles,OfficeFabric/components/Fabric/Fabric,OfficeFabric/components/Fabric/index,OfficeFabric/Fabric,OfficeFabric/components/Layer/Layer.notification#0,OfficeFabric/components/Layer/Layer.base,OfficeFabric/components/Layer/PortalLayer.base,OfficeFabric/components/Layer/Layer.styles,OfficeFabric/components/Layer/Layer,OfficeFabric/components/Layer/LayerHost,OfficeFabric/components/Layer/index,OfficeFabric/Layer,OfficeFabric/components/GroupedList/GroupSpacer.scss,OfficeFabric/components/GroupedList/GroupSpacer,OfficeFabric/utilities/selection/interfaces#0,OfficeFabric/utilities/selection/Selection,OfficeFabric/utilities/selection/SelectionZone,OfficeFabric/utilities/selection/index,OfficeFabric/components/Check/Check.styles,OfficeFabric/components/Check/Check.base,OfficeFabric/components/Check/Check,OfficeFabric/components/Check/index,OfficeFabric/Check,OfficeFabric/components/Spinner/Spinner.types#0,OfficeFabric/components/Spinner/Spinner.base,OfficeFabric/components/Spinner/Spinner.styles,OfficeFabric/components/Spinner/Spinner,OfficeFabric/components/Spinner/index,OfficeFabric/Spinner,OfficeFabric/components/GroupedList/GroupHeader.scss,OfficeFabric/components/GroupedList/GroupHeader,OfficeFabric/utilities/keytips/KeytipConstants#0,OfficeFabric/utilities/keytips/KeytipManager,OfficeFabric/utilities/keytips/KeytipUtils,OfficeFabric/components/KeytipData/KeytipData,OfficeFabric/components/KeytipData/index,OfficeFabric/KeytipData,OfficeFabric/components/Link/Link.base,OfficeFabric/components/Link/Link.styles,OfficeFabric/components/Link/Link,OfficeFabric/components/Link/index,OfficeFabric/Link,OfficeFabric/components/GroupedList/GroupShowAll.scss,OfficeFabric/components/GroupedList/GroupShowAll,OfficeFabric/components/GroupedList/GroupFooter.scss,OfficeFabric/components/GroupedList/GroupFooter,OfficeFabric/components/List/List,OfficeFabric/components/List/List.types#0,OfficeFabric/components/List/index,OfficeFabric/List,OfficeFabric/components/GroupedList/GroupedList.scss,OfficeFabric/components/GroupedList/GroupedListSection,OfficeFabric/components/GroupedList/GroupedList,OfficeFabric/components/GroupedList/GroupedList.types#0,OfficeFabric/components/GroupedList/index,OfficeFabric/GroupedList,OfficeFabric/components/DetailsList/DetailsRowCheck.scss,OfficeFabric/components/Check/Check.scss,OfficeFabric/components/DetailsList/DetailsRowCheck,OfficeFabric/components/DetailsList/DetailsHeader.scss
define(["require","exports","tslib","react","react-dom","../../Utilities","./DetailsList.types","../../FocusZone","../../Icon","../../Layer","../GroupedList/GroupSpacer","../../GroupedList","./DetailsRowCheck","./DetailsRowCheck.scss","../../utilities/selection/interfaces","./DetailsHeader.scss"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){"use strict";function rt(n){n.stopPropagation()}var d;Object.defineProperty(t,"__esModule",{value:!0});var w=p,k=v,g=0,nt=1,tt=16,it=24,b;(function(n){n[n.none=0]="none";n[n.hidden=1]="hidden";n[n.visible=2]="visible"})(b=t.SelectAllVisibility||(t.SelectAllVisibility={}));d=function(n){function t(t){var u=n.call(this,t)||this;return u._root=f.createRef(),u._onRenderColumnHeaderTooltip=function(n){return r.createElement("span",{className:n.hostClassName},n.children)},u._onSelectAllClicked=function(){var n=u.props.selection;n.toggleAllSelected()},u._onRootMouseDown=function(n){var t=n.target.getAttribute("data-sizer-index"),i=Number(t),r=u.props.columns;t!==null&&n.button===g&&(u.setState({columnResizeDetails:{columnIndex:i,columnMinWidth:r[i].calculatedWidth,originX:n.clientX}}),n.preventDefault(),n.stopPropagation())},u._onRootMouseMove=function(n){var t=u.state,i=t.columnResizeDetails,r=t.isSizing;i&&!r&&n.clientX!==i.originX&&u.setState({isSizing:!0})},u._onRootKeyDown=function(n){var o=u.state,e=o.columnResizeDetails,a=o.isSizing,s=u.props,h=s.columns,c=s.onColumnResized,l=n.target.getAttribute("data-sizer-index"),r,t;l&&!a&&(r=Number(l),e?(t=void 0,n.which===13?(u.setState({columnResizeDetails:undefined}),n.preventDefault(),n.stopPropagation()):n.which===37?t=f.getRTL()?1:-1:n.which===39&&(t=f.getRTL()?-1:1),t&&(n.shiftKey||(t*=10),u.setState({columnResizeDetails:i.__assign({},e,{columnMinWidth:e.columnMinWidth+t})}),c&&c(h[r],e.columnMinWidth+t,r),n.preventDefault(),n.stopPropagation())):n.which===13&&(u.setState({columnResizeDetails:{columnIndex:r,columnMinWidth:h[r].calculatedWidth}}),n.preventDefault(),n.stopPropagation()))},u._onSizerMouseMove=function(n){var e=n.buttons,r=u.props,o=r.onColumnIsSizingChanged,s=r.onColumnResized,h=r.columns,t=u.state.columnResizeDetails,i;if(e!==undefined&&e!==nt){u._onSizerMouseUp(n);return}n.clientX!==t.originX&&o&&o(h[t.columnIndex],!0);s&&(i=n.clientX-t.originX,f.getRTL()&&(i=-i),s(h[t.columnIndex],t.columnMinWidth+i,t.columnIndex))},u._onSizerBlur=function(){var n=u.state.columnResizeDetails;n&&u.setState({columnResizeDetails:undefined,isSizing:!1})},u._onSizerMouseUp=function(){var n=u.props,i=n.columns,t=n.onColumnIsSizingChanged,r=u.state.columnResizeDetails;u.setState({columnResizeDetails:undefined,isSizing:!1});t&&t(i[r.columnIndex],!1)},u.state={columnResizeDetails:undefined,groupNestingDepth:u.props.groupNestingDepth,isAllCollapsed:u.props.isAllCollapsed},u._onToggleCollapseAll=u._onToggleCollapseAll.bind(u),u._onSelectAllClicked=u._onSelectAllClicked.bind(u),u._id=f.getId("header"),u}return i.__extends(t,n),t.prototype.componentDidMount=function(){var t=this.props.selection,i=this._root.current,n=u.findDOMNode(i);this._events.on(t,y.SELECTION_CHANGE,this._onSelectionChanged);this._events.on(n,"mousedown",this._onRootMouseDown);this._events.on(n,"keydown",this._onRootKeyDown)},t.prototype.componentWillReceiveProps=function(n){var t=this.state.groupNestingDepth;n.groupNestingDepth!==t&&this.setState({groupNestingDepth:n.groupNestingDepth})},t.prototype.render=function(){var n=this,t=this.props,ut=t.columns,ft=t.ariaLabel,u=t.ariaLabelForSelectAllCheckbox,p=t.selectAllVisibility,et=t.ariaLabelForSelectionColumn,i=this.state,v=i.isAllSelected,ot=i.columnResizeDetails,y=i.isSizing,d=i.groupNestingDepth,st=i.isAllCollapsed,g=p!==b.none,nt=this.props.onRenderColumnHeaderTooltip,rt=nt===void 0?this._onRenderColumnHeaderTooltip:nt;return r.createElement(o.FocusZone,{role:"row","aria-label":ft,className:f.css("ms-DetailsHeader",w.root,v&&"is-allSelected "+w.rootIsAllSelected,p===b.hidden&&"is-selectAllHidden "+w.rootIsSelectAllHidden,!!ot&&y&&"is-resizingColumn"),componentRef:this._root,onMouseMove:this._onRootMouseMove,"data-automationid":"DetailsHeader",direction:o.FocusZoneDirection.horizontal},g?[r.createElement("div",{key:"__checkbox",className:f.css("ms-DetailsHeader-cell","ms-DetailsHeader-cellIsCheck",w.cell,w.cellIsCheck,k.owner,v&&k.isSelected),"aria-labelledby":this._id+"-check",onClick:this._onSelectAllClicked,"aria-colindex":0,role:"columnheader"},rt({hostClassName:f.css(w.checkTooltip),id:this._id+"-checkTooltip",setAriaDescribedBy:!1,content:u,children:r.createElement(a.DetailsRowCheck,{id:this._id+"-check","aria-label":et,"aria-describedby":this._id+"-checkTooltip","data-is-focusable":!0,isHeader:!0,selected:v,anySelected:!1,canSelect:!0})},this._onRenderColumnHeaderTooltip)),u&&!this.props.onRenderColumnHeaderTooltip?r.createElement("label",{key:"__checkboxLabel",id:this._id+"-checkTooltip",className:w.accessibleLabel},u):null]:null,d>0&&this.props.collapseAllVisibility===l.CollapseAllVisibility.visible?r.createElement("div",{className:f.css("ms-DetailsHeader-cell",w.cell),onClick:this._onToggleCollapseAll,"data-is-focusable":!0},r.createElement(s.Icon,{className:f.css("ms-DetailsHeader-collapseButton",w.collapseButton,st&&"is-collapsed "+w.collapseButtonIsCollapsed),iconName:"ChevronDown"})):null,c.GroupSpacer({count:d-1}),ut.map(function(t,i){return[r.createElement("div",{key:t.key,role:"columnheader","aria-sort":t.isSorted?t.isSortedDescending?"descending":"ascending":"none","aria-disabled":t.columnActionsMode===e.ColumnActionsMode.disabled,"aria-colindex":(g?1:0)+i,className:f.css("ms-DetailsHeader-cell",w.cell,t.headerClassName,t.columnActionsMode!==e.ColumnActionsMode.disabled&&"is-actionable "+w.cellIsActionable,!t.name&&"is-empty "+w.cellIsEmpty,(t.isSorted||t.isGrouped||t.isFiltered)&&"is-icon-visible",t.isPadded&&w.cellWrapperPadded),style:{width:t.calculatedWidth+tt+(t.isPadded?it:0)},"data-automationid":"ColumnsHeaderColumn","data-item-key":t.key},rt({hostClassName:f.css(w.cellTooltip),id:n._id+"-"+t.key+"-tooltip",setAriaDescribedBy:!1,content:t.columnActionsMode!==e.ColumnActionsMode.disabled?t.ariaLabel:"",children:r.createElement("span",{id:n._id+"-"+t.key,"aria-label":t.isIconOnly?t.name:undefined,"aria-labelledby":t.isIconOnly?undefined:n._id+"-"+t.key+"-name ",className:f.css("ms-DetailsHeader-cellTitle",w.cellTitle),"data-is-focusable":t.columnActionsMode!==e.ColumnActionsMode.disabled,role:t.columnActionsMode!==e.ColumnActionsMode.disabled?"button":undefined,"aria-describedby":n.props.onRenderColumnHeaderTooltip?n._id+"-"+t.key+"-tooltip":undefined,onContextMenu:n._onColumnContextMenu.bind(n,t),onClick:n._onColumnClick.bind(n,t),"aria-haspopup":t.columnActionsMode===e.ColumnActionsMode.hasDropdown},r.createElement("span",{id:n._id+"-"+t.key+"-name",className:f.css("ms-DetailsHeader-cellName",w.cellName,(u={},u[w.iconOnlyHeader]=t.isIconOnly,u))},(t.iconName||t.iconClassName)&&r.createElement(s.Icon,{className:f.css(w.nearIcon,t.iconClassName),iconName:t.iconName}),t.isIconOnly?undefined:t.name),t.isFiltered&&r.createElement(s.Icon,{className:w.nearIcon,iconName:"Filter"}),t.isSorted&&r.createElement(s.Icon,{className:f.css(w.nearIcon,w.sortIcon),iconName:t.isSortedDescending?"SortDown":"SortUp"}),t.isGrouped&&r.createElement(s.Icon,{className:w.nearIcon,iconName:"GroupedDescending"}),t.columnActionsMode===e.ColumnActionsMode.hasDropdown&&!t.isIconOnly&&r.createElement(s.Icon,{className:f.css("ms-DetailsHeader-filterChevron",w.filterChevron),iconName:"ChevronDown"}))},n._onRenderColumnHeaderTooltip)),t.ariaLabel&&!n.props.onRenderColumnHeaderTooltip?r.createElement("label",{key:t.key+"_label",id:n._id+"-"+t.key+"-tooltip",className:w.accessibleLabel},t.ariaLabel):null,t.isResizable&&n._renderColumnSizer(i)];var u}),y&&r.createElement(h.Layer,null,r.createElement("div",{className:f.css(y&&w.sizingOverlay),onMouseMove:this._onSizerMouseMove,onMouseUp:this._onSizerMouseUp})))},t.prototype.focus=function(){return Boolean(this._root.current&&this._root.current.focus())},t.prototype._renderColumnSizer=function(n){var u=this.props.columns,e=this.props.columns[n],i=this.state.columnResizeDetails,t;return r.createElement("div",{key:e.key+"_sizer","aria-hidden":!0,role:"button","data-is-focusable":!1,onClick:rt,"data-sizer-index":n,onBlur:this._onSizerBlur,className:f.css("ms-DetailsHeader-cellSizer",w.cellSizer,n<u.length-1?w.cellSizerStart:w.cellSizerEnd,(t={},t["is-resizing "+w.cellIsResizing]=i&&i.columnIndex===n,t)),onDoubleClick:this._onSizerDoubleClick.bind(this,n)})},t.prototype._onSizerDoubleClick=function(n){var t=this.props,i=t.onColumnAutoResized,r=t.columns;i&&i(r[n],n)},t.prototype._onSelectionChanged=function(){var n=this.props.selection.isAllSelected();this.state.isAllSelected!==n&&this.setState({isAllSelected:n})},t.prototype._onColumnClick=function(n,t){var i=this.props.onColumnClick;if(n.onColumnClick)n.onColumnClick(t,n);i&&i(t,n)},t.prototype._onColumnContextMenu=function(n,t){var i=this.props.onColumnContextMenu;if(n.onColumnContextMenu){n.onColumnContextMenu(n,t);t.preventDefault()}i&&(i(n,t),t.preventDefault())},t.prototype._onToggleCollapseAll=function(){var n=this.props.onToggleCollapseAll,t=!this.state.isAllCollapsed;this.setState({isAllCollapsed:t});n&&n(t)},t.defaultProps={selectAllVisibility:b.visible,collapseAllVisibility:l.CollapseAllVisibility.visible},t}(f.BaseComponent);t.DetailsHeader=d});
//direct-dependencies=tslib,react,react-dom,OfficeFabric/Utilities,OfficeFabric/components/DetailsList/DetailsList.types,OfficeFabric/FocusZone,OfficeFabric/Icon,OfficeFabric/Layer,OfficeFabric/components/GroupedList/GroupSpacer,OfficeFabric/GroupedList,OfficeFabric/components/DetailsList/DetailsRowCheck,OfficeFabric/components/DetailsList/DetailsRowCheck.scss,OfficeFabric/utilities/selection/interfaces,OfficeFabric/components/DetailsList/DetailsHeader.scss
