webpackJsonp([13],{101:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=y(a);var i=r(26);var u=v(i);var c=r(2);var s=r(1);r(3);var f=r(14);var p=r(2653);var d=v(p);var m=r(519);var h=v(m);function v(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(o=n=function(e){b(t,e);function t(){g(this,t);return E(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.org,a=n.title,i=n.status,c=n.children,p=n.footer,m=n.error;return l.createElement(s.View,{styles:[r.pageWrapper]},l.createElement(u.default,{title:a}),l.createElement(f.LegacyBanner,null),l.createElement(s.View,{styles:[r.pageInner]},l.createElement(s.View,{styles:[r.modalWrapper]},o&&l.createElement(d.default,{org:o}),l.createElement(h.default,{title:a,status:i,error:m,hint:p},c))))};return t}(l.Component),n.STYLES=c.StyleSheet.create({pageWrapper:{display:"flex",flexDirection:"column",flex:1},pageInner:{display:"flex",alignItems:"stretch",justifyContent:"center",flexDirection:"column",flex:1,paddingRight:s.spacing.S200,paddingLeft:s.spacing.S200},modalWrapper:{paddingBottom:50}}),o);t.default=w},115:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=["auth/network-request-failed","auth/too-many-requests","auth/user-disabled","auth/popup-closed-by-user","auth/cancelled-popup-request","auth/email-already-in-use","auth/weak-password","auth/account-exists-with-different-credential","auth/invalid-email","auth/user-not-found","auth/wrong-password","auth/user-disabled","auth/too-many-requests","auth/expired-action-code","auth/invalid-verification-code","auth/code-expired","auth/invalid-phone-number"];var o=["auth/popup-closed-by-user","auth/cancelled-popup-request"];var a={"auth/code-expired":"The SMS code has expired. Please try again.","auth/invalid-verification-code":"The SMS verification code entered is invalid.","auth/invalid-phone-number":"The format of the phone number provided is incorrect.","auth/network-request-failed":"A network error has occurred. The service may be blocked by your ISP or in your area."};function l(e){return!(e.code&&n.indexOf(e.code)>-1||e.status&&403===e.status)}function i(e){return!!(e.code&&o.indexOf(e.code)>-1)}function u(e){if(a[e.code])return new Error(a[e.code]);return e}function c(e,t){if(i(e))return;t(u(e));if(l(e))throw e}t.isAuthException=l;t.isIgnoredException=i;t.handleException=c},241:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getStatus=t.createAuthRoute=t.getAuthRoute=t.createAuthContext=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o=r(90);var a=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function i(e){e.org||(e.space=null);e.invite&&(e.noSSO="guest");return e}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=n({},e);t.toMode&&(r.mode=t.toMode);t.toOrg&&(r.org=t.toOrg);t.toSpace&&(r.space=t.toSpace);t.toLocation&&(r.location=t.toLocation);t.withInvite&&(r.invite=t.withInvite);t.withoutSSO&&(r.noSSO="guest");return i(r)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=u(e,t);var n=[r.mode,r.org,r.org?r.space:null].filter(Boolean).join("/");var o={};r.invite&&(o.invite=r.invite);r.email&&(o.email=r.email);!r.invite&&r.noSSO&&(o.no_sso=r.noSSO);r.location&&(o.location=r.location);var l=a.default.stringify(o);return{pathname:"/"+n,search:l?"?"+l:""}}function s(e){if("account_exists"==e.noSSO)return"This account has been created without SSO, you must login with your normal credentials";if(e.invite)return"Once signed-in, you'll be added to this organization";return null}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c({mode:"login",org:null,space:null,location:null,invite:null,noSSO:null,email:null},e)}t.createAuthContext=i;t.getAuthRoute=c;t.createAuthRoute=f;t.getStatus=s},2634:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l,i,u;var c=r(0);var s=C(c);var f=r(5);var p=r(2);var d=r(13);var m=r(3);var h=r(1);var v=r(78);var y=r(2635);var g=_(y);var E=r(517);var b=_(E);var w=r(518);var S=_(w);var P=r(2637);var O=_(P);function _(e){return e&&e.__esModule?e:{default:e}}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(n=(0,f.connect)(function(e,t){var r=e.database;var n=t.migrationStatus;return{ghStatuses:n.books.map(function(e){return e.spaceID?r.getCollection(m.GitHubSyncStatus.queryBySpace(e.spaceID)).first():null})}}),o=h.Skeleton.connectToSkeleton(),n(a=(0,d.withRouter)(a=o(a=(i=l=function(e){k(t,e);function t(r){T(this,t);var n=x(this,e.call(this,r));u.call(n);var o=r.migrationStatus,a=r.ghStatuses;n.state=o.books.reduce(function(e,t){e[t.bookID]={waitingForUpdate:false,prevStatus:t.status,ghStatus:a.get(t.bookID,null)};return e},{});return n}t.getDerivedStateFromProps=function e(t,r){var n=t.migrationStatus,o=t.ghStatuses;return n.books.reduce(function(e,t){var n=o?o.get(t.bookID,null):null;var a=r[t.bookID];if(!a){e[t.bookID]={waitingForUpdate:false,prevStatus:t.status,ghStatus:n};return e}var l=r[t.bookID],i=l.prevStatus,u=l.waitingForUpdate,c=l.ghStatus;var s=u;"pending"===i&&"success"===t.status?s=true:!c&&n&&(s=false);e[t.bookID]={waitingForUpdate:s,prevStatus:t.status,ghStatus:n};return e},{})};t.prototype.componentDidMount=function e(){this.trackStartMigration()};t.prototype.componentDidUpdate=function e(t){if(!t.isLoading)return;this.trackStartMigration()};t.prototype.trackStartMigration=function e(){var t=this.props,r=t.dispatch,n=t.org,o=t.isLoading;if(o)return;r((0,v.startMigration)(n))};t.prototype.render=function e(){var r=this;var n=t.STYLES;var o=this.props,a=o.migrationStatus,l=o.org;var i=a.books.map(function(e){var t=r.state[e.bookID],n=t.waitingForUpdate,o=t.ghStatus;var a=n?"pending":e.status;n||!o||(a=o.hasError||o.hasTimeout?"error":"pending");return a});var u=i.some(function(e){return"error"===e});var c=i.reduce(function(e,t){return e+("success"===t?1:0)},0);var f=u||c<a.books.size;return s.createElement(b.default,{step:0,error:u&&new Error("Migration error"),org:l},s.createElement(h.Modal.Body,null,s.createElement(h.Form,{onSubmit:this.redirectToOrg},s.createElement(S.default,{title:"Your organization is being upgraded to the new GitBook",description:f?"Migration in progress, this may take a few minutes ("+c+"/"+a.books.size+" projects successfully migrated).":"Congratulations ! We have successfully imported all your projects",illustration:{alt:"Upgrade illustration",src:g.default}}),s.createElement(h.View,{styles:[h.View.MARGIN.S400Top,n.tilesScroll]},s.createElement(h.TilesGrid,null,a.books.map(function(e){return s.createElement(O.default,{key:e.bookID,book:e,org:l,migrationStatus:a,status:i.get(e.bookID),ghStatus:r.state[e.bookID].ghStatus})}).toArray())))),s.createElement(h.Modal.StepperFooter,{nextDisabled:f,onNext:this.redirectToOrg}))};return t}(s.Component),l.STYLES=p.StyleSheet.create({tilesScroll:{maxHeight:2*O.default.HEIGHT+h.spacing.S300+2*h.spacing.S200,overflow:"scroll",paddingBottom:h.spacing.S400,marginBottom:-h.spacing.S400}}),u=function e(){var t=this;this.redirectToOrg=function(){var e=t.props,r=e.history,n=e.migrationStatus;r.push(n.githubBooks.size>0?"./github":"./preview")}},i))||a)||a)||a);t.default=j},2645:function(e,t,r){e.exports=r.p+"images/c595b6499ca1b10873dd0cdeb54a85b5.svg"},2646:function(e,t,r){e.exports=r.p+"images/0406cad6bf397f10d8f04e2f2790d3d7.svg"},2647:function(e,t,r){e.exports=r.p+"images/cffe8a158aa1f368d5dfc5f37e0015a4.svg"},2648:function(e,t,r){e.exports=r.p+"images/eeb1e7bca7fffca665b8f00d70181157.svg"},2649:function(e,t,r){e.exports=r.p+"images/f02c98408b9d21023389989802b90e41.png"},2650:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,l,i;var u=r(0);var c=m(u);var s=r(5);var f=r(1);var p=r(3);var d=r(10);function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E="\n   mutation migrateOrganization($orgID: String!, $userID: String!, $secret: String!) {\n     migrateOrganization(orgID: $orgID, userID: $userID, secret: $secret) {\n       token,\n       orgID\n     }\n   }";var b=(o=(0,s.connect)(function(e){var t=e.config;return{config:t}}),a=d.Connectors.graphQL(function(e){var t=e.config,r=e.orgID,o=e.userID,a=e.secret;return{migrateOrganization:{url:t.urls.api,query:E,operationName:"migrateOrganization",variables:{orgID:r,userID:o,secret:a},mapState:function e(t){var r=t.data,o=t.errors;if(o&&o.length>0)return{status:"error",error:o[0]};return r&&r.migrateOrganization?n({},r.migrateOrganization,{status:"ok"}):null}}}}),l=d.Connectors.database(function(e){var t=e.migrateOrganization;return{org:t&&t.orgID&&p.Organization.queryByID(t.orgID).setOptions({waitFetched:false})}}),o(i=a(i=l(i=function(e){g(t,e);function t(){var r,n,o;v(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=y(this,e.call.apply(e,[this].concat(l))),n),n.state={login:false},r),y(n,o)}t.prototype.componentWillReceiveProps=function e(t){var r=this;var n=t.migrateOrganization,o=t.org,a=t.dispatch,l=t.onError;if(!n)return;"error"===n.status&&l(n.error);if(o&&"ok"===n.status){var i=this.state.login;i||this.setState({login:true},h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return a(d.Flux.user.signInWithAuthToken({token:n.token}));case 2:t.next=4;return a(d.Flux.auth.redirectToOrg({org:o,pathname:"migration/status"}));case 4:case"end":return t.stop()}},e,r)})))}};t.prototype.render=function e(){return c.createElement(f.Loading,null)};return t}(c.Component))||i)||i)||i);t.default=b},2651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=c(a);var i=r(2);var u=r(1);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=n=function(e){p(t,e);function t(){s(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.illustration,a=n.title,i=n.content;return l.createElement(u.View,{styles:[u.View.PADDING.S100Horizontal]},l.createElement(u.View,{styles:[r.featureHeading]},l.createElement(u.Illustration,{styles:r.illustration,alt:o.alt,src:o.src}),l.createElement(u.View,null,l.createElement(u.Text.HeadingH400,null,a))),l.createElement(u.View,null,l.createElement(u.Text.TextH300,{styles:r.light},i)))};return t}(l.PureComponent),n.STYLES=i.StyleSheet.create({illustration:{width:50,height:50,flexShrink:0,marginRight:u.spacing.S100},light:{color:u.colors.GREY_BASE},featureHeading:{display:"flex",alignItems:"center",marginBottom:u.spacing.S100}}),o);t.default=d},2652:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=m(a);var i=r(5);var u=r(10);var c=r(1);var s=r(101);var f=d(s);var p=r(115);function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(n=(0,i.connect)(),n(o=function(e){g(t,e);function t(){var r=this;var n,o,a;v(this,t);for(var l=arguments.length,i=Array(l),c=0;c<l;c++)i[c]=arguments[c];return a=(n=(o=y(this,e.call.apply(e,[this].concat(i))),o),o.state={loading:false,email:"",error:null,forgotPasswordSuccess:false},o.onSubmit=function(){var e=h(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.state.email;a=o.props.dispatch;o.setState({loading:true});r.prev=4;r.next=7;return a(u.Flux.user.resetPassword(n));case 7:o.setState({error:null,forgotPasswordSuccess:true});r.next=13;break;case 10:r.prev=10;r.t0=r["catch"](4);(0,p.handleException)(r.t0,function(){o.setState({error:r.t0})});case 13:r.prev=13;o.setState({loading:false});return r.finish(13);case 16:case"end":return r.stop()}},e,r,[[4,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),o.onEmailChange=function(e){o.setState({email:e.currentTarget.value})},n),y(o,a)}t.prototype.render=function e(){var t=this.state,r=t.loading,n=t.email,o=t.error,a=t.forgotPasswordSuccess;return l.createElement(f.default,{title:"Password Reset",error:o},l.createElement(c.Modal.Body,null,l.createElement(c.Form,{onSubmit:!a&&this.onSubmit},a&&l.createElement(c.Alert,{styles:[c.Alert.STYLES.success]},"An email has been sent."),l.createElement(c.Form.Group,{title:"Email address"},l.createElement(c.Form.Input,{type:"email",disabled:r,value:n,onChange:this.onEmailChange}),l.createElement(c.Form.Hint,null,"To reset your password, enter the email address you use to sign in to GitBook.")),l.createElement(c.Form.Actions,null,!a&&l.createElement(c.Form.Button,{styles:[c.Button.STYLES.block]},r?l.createElement(c.Loading,null):"Get Reset Link")))))};return t}(l.Component))||o);t.default=E},2653:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=f(a);var i=r(2);var u=r(3);var c=r(1);var s=r(14);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=40;var v=(o=n=function(e){m(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.org,a=n.styles;return l.createElement(c.View,{styles:[r.logo,a]},l.createElement(s.OrgAvatar,{org:o,styles:[s.OrgAvatar.STYLES.sizeMD,r.logoImg]}),l.createElement("h1",{className:(0,i.css)(r.logoName)},o.name))};return t}(l.Component),n.STYLES=i.StyleSheet.create({logo:{display:"flex",justifyContent:"center",alignItems:"center",flex:"auto",lineHeight:h+"px",margin:c.spacing.S300},logoImg:{display:"block"},logoName:{paddingLeft:10,margin:0,fontWeight:c.font.WEIGHT_BOLD,fontSize:.7*h+"px",lineHeight:1.2,display:"inline-block",verticalAlign:"bottom",color:c.colors.TEXT_COLOR}}),o);t.default=v},2654:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=S(a);var i=r(5);var u=r(12);var c=r(90);var s=w(c);var f=r(1);var p=r(14);var d=r(2655);var m=w(d);var h=r(2656);var v=w(h);var y=r(2657);var g=w(y);var E=r(101);var b=w(E);function w(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(n=(0,i.connect)(null,null,function(e,t,r){var n=t.dispatch;var o=r.location;var a=o.search&&s.default.parse(o.search.slice(1));return{dispatch:n,actionCode:a.oobCode,action:a.mode}}),(0,u.injectIntl)(o=n(o=function(e){_(t,e);function t(){P(this,t);return O(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.actionCode,n=t.action;if("resetPassword"===n&&r)return l.createElement(m.default,{actionCode:r});if("recoverEmail"===n&&r)return l.createElement(g.default,{actionCode:r});if("verifyEmail"===n&&r)return l.createElement(v.default,{actionCode:r});return l.createElement(p.StaticContext,{statusCode:500},l.createElement(b.default,{title:"Invalid Action"},l.createElement(f.Modal.Body,null,l.createElement(f.Alert,{styles:[f.Alert.STYLES.danger]},"The URL you are accesing is invalid."))))};return t}(l.Component))||o)||o);t.default=C},2655:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=h(a);var i=r(5);var u=r(13);var c=r(10);var s=r(1);var f=r(101);var p=m(f);var d=r(115);function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b="Sorry, your passwords do not match. Please check and try again.";var w=(n=(0,i.connect)(),(0,u.withRouter)(o=n(o=function(e){E(t,e);function t(){var r=this;var n,o,a;y(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=g(this,e.call.apply(e,[this].concat(i))),o),o.state={actionCodeVerified:false,newPassword:"",confirmNewPassword:"",error:null,success:false},o.onError=function(e){(0,d.handleException)(e,function(){o.setState({error:e})})},o.onConfirmationBlur=function(){var e=o.state,t=e.newPassword,r=e.confirmNewPassword;t!==r?o.setState({error:new Error(b)}):o.setState({error:null})},o.onSubmit=function(){var e=v(regeneratorRuntime.mark(function e(t){var n,a,l,i,u,s,f;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.state,a=n.newPassword,l=n.confirmNewPassword;i=o.props,u=i.dispatch,s=i.actionCode,f=i.history;if(!(a!==l)){r.next=6;break}o.setState({error:new Error(b)});return r.abrupt("return");case 6:r.prev=6;r.next=9;return u(c.Flux.user.confirmPasswordReset(s,a));case 9:o.setState({success:true});setTimeout(function(){f.push("/login")},5e3);r.next=16;break;case 13:r.prev=13;r.t0=r["catch"](6);o.onError(r.t0);case 16:case"end":return r.stop()}},e,r,[[6,13]])}));return function(t){return e.apply(this,arguments)}}(),o.onPasswordChange=function(e){o.setState({newPassword:e.currentTarget.value})},o.onConfirmPasswordChange=function(e){o.setState({confirmNewPassword:e.currentTarget.value})},n),g(o,a)}t.prototype.componentDidMount=function e(){var t=this;var r=this.props,n=r.dispatch,o=r.actionCode;n(c.Flux.user.verifyPasswordResetCode(o)).then(function(){t.setState({actionCodeVerified:true})}).catch(this.onError)};t.prototype.render=function e(){var t=this.state.success;var r=this.state,n=r.newPassword,o=r.confirmNewPassword,a=r.error,i=r.actionCodeVerified;if(!i&&!a)return null;return l.createElement(p.default,{error:a,title:"Reset Password"},l.createElement(s.Modal.Body,null,l.createElement(s.Form,{onSubmit:this.onSubmit},t?l.createElement("span",null,"Your password has been successfully updated. You will now be asked to"," ",l.createElement(u.Link,{to:"/login"},"log-in")," with your new password."):l.createElement("div",null,l.createElement(s.Form.Group,{title:"New Password"},l.createElement(s.Form.Input,{value:n,type:"password",onChange:this.onPasswordChange})),l.createElement(s.Form.Group,{title:"Confirm New Password"},l.createElement(s.Form.Input,{value:o,type:"password",onBlur:this.onConfirmationBlur,onChange:this.onConfirmPasswordChange}),l.createElement(s.Form.Hint,null,l.createElement("span",null,"Your new password must be at least 6 characters long."))),l.createElement(s.Form.Actions,null,l.createElement(s.Form.Button,{styles:[s.Button.STYLES.block]},l.createElement("span",null,"Change my password")))))))};return t}(l.Component))||o)||o);t.default=w},2656:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=h(a);var i=r(5);var u=r(13);var c=r(10);var s=r(1);var f=r(101);var p=m(f);var d=r(115);function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(n=(0,i.connect)(),(0,u.withRouter)(o=n(o=function(e){g(t,e);function t(){var r,n,o;v(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=y(this,e.call.apply(e,[this].concat(l))),n),n.state={actionCodeVerified:false,error:null},n.onError=function(e){(0,d.handleException)(e,function(){n.setState({error:e})})},r),y(n,o)}t.prototype.componentDidMount=function e(){var t=this;var r=this.props,n=r.dispatch,o=r.actionCode,a=r.history;o&&n(c.Flux.user.applyActionCode(o)).then(function(){t.setState({actionCodeVerified:true})},this.onError).then(function(){setTimeout(function(){return a.push("/account")},5e3)})};t.prototype.render=function e(){var t=this.state,r=t.actionCodeVerified,n=t.error;if(!r&&!n)return null;return l.createElement(p.default,{title:"Email Verification"},n?l.createElement(s.Alert,{styles:[s.Alert.STYLES.danger]},n.message):l.createElement("span",null,"Your email has been verified. You are about to be redirected to your ",l.createElement(u.Link,{to:"/account"},"dashboard.")))};return t}(l.Component))||o)||o);t.default=E},2657:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=h(a);var i=r(5);var u=r(13);var c=r(1);var s=r(10);var f=r(101);var p=m(f);var d=r(115);function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(n=(0,i.connect)(),(0,u.withRouter)(o=n(o=function(e){E(t,e);function t(){var r=this;var n,o,a;y(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=g(this,e.call.apply(e,[this].concat(i))),o),o.state={actionCodeVerified:false,emailRecovered:false,error:null},o.checkActionCode=v(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.dispatch,a=t.actionCode;r.prev=1;r.next=4;return n(s.Flux.user.checkActionCode(a));case 4:o.setState({actionCodeVerified:true});r.next=10;break;case 7:r.prev=7;r.t0=r["catch"](1);o.onError(r.t0);case 10:case"end":return r.stop()}},e,r,[[1,7]])})),o.onError=function(e){(0,d.handleException)(e,function(){o.setState({error:e})})},o.onSubmit=v(regeneratorRuntime.mark(function e(){var t,n,a,l;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.dispatch,a=t.actionCode,l=t.history;r.prev=1;r.next=4;return n(s.Flux.user.applyActionCode(a));case 4:o.setState({emailRecovered:true});setTimeout(function(){return l.push("/account")},5e3);r.next=11;break;case 8:r.prev=8;r.t0=r["catch"](1);o.onError(r.t0);case 11:case"end":return r.stop()}},e,r,[[1,8]])})),n),g(o,a)}t.prototype.componentDidMount=function e(){this.checkActionCode()};t.prototype.render=function e(){var t=this.state,r=t.actionCodeVerified,n=t.emailRecovered,o=t.error;if(!r&&!o)return null;return l.createElement(p.default,{title:"Recover Email"},l.createElement(c.Modal.Body,null,o?l.createElement(c.Alert,{styles:[c.Alert.STYLES.danger]},o.message):l.createElement("div",null,n?l.createElement(c.Alert,{styles:[c.Alert.STYLES.success]},"Your email has been recovered. You are about to be redirected to your"," ",l.createElement(u.Link,{to:"/account"},"dashboard.")):l.createElement(c.Form,{onSubmit:this.onSubmit},l.createElement("span",null,"Are you sure to recover your previous email ?"),l.createElement(c.Form.Actions,null,l.createElement(c.Form.Button,{styles:[c.Button.STYLES.block]},l.createElement("span",null,"Recover my previous email")))))))};return t}(l.Component))||o)||o);t.default=b},2658:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l;var i=r(0);var u=T(i);var c=r(90);var s=C(c);var f=r(5);var p=r(112);var d=r(3);var m=r(10);var h=r(931);var v=C(h);var y=r(2659);var g=C(y);var E=r(2660);var b=C(E);var w=r(2661);var S=C(w);var P=r(2662);var O=C(P);var _=r(241);function C(e){return e&&e.__esModule?e:{default:e}}function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var L=(n=(0,f.connect)(function(e,t){var r=e.user;var n=t.location,o=t.match.params,a=o.mode,l=o.space,i=o.org;var u=s.default.parse(n.search.slice(1));var c=(0,_.createAuthContext)({mode:a,noSSO:u.no_sso,invite:u.invite,location:u.location,space:l,org:i,email:u.email});return{user:r,context:c}}),o=m.Connectors.database(function(e){var t=e.context;return{orgDomain:t.org?d.OrgBaseDomain.queryByDomain(t.org):null}}),a=m.Connectors.database(function(e){var t=e.orgDomain,r=e.context;return{org:t?d.Organization.queryByID(t.orgID):null,orgSpace:t&&r.space?d.OrgSpace.queryByName({orgID:t.orgID,baseName:r.space}):null,invite:t&&r.invite?d.Invite.queryByID({orgID:t.orgID,inviteID:r.invite}):null}}),n(l=o(l=a(l=function(e){j(t,e);function t(){x(this,t);return k(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.context,n=t.user,o=t.org,a=t.orgSpace,l=t.invite;var i={context:r,user:n,org:o,orgSpace:a,invite:l};if("invite"==r.mode){if(!n.isLoggedIn)return u.createElement(p.Redirect,{to:(0,_.getAuthRoute)(r,{toMode:"join"})});return u.createElement(O.default,i)}if(n.isLoggedIn){if(r.invite)return u.createElement(p.Redirect,{to:(0,_.getAuthRoute)(r,{toMode:"invite",withInvite:r.invite})});return u.createElement(v.default,{org:o,spaceID:a?a.spaceID:null,pathname:r.location})}if(o&&o.ssoSignInLabel&&!r.noSSO)return u.createElement(S.default,i);if("login"==r.mode)return u.createElement(b.default,i);if("join"==r.mode)return u.createElement(g.default,i);return null};return t}(u.Component))||l)||l)||l);t.default=L},2659:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=g(a);var i=r(5);var u=r(13);var c=r(1);var s=r(10);var f=r(101);var p=y(f);var d=r(241);var m=r(115);var h=r(932);var v=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=(n=(0,i.connect)(),n(o=function(e){S(t,e);function t(r){var n=this;b(this,t);var o=w(this,e.call(this,r));o.onError=function(e){(0,m.handleException)(e,function(){o.setState({loading:false,error:e})})};o.onLoading=function(e){o.setState({loading:e})};o.onSubmit=function(){var e=E(regeneratorRuntime.mark(function e(t){var r,a,l,i,u;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t.preventDefault();r=o.props.dispatch;a=o.state,l=a.name,i=a.email,u=a.password;o.onLoading(true);n.prev=4;n.next=7;return r(s.Flux.user.signUp(l,i,u));case 7:n.next=12;break;case 9:n.prev=9;n.t0=n["catch"](4);o.onError(n.t0);case 12:case"end":return n.stop()}},e,n,[[4,9]])}));return function(t){return e.apply(this,arguments)}}();o.onNameChange=function(e){o.setState({name:e.target.value})};o.onEmailChange=function(e){o.setState({email:e.target.value})};o.onPasswordChange=function(e){o.setState({password:e.target.value})};o.state={loading:false,error:null,name:"",email:r.context.email||"",password:""};return o}t.prototype.render=function e(){var t=this.props,r=t.context,n=t.org;var o=this.state,a=o.loading,i=o.error,s=o.name,f=o.email,m=o.password;return l.createElement(p.default,{org:n,title:"Create an account",error:i,status:(0,d.getStatus)(r),footer:l.createElement("div",null,"Already have an account?"," ",l.createElement(c.Link,{component:u.Link,to:(0,d.getAuthRoute)(r,{toMode:"login"})},"Sign In"))},l.createElement(c.Modal.Body,null,l.createElement(c.Form,{onSubmit:this.onSubmit},l.createElement(c.Form.Group,{title:"Name"},l.createElement(c.Form.Input,{"data-test":"name",value:s,disabled:a,placeholder:"Your full name",onChange:this.onNameChange})),l.createElement(c.Form.Group,{title:"Email address"},l.createElement(c.Form.Input,{"data-test":"email",value:f,disabled:a,type:"email",placeholder:"you@yourcompany.com",onChange:this.onEmailChange})),l.createElement(c.Form.Group,{title:"Password"},l.createElement(c.Form.Input,{"data-test":"password",type:"password",value:m,disabled:a,placeholder:"Password (at least 6 characters)",onChange:this.onPasswordChange})),l.createElement(c.Form.Hint,null,"By clicking “Create your account” below, you agree to our"," ",l.createElement(c.Link,{href:"https://policies.gitbook.com/terms",target:"_blank"},"terms of service")," ","and"," ",l.createElement(c.Link,{href:"https://policies.gitbook.com/privacy",target:"_blank"},"privacy statement"),". We’ll occasionally send you account related emails."),l.createElement(c.Form.Actions,null,l.createElement(c.Form.Button,{"data-test":"signup",kind:"primary",styles:[c.Button.STYLES.block]},a?l.createElement(c.Loading,null):"Create your account")))),l.createElement(v.default,{disabled:a,onLoading:this.onLoading,onError:this.onError}))};return t}(l.Component))||o);t.default=P},2660:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=g(a);var i=r(5);var u=r(13);var c=r(1);var s=r(10);var f=r(101);var p=y(f);var d=r(241);var m=r(115);var h=r(932);var v=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=(n=(0,i.connect)(),n(o=function(e){S(t,e);function t(r){var n=this;b(this,t);var o=w(this,e.call(this,r));o.onError=function(e){(0,m.handleException)(e,function(){o.setState({loading:false,error:e})})};o.onLoading=function(e){o.setState({loading:e})};o.onSubmit=function(){var e=E(regeneratorRuntime.mark(function e(t){var r,a,l,i;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t.preventDefault();r=o.props.dispatch;a=o.state,l=a.email,i=a.password;o.onLoading(true);n.prev=4;n.next=7;return r(s.Flux.user.signIn(l,i));case 7:n.next=12;break;case 9:n.prev=9;n.t0=n["catch"](4);o.onError(n.t0);case 12:case"end":return n.stop()}},e,n,[[4,9]])}));return function(t){return e.apply(this,arguments)}}();o.onEmailChange=function(e){o.setState({email:e.target.value})};o.onPasswordChange=function(e){o.setState({password:e.target.value})};o.state={loading:false,error:null,email:r.context.email||"",password:""};return o}t.prototype.render=function e(){var t=this.props,r=t.context,n=t.org;var o=this.state,a=o.loading,i=o.error,s=o.email,f=o.password;return l.createElement(p.default,{org:n,title:"Sign in to GitBook",error:i,status:(0,d.getStatus)(r),footer:l.createElement("div",null,"New to GitBook?"," ",l.createElement(c.Link,{component:u.Link,to:(0,d.getAuthRoute)(r,{toMode:"join"})},"Create an account"))},l.createElement(c.Modal.Body,null,l.createElement(c.Form,{onSubmit:this.onSubmit},l.createElement(c.Form.Group,{title:"Email address"},l.createElement(c.Form.Input,{"data-test":"email",type:"email",placeholder:"name@company.com",value:s,disabled:a,onChange:this.onEmailChange})),l.createElement(c.Form.Group,{title:"Password",hint:l.createElement(c.Link,{to:"/forgot",component:u.Link,tabIndex:-1},"Forgot Password ?")},l.createElement(c.Form.Input,{"data-test":"password",type:"password",placeholder:"password",value:f,disabled:a,onChange:this.onPasswordChange})),l.createElement(c.Form.Actions,null,l.createElement(c.Form.Button,{"data-test":"login",kind:"primary",styles:[c.Button.STYLES.block]},a?l.createElement(c.Loading,null):"Sign in")))),l.createElement(v.default,{disabled:a,onLoading:this.onLoading,onError:this.onError}))};return t}(l.Component))||o);t.default=P},2661:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=f(n);var a=r(13);var l=r(1);var i=r(101);var u=s(i);var c=r(241);function s(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){m(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.context,n=t.org;return o.createElement(u.default,{org:n,title:"Sign in to GitBook"},o.createElement(l.Modal.Body,null,o.createElement(l.Form,null,o.createElement(l.Button,{component:"a",href:"/saml/"+n.uid+"/login",styles:[l.Button.STYLES.block]},"Sign in with ",n.ssoSignInLabel),o.createElement(l.Form.Hint,null,"This organization allows you to sign in with your"," ",n.ssoSignInLabel," account."))),o.createElement(l.Modal.Footer,{label:"Or"},o.createElement(l.Button,{kind:"secondary",styles:[l.Button.STYLES.block],component:a.Link,to:(0,c.getAuthRoute)(r,{toMode:"login",withoutSSO:true})},"I have a guest account")))};return t}(o.Component);t.default=h},2662:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l,i,u,c;var s=r(0);var f=O(s);var p=r(5);var d=r(2);var m=r(14);var h=r(3);var v=r(1);var y=r(7);var g=r(10);var E=r(931);var b=P(E);var w=r(101);var S=P(w);function P(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function _(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=(o=n=function(e){x(t,e);function t(){C(this,t);return T(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.children;return f.createElement("li",null,f.createElement("span",{className:(0,d.css)(r.iconCheck)},f.createElement(y.IconCheck,null)," "),n)};return t}(f.Component),n.STYLES=d.StyleSheet.create({iconCheck:{color:v.colors.SUCCESS,fontSize:v.font.SIZE_LARGE}}),o);var j=(a=(0,p.connect)(),l=g.Connectors.database(function(e){var t=e.org,r=e.user,n=e.invite;return{membership:h.Membership.queryByID({orgID:t.uid,userID:r.uid}),team:n&&n.teamID?h.Team.queryByID({teamID:n.teamID,orgID:t.uid}):null}}),a(i=l(i=(c=u=function(e){x(t,e);function t(){var r=this;var n,o,a;C(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=T(this,e.call.apply(e,[this].concat(i))),o),o.state={loading:false,error:null},o.onSubmit=function(){var e=_(regeneratorRuntime.mark(function e(t){var n,a,l,i,u;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.props,a=n.dispatch,l=n.invite,i=n.org,u=n.membership;if(l){r.next=4;break}return r.abrupt("return");case 4:o.setState({loading:true});r.prev=5;r.next=8;return a(g.Flux.invites.useInvite(i,l,u));case 8:r.next=13;break;case 10:r.prev=10;r.t0=r["catch"](5);o.setState({error:r.t0});case 13:r.prev=13;o.setState({loading:false});return r.finish(13);case 16:case"end":return r.stop()}},e,r,[[5,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),n),T(o,a)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.org,a=n.membership,l=n.invite,i=n.team;var u=this.state,c=u.loading,s=u.error;if(!l)return f.createElement(m.Static404,null,f.createElement(S.default,{title:"Invite Not Found"},f.createElement(v.Alert,{styles:[v.Alert.STYLES.danger]},"This invite doesn't exist or is expired.")));var p=a&&l.teamID&&a.teams.get(l.teamID);var y=a&&!l.teamID?h.Membership.isRoleUpgrade(a.role,l.role):!p||h.Membership.isRoleUpgrade(p.role,l.role);if(a&&l&&!y)return f.createElement(b.default,{org:o});return f.createElement(S.default,{title:"Join "+o.name,org:o},f.createElement(v.Modal.Body,null,f.createElement(v.Form,{onSubmit:this.onSubmit},s&&f.createElement(v.Alert,{styles:[v.Alert.STYLES.danger]},s.message),f.createElement(v.Form.Group,null,"You have been invited to join ",f.createElement("b",null,o.name)," as"," ",l.teamID?"reader":l.role,", giving you the following permissions:",f.createElement("ul",{className:(0,d.css)(r.permissionsList)},f.createElement(k,null,"Read and comment"),i&&f.createElement(k,null,"Member in team ",i.name),!l.teamID&&l.canEdit&&f.createElement(k,null,"Write new content"),!l.teamID&&l.canReview&&f.createElement(k,null,"Approve writers submissions"),!l.teamID&&l.canAdmin&&f.createElement(k,null,"Manage team settings"))),f.createElement(v.Form.Actions,null,f.createElement(v.Form.Button,{styles:[v.Button.STYLES.block],disabled:Boolean(s||c)},"Join")))))};return t}(f.Component),u.STYLES=d.StyleSheet.create({permissionsList:{listStyleType:"none",paddingLeft:20}}),c))||i)||i);t.default=j},2671:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l,i,u,c;var s=r(0);var f=y(s);var p=r(5);var d=r(2);var m=r(1);var h=r(10);var v=r(14);function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function g(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(n=(0,p.connect)(),n(o=(l=a=function(e){w(t,e);function t(){var r=this;var n,o,a;E(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=b(this,e.call.apply(e,[this].concat(i))),o),o.state={loading:false,error:null},o.onSelectFile=function(){o.uploader&&v.FileUploader.promptFile(o.uploader)},o.onFiles=function(){var e=g(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:n=o.props.dispatch;o.setState({loading:true,error:null});r.prev=2;r.next=5;return n(h.Flux.user.uploadPhoto(t[0]));case 5:r.next=10;break;case 7:r.prev=7;r.t0=r["catch"](2);o.setState({error:r.t0});case 10:r.prev=10;o.setState({loading:false});return r.finish(10);case 13:case"end":return r.stop()}},e,r,[[2,7,10,13]])}));return function(t){return e.apply(this,arguments)}}(),n),b(o,a)}t.prototype.componentWillReceiveProps=function e(t){if(t.user.photoURL==this.props.user.photoURL)return;this.setState({loading:false})};t.prototype.render=function e(){var r=this;var n=t.STYLES;var o=this.props.user;var a=this.state,l=a.loading,i=a.error;return f.createElement(m.Panel,null,f.createElement(m.Panel.Header,null,f.createElement(m.Panel.Header.Title,null,"Profile Photo")),f.createElement(m.Panel.Body,null,i&&f.createElement(m.Alert,{styles:[m.Alert.STYLES.danger]},"Please upload an image that is less than 5MB."),f.createElement(v.FileUploader,{ref:function e(t){r.uploader=t},onFiles:this.onFiles,accept:"image/*"}),f.createElement(m.View,{styles:[n.container]},l?f.createElement(m.View,{styles:[n.photoLoading]},f.createElement(m.Loading,null)):f.createElement(m.View,{styles:[n.photoWrapper]},f.createElement(v.UserAvatar,{user:o,styles:[v.UserAvatar.STYLES.sizeXL,n.photo],withTooltip:false,onClick:this.onSelectFile})),f.createElement(m.View,{styles:[n.contentWrapper]},f.createElement(m.Button,{kind:"secondary",onClick:this.onSelectFile,disabled:l},"Upload Photo"),f.createElement(m.Form.Hint,null,"This photo will be used to identify you in GitBook. It will be visible to anyone.",f.createElement("br",null),f.createElement("b",null,"Some tips:")," Use a photo or image rather than text and upload an image that is 132px square or larger.")))))};return t}(f.Component),a.STYLES=d.StyleSheet.create({container:(i={display:"flex",flexDirection:"column"},i["@media "+m.MEDIA.TABLET]={flexDirection:"row"},i),photoWrapper:{},photoLoading:{width:94,height:94,fontSize:32,display:"flex",alignItems:"center",justifyContent:"center",color:m.colors.BLUE_BASE},photo:(u={cursor:"pointer",marginBottom:m.boxes.PADDING_SMALL},u["@media "+m.MEDIA.TABLET]={marginBottom:0},u),contentWrapper:(c={},c["@media "+m.MEDIA.TABLET]={flex:1,padding:"0px "+m.spacing.S400+"px"},c)}),l))||o);t.default=S},2672:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l,i;var u=r(0);var c=g(u);var s=r(5);var f=r(1);var p=r(3);var d=r(10);var m=r(2673);var h=g(m);var v=r(934);var y=g(v);function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(n=(0,s.connect)(),o=f.Form.withContext({getValueFromProps:function e(t){var r=t.user;return r.email}}),n(a=o(a=function(e){w(t,e);function t(){var r,n,o;E(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=b(this,e.call.apply(e,[this].concat(l))),n),n.state={isCollapsed:true,reauthenticatePopupOpened:false,success:false,error:null},n.error=function(e){n.setState({error:e})},n.updateEmail=function(){var e=n.props,t=e.value,r=e.dispatch;r(d.Flux.user.updateEmail(t)).then(function(){n.setState({success:true,error:null});n.timeoutSuccess=setTimeout(function(){n.setState({success:false})},5e3)}).catch(function(e){"auth/requires-recent-login"===e.code?n.setState({reauthenticatePopupOpened:true}):n.error(e)})},n.onSubmit=function(){var e=n.props.value;(0,h.default)(e)||n.setState({error:new Error("Please enter a valid email address.")});n.updateEmail()},n.onEmailChange=function(e){var t=n.props.onChange;t(e.currentTarget.value);n.setState({success:false})},n.onReauthenticateSuccess=function(){n.setState({reauthenticatePopupOpened:false});n.updateEmail()},n.onClosePopup=function(){n.setState({reauthenticatePopupOpened:false})},n.onToggle=function(e){n.setState(function(e){var t=e.isCollapsed;return{isCollapsed:!t}})},r),b(n,o)}t.prototype.componentWillUnmount=function e(){clearTimeout(this.timeoutSuccess)};t.prototype.render=function e(){var t=this.props,r=t.user,n=t.value,o=t.hasChanged;var a=this.state,l=a.isCollapsed,i=a.error,u=a.reauthenticatePopupOpened,s=a.success;if(l)return c.default.createElement(f.Panel,null,c.default.createElement(f.Panel.Header,{onClick:this.onToggle},c.default.createElement(f.Panel.Header.Left,null,c.default.createElement(f.Panel.Header.Title,null,"Email Address")),c.default.createElement(f.Panel.Header.Right,null,c.default.createElement(f.Panel.Toggle,{isCollapsed:l}))));return c.default.createElement(f.Panel,null,c.default.createElement(f.Panel.Header,null,c.default.createElement(f.Panel.Header.Left,null,c.default.createElement(f.Panel.Header.Title,null,"Email Address")),c.default.createElement(f.Panel.Header.Right,null,c.default.createElement(f.Panel.Toggle,{onClick:this.onToggle,isCollapsed:l}))),c.default.createElement(f.Form,{onSubmit:this.onSubmit},c.default.createElement(f.Panel.Body,null,s&&c.default.createElement(f.Alert,{styles:f.Alert.STYLES.success},"Your email has been updated."),i&&c.default.createElement(f.Alert,{styles:f.Alert.STYLES.danger},i.message),u&&c.default.createElement(y.default,{isOpened:true,user:r,onSuccess:this.onReauthenticateSuccess,onClose:this.onClosePopup}),c.default.createElement(f.Form.Input,{type:"text",value:n,onChange:this.onEmailChange}),r.email===n&&c.default.createElement(P,{verified:r.emailVerified}),c.default.createElement(f.Form.Hint,null,"This email will be used for account-related notifications and sign-in.")),o&&c.default.createElement(f.Panel.Footer,null,c.default.createElement(f.Panel.Footer.Controls,null,c.default.createElement(f.Form.Button,{type:"submit"},"Save Changes")))))};return t}(c.default.Component))||a)||a);var P=(l=(0,s.connect)(),l(i=function(e){w(t,e);function t(r){E(this,t);var n=b(this,e.call(this,r));n.verifyEmail=function(){var e=n.props,t=e.dispatch,r=e.onError;return t(d.Flux.user.verifyEmail()).then(function(){return n.setState({sent:true})}).catch(r)};n.state={sent:false};return n}t.prototype.render=function e(){var t=this.props.verified;var r=this.state.sent;if(t)return null;if(r)return c.default.createElement(f.Form.Hint,null,"Verification email sent! Check your inbox.");return c.default.createElement(f.Form.Hint,null,"This email has not been verified.",c.default.createElement(f.Link,{kind:"primary",onClick:this.verifyEmail},"Verify now"))};return t}(c.default.Component))||i);t.default=S},2674:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,l;var i=r(0);var u=p(i);var c=r(5);var s=r(1);var f=r(10);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}var y=(o=(0,c.connect)(),a=s.Form.withContext({getValueFromProps:function e(t){var r=t.user;return r},getPropsFromValue:function e(t){var r=t.value,o=v(t,["value"]);return n({user:r},o)}}),o(l=a(l=function(e){h(t,e);function t(){var r,n,o;d(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=m(this,e.call.apply(e,[this].concat(l))),n),n.onSubmit=function(e){var t=n.props,r=t.user,o=t.dispatch;e.preventDefault();o(f.Flux.user.updateProfile(r))},n.onNameChange=function(e){var t=n.props.onChange;var r=e.currentTarget.value;t(function(e){return e.merge({displayName:r})})},n.onBioChange=function(e){var t=n.props.onChange;var r=e.currentTarget.value;t(function(e){return e.merge({bio:r})})},r),m(n,o)}t.prototype.render=function e(){var t=this.props,r=t.user,n=t.hasChanged;return u.default.createElement(s.Panel,null,u.default.createElement(s.Panel.Header,null,u.default.createElement(s.Panel.Header.Title,null,"Your Profile")),u.default.createElement("form",{onSubmit:this.onSubmit},u.default.createElement(s.Panel.Body,null,u.default.createElement(s.Form.Group,{title:"Your Name"},u.default.createElement(s.Form.Input,{type:"text",value:r.displayName,onChange:this.onNameChange}),u.default.createElement(s.Form.Hint,null,"Your name is displayed to publicly identify you.")),u.default.createElement(s.Form.Group,{title:"What You do"},u.default.createElement(s.Form.Input,{type:"text",value:r.bio,onChange:this.onBioChange}),u.default.createElement(s.Form.Hint,null,"Let people know what you do at GitBook."))),n&&u.default.createElement(s.Panel.Footer,null,u.default.createElement(s.Panel.Footer.Controls,null,u.default.createElement(s.Form.Button,{type:"submit"},"Save Changes")))))};return t}(u.default.Component))||l)||l);t.default=y},2675:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=m(a);var i=r(5);var u=r(1);var c=r(10);var s=r(3);var f=r(934);var p=d(f);function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(n=(0,i.connect)(),n(o=function(e){y(t,e);function t(){var r,n,o;h(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=v(this,e.call.apply(e,[this].concat(l))),n),n.state={isCollapsed:true,error:null,newPassword:"",confirmNewPassword:"",success:false,reauthenticatePopupOpened:false},n.updatePassword=function(){var e=n.props.dispatch;var t=n.state.newPassword;e(c.Flux.user.updatePassword(t)).then(function(){n.setState({success:true,error:null,newPassword:"",confirmNewPassword:""});n.timeoutSuccess=setTimeout(function(){n.setState({success:false})},5e3)}).catch(function(e){"auth/requires-recent-login"===e.code?n.setState({reauthenticatePopupOpened:true}):n.onError(e)})},n.onReauthenticateSuccess=function(){n.setState({reauthenticatePopupOpened:false});n.updatePassword()},n.onClosePopup=function(){n.setState({reauthenticatePopupOpened:false})},n.onError=function(e){n.setState({error:e})},n.onSubmit=function(){var e=n.state,t=e.newPassword,r=e.confirmNewPassword;if(t!==r){n.onError(new Error("Password doesn't match the confirmation"));return}if(t.length<6){n.onError(new Error("Password need to be 6 characters long at least."));return}n.updatePassword()},n.onPasswordChange=function(e){n.setState({success:false,newPassword:e.currentTarget.value})},n.onConfirmPasswordChange=function(e){n.setState({success:false,confirmNewPassword:e.currentTarget.value})},n.onToggle=function(e){n.setState(function(e){var t=e.isCollapsed;return{isCollapsed:!t}})},r),v(n,o)}t.prototype.componentWillUnmount=function e(){clearTimeout(this.timeoutSuccess)};t.prototype.render=function e(){var t=this.state,r=t.isCollapsed,n=t.error,o=t.newPassword,a=t.confirmNewPassword,i=t.success,c=t.reauthenticatePopupOpened;var s=this.props.user;if(r)return l.createElement(u.Panel,null,l.createElement(u.Panel.Header,{onClick:this.onToggle},l.createElement(u.Panel.Header.Left,null,l.createElement(u.Panel.Header.Title,null,"Password")),l.createElement(u.Panel.Header.Right,null,l.createElement(u.Panel.Toggle,{isCollapsed:r}))));return l.createElement(u.Panel,null,l.createElement(u.Panel.Header,null,l.createElement(u.Panel.Header.Left,null,l.createElement(u.Panel.Header.Title,null,"Password")),l.createElement(u.Panel.Header.Right,null,l.createElement(u.Panel.Toggle,{isCollapsed:r,onClick:this.onToggle}))),l.createElement(u.Form,{onSubmit:this.onSubmit},l.createElement(u.Panel.Body,null,c&&l.createElement(p.default,{isOpened:true,user:s,onSuccess:this.onReauthenticateSuccess,onClose:this.onClosePopup}),i&&l.createElement(u.Alert,{styles:u.Alert.STYLES.success},"Your password has been updated."),l.createElement(u.Form.Group,{title:"New Password",error:n},l.createElement(u.Form.Input,{type:"password",value:o,onChange:this.onPasswordChange})),l.createElement(u.Form.Group,{title:"Confirm New Password"},l.createElement(u.Form.Input,{type:"password",value:a,onChange:this.onConfirmPasswordChange}))),o&&!i&&l.createElement(u.Panel.Footer,null,l.createElement(u.Panel.Footer.Controls,null,l.createElement(u.Form.Button,null,"Update password")))))};return t}(l.Component))||o);t.default=g},2676:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=p(a);var i=r(5);var u=r(3);var c=r(1);var s=r(7);var f=r(10);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(n=(0,i.connect)(),n(o=function(e){h(t,e);function t(){var r,n,o;d(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=m(this,e.call.apply(e,[this].concat(l))),n),n.state={error:null},n.onGoogleLink=function(){var e=n.props.dispatch;return e(f.Flux.user.linkWithGoogle()).catch(function(e){n.setState({error:e})})},n.onGoogleUnlink=function(){var e=n.props.dispatch;return e(f.Flux.user.unlinkGoogle()).catch(function(e){n.setState({error:e})})},r),m(n,o)}t.prototype.render=function e(){var t=this.props.user;var r=this.state.error;return l.default.createElement(c.Panel,null,l.default.createElement(c.Panel.Header,null,l.default.createElement(c.Panel.Header.Title,null,"Google")),l.default.createElement(c.Panel.Body,null,r&&l.default.createElement(c.Alert,{styles:[c.Alert.STYLES.danger]},r.message),t.hasGoogleProvider?l.default.createElement(g,{onClick:this.onGoogleUnlink}):l.default.createElement(y,{text:"Link your account",onClick:this.onGoogleLink}),l.default.createElement(c.Form.Hint,null,"Set up a single sign-on with Google and login with one click.")))};return t}(l.default.Component))||o);var y=function(e){h(t,e);function t(){d(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.onClick;return l.default.createElement(c.Button,{kind:"secondary",styles:[c.Button.STYLES.medium],onClick:t},l.default.createElement(s.IconGoogleLogo,{color:"svg"})," Link your account")};return t}(l.default.Component);var g=function(e){h(t,e);function t(){d(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.onClick;return l.default.createElement(c.Button,{kind:"danger",styles:[c.Button.STYLES.medium],onClick:t},"Unlink account")};return t}(l.default.Component);t.default=v},2677:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=d(a);var i=r(5);var u=r(7);var c=r(1);var s=r(2);var f=r(3);var p=r(10);function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=s.StyleSheet.create({githubLogo:{color:"#24292e",fontSize:18}});var g=(n=(0,i.connect)(),n(o=function(e){v(t,e);function t(){var r,n,o;m(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=h(this,e.call.apply(e,[this].concat(l))),n),n.state={error:null},n.onGithubLink=function(){var e=n.props.dispatch;return e(p.Flux.user.linkWithGithub()).catch(function(e){n.setState({error:e})})},n.onGithubUnlink=function(){var e=n.props.dispatch;return e(p.Flux.user.unlinkGithub()).catch(function(e){n.setState({error:e})})},r),h(n,o)}t.prototype.render=function e(){var t=this.props.user;var r=this.state.error;return l.default.createElement(c.Panel,null,l.default.createElement(c.Panel.Header,null,l.default.createElement(c.Panel.Header.Title,null,"Github")),l.default.createElement(c.Panel.Body,null,r&&l.default.createElement(c.Alert,{styles:[c.Alert.STYLES.danger]},r.message),t.hasGithubProvider?l.default.createElement(b,{onClick:this.onGithubUnlink}):l.default.createElement(E,{onClick:this.onGithubLink,text:"Link your account"}),l.default.createElement(c.Form.Hint,null,"Set up a single sign-on with GitHub and login with one click. Integrations can be configured on each project.")))};return t}(l.default.Component))||o);var E=function(e){v(t,e);function t(){m(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.onClick;return l.default.createElement(c.Button,{kind:"secondary",styles:[c.Button.STYLES.medium],onClick:t},l.default.createElement(u.IconGitHubLogo,{styles:[y.githubLogo]})," Link your account")};return t}(l.default.Component);var b=function(e){v(t,e);function t(){m(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.onClick;return l.default.createElement(c.Button,{kind:"danger",styles:[c.Button.STYLES.medium],onClick:t},"Unlink account")};return t}(l.default.Component);t.default=g},2678:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=p(a);var i=r(13);var u=r(5);var c=r(1);var s=r(3);var f=r(935);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=(n=(0,u.connect)(),n(o=(0,i.withRouter)(o=function(e){v(t,e);function t(){var r=this;var n,o,a;m(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=h(this,e.call.apply(e,[this].concat(i))),o),o.state={isCollapsed:true,error:null},o.onClick=d(regeneratorRuntime.mark(function e(){var t,n,a,l;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.history,a=t.user,l=t.dispatch;if(!a.hasPhoneVerified){r.next=11;break}r.prev=2;r.next=5;return l((0,f.unlinkPhone)());case 5:r.next=11;break;case 7:r.prev=7;r.t0=r["catch"](2);o.setState({error:r.t0});return r.abrupt("return");case 11:n.push("/account/verify");case 12:case"end":return r.stop()}},e,r,[[2,7]])})),o.onToggle=function(e){o.setState(function(e){var t=e.isCollapsed;return{isCollapsed:!t}})},n),h(o,a)}t.prototype.render=function e(){var t=this.props.user;var r=this.state,n=r.isCollapsed,o=r.error;return l.createElement(c.Panel,null,l.createElement(c.Panel.Header,{onClick:n?this.onToggle:null},l.createElement(c.Panel.Header.Left,null,l.createElement(c.Panel.Header.Title,null,"Account Verification")),l.createElement(c.Panel.Header.Right,null,l.createElement(c.Panel.Toggle,{isCollapsed:n,onClick:this.onToggle}))),!n&&l.createElement(c.Panel.Body,null,o&&l.createElement(c.Alert,{styles:[c.Alert.STYLES.danger]},o.message),t.hasPhoneVerified?l.createElement(c.Form.Hint,null,"This account has been verified with the phone number ",l.createElement("b",null,t.phoneNumber),"."):l.createElement(c.Form.Hint,null,"Verify your identity and better protect your account using your phone number."),l.createElement(c.Button,{kind:"secondary",styles:[c.Button.STYLES.medium],onClick:this.onClick},t.hasPhoneVerified?"Verify with another phone number":"Verify your account")))};return t}(l.Component))||o)||o);t.default=y},2681:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var l=r(0);var i=f(l);var u=r(5);var c=r(1);var s=r(78);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(n=c.Form.withContext({getValueFromProps:function e(t){var r=t.org;return r.name}}),o=(0,u.connect)(),n(a=o(a=function(e){m(t,e);function t(){var r,n,o;p(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=d(this,e.call.apply(e,[this].concat(l))),n),n.onNameChange=function(e){var t=n.props.onChange;var r=e.currentTarget.value;t(r)},n.onSubmit=function(e){var t=n.props,r=t.org,o=t.value,a=t.dispatch;e.preventDefault();a((0,s.updateOrgName)(r,o))},r),d(n,o)}t.prototype.render=function e(){var t=this.props,r=t.value,n=t.hasChanged;return i.default.createElement(c.Panel,null,i.default.createElement(c.Panel.Header,null,i.default.createElement(c.Panel.Header.Title,null,"Your Organization Name")),i.default.createElement("form",{onSubmit:this.onSubmit},i.default.createElement(c.Panel.Body,null,i.default.createElement(c.Form.Input,{value:r,onChange:this.onNameChange}),i.default.createElement(c.Form.Hint,null,"Your organization's name as displayed in the header and all email correspondances")),n&&i.default.createElement(c.Panel.Footer,null,i.default.createElement(c.Panel.Footer.Controls,null,i.default.createElement(c.Form.Button,{type:"submit"},"Save Changes")))))};return t}(i.default.Component))||a)||a);t.default=h},2682:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var l=r(0);var i=f(l);var u=r(5);var c=r(1);r(3);var s=r(78);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(n=c.Form.withContext({getValueFromProps:function e(t){var r=t.org;return r}}),o=(0,u.connect)(function(e){var t=e.config;return{config:t}}),n(a=o(a=function(e){h(t,e);function t(){var r=this;var n,o,a;d(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=m(this,e.call.apply(e,[this].concat(i))),o),o.state={isCollapsed:true,error:null},o.onBaseDomainChange=function(e){var t=o.props,r=t.value,n=t.onChange;n(r.setBaseDomain(e.currentTarget.value));o.setState({error:null})},o.onSubmit=function(){var e=p(regeneratorRuntime.mark(function e(t){var n,a,l,i;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:n=o.props,a=n.org,l=n.value,i=n.dispatch;t.preventDefault();r.prev=2;r.next=5;return i((0,s.updateOrgBaseDomain)(a,l.baseDomain));case 5:r.next=10;break;case 7:r.prev=7;r.t0=r["catch"](2);o.setState({error:new Error('The "'+l.baseDomain+'" organization URL is already taken :(')});case 10:case"end":return r.stop()}},e,r,[[2,7]])}));return function(t){return e.apply(this,arguments)}}(),o.onToggle=function(e){o.setState(function(e){var t=e.isCollapsed;return{isCollapsed:!t}})},n),m(o,a)}t.prototype.render=function e(){var t=this.props,r=t.org,n=t.value,o=t.hasChanged,a=t.config;var l=this.state,u=l.isCollapsed,s=l.error;if(u)return i.default.createElement(c.Panel,null,i.default.createElement(c.Panel.Header,{onClick:this.onToggle},i.default.createElement(c.Panel.Header.Left,null,i.default.createElement(c.Panel.Header.Title,null,"Your Organization URL"),i.default.createElement(c.Panel.Header.Hint,null,"Your organization URL is"," ",i.default.createElement("b",null,r.getURL(a.domains.spaces)),".")),i.default.createElement(c.Panel.Header.Right,null,i.default.createElement(c.Panel.Toggle,{isCollapsed:u}))));return i.default.createElement(c.Panel,null,i.default.createElement(c.Panel.Header,null,i.default.createElement(c.Panel.Header.Left,null,i.default.createElement(c.Panel.Header.Title,null,"Your Organization URL"),i.default.createElement(c.Panel.Header.Hint,null,"Your organization URL is"," ",i.default.createElement("b",null,r.getURL(a.domains.spaces)),".")),i.default.createElement(c.Panel.Header.Right,null,i.default.createElement(c.Panel.Toggle,{isCollapsed:u,onClick:this.onToggle}))),i.default.createElement("form",{onSubmit:this.onSubmit},i.default.createElement(c.Panel.Body,null,i.default.createElement(c.Form.Group,{error:s},i.default.createElement(c.Form.Input,{value:n.baseDomain,onChange:this.onBaseDomainChange},i.default.createElement(c.Form.InputAddOn,null,".",a.domains.spaces))),i.default.createElement(c.Form.Hint,null,"You can change your organization’s URL (web address), but out of courtesy to your teammates and other GitBook users, please don’t do this often :)"),i.default.createElement(c.Form.Hint,null,i.default.createElement("b",null,"Note"),": If you change your organization’s URL, GitBook will automatically redirect from the old to the new address. However, you should still make sure your teammates know about the change because the old name will be placed back into the pool and could be used by some other organization in the future.")),o&&i.default.createElement(c.Panel.Footer,null,i.default.createElement(c.Panel.Footer.Controls,null,i.default.createElement(c.Form.Button,{type:"submit",disabled:!!s},"Save Changes")))))};return t}(i.default.Component))||a)||a);t.default=v},2683:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l,i;var u=r(0);var c=h(u);var s=r(5);var f=r(2);var p=r(1);var d=r(14);var m=r(78);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=f.StyleSheet.create({container:(n={display:"flex",flexDirection:"column"},n["@media "+p.MEDIA.TABLET]={flexDirection:"row"},n),logoWrapper:(o={marginBottom:p.boxes.PADDING_SMALL},o["@media "+p.MEDIA.TABLET]={marginBottom:0},o),logoLoading:{width:94,height:94,fontSize:32,display:"flex",alignItems:"center",justifyContent:"center",color:p.colors.BLUE_BASE},logo:{cursor:"pointer",borderRadius:p.boxes.RADIUS_LARGE},contentWrapper:(a={},a["@media "+p.MEDIA.TABLET]={flex:1,padding:"0px "+p.boxes.PADDING_LARGE+"px"},a)});var w=(l=(0,s.connect)(),l(i=function(e){E(t,e);function t(){var r=this;var n,o,a;y(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=g(this,e.call.apply(e,[this].concat(i))),o),o.state={loading:false,error:null},o.onSelectFile=function(){o.uploader&&d.FileUploader.promptFile(o.uploader)},o.onFiles=function(){var e=v(regeneratorRuntime.mark(function e(t){var n,a,l;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:n=o.props,a=n.dispatch,l=n.org;o.setState({loading:true,error:null});r.prev=2;r.next=5;return a((0,m.updateOrgLogo)(l,t[0]));case 5:r.next=10;break;case 7:r.prev=7;r.t0=r["catch"](2);o.setState({error:r.t0});case 10:r.prev=10;o.setState({loading:false});return r.finish(10);case 13:case"end":return r.stop()}},e,r,[[2,7,10,13]])}));return function(t){return e.apply(this,arguments)}}(),n),g(o,a)}t.prototype.componentWillReceiveProps=function e(t){if(t.org.logoURL==this.props.org.logoURL)return;this.setState({loading:false})};t.prototype.render=function e(){var t=this;var r=this.props.org;var n=this.state,o=n.loading,a=n.error;return c.createElement(p.Panel,null,c.createElement(p.Panel.Header,null,c.createElement(p.Panel.Header.Title,null,"Your Organization Logo")),c.createElement(p.Panel.Body,null,a&&c.createElement(p.Alert,{styles:[p.Alert.STYLES.danger]},"Please upload an image that is less than 5MB."),c.createElement(d.FileUploader,{ref:function e(r){t.uploader=r},onFiles:this.onFiles,accept:"image/*"}),c.createElement("div",{className:(0,f.css)(b.container)},o?c.createElement("div",{className:(0,f.css)(b.logoLoading)},c.createElement(p.Loading,null)):c.createElement("div",{className:(0,f.css)(b.logoWrapper)},c.createElement(d.OrgAvatar,{org:r,styles:[d.OrgAvatar.STYLES.sizeXL,b.logo],onClick:this.onSelectFile})),c.createElement("div",{className:(0,f.css)(b.contentWrapper)},c.createElement(p.Button,{kind:"secondary",onClick:this.onSelectFile,disabled:o},"Upload Logo"),c.createElement(p.Form.Hint,null,"This icon will be used to identify your organization in GitBook. It will be visible to members of your organization and your users."),c.createElement(p.Form.Hint,null,c.createElement("b",null,"Some tips:")," Use a graphical logo or image rather than text and upload an image that is 132px square or larger.")))))};return t}(c.Component))||i);t.default=w},2684:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=s(a);var i=r(5);var u=r(13);var c=r(1);r(3);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(n=(0,i.connect)(),n(o=(0,u.withRouter)(o=function(e){d(t,e);function t(){var r,n,o;f(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=p(this,e.call.apply(e,[this].concat(l))),n),n.onClick=function(){var e=n.props,t=e.history,r=e.org;t.push("/@"+r.baseDomain+"/domain")},r),p(n,o)}t.prototype.render=function e(){var t=this.props.org;return l.createElement(c.ColorPalette.Brand,null,l.createElement(c.Panel,null,l.createElement(c.Panel.Header,null,l.createElement(c.Panel.Header.Left,null,l.createElement(c.Panel.Header.Title,null,"Custom Domain"),l.createElement(c.Panel.Header.Hint,null,"Setup a custom common domain for all of your organization's projects."))),t.customDomain?l.createElement(c.Form,null,l.createElement(c.Panel.Body,null,l.createElement(c.Form.Input,{disabled:true,value:t.customDomain},l.createElement(c.Form.InputAddOn,{prefix:true},"https://"))),l.createElement(c.Panel.Footer,null,l.createElement(c.Panel.Footer.Controls,null,l.createElement(c.Form.Button,{onClick:this.onClick},"Edit custom domain")))):l.createElement(c.Panel.Body,null,l.createElement(c.Button,{kind:"secondary",onClick:this.onClick},"Add a custom domain"))))};return t}(l.Component))||o)||o);t.default=m},2685:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(2686);var o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},2686:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=c(n);var a=r(1);r(3);var l=r(2687);var i=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){p(t,e);function t(){var r,n,o;s(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=f(this,e.call.apply(e,[this].concat(l))),n),n.state={isCollapsed:true},n.onToggle=function(){n.setState(function(e){var t=e.isCollapsed;return{isCollapsed:!t}})},r),f(n,o)}t.prototype.render=function e(){var t=this.props.org;var r=this.state.isCollapsed;if(r)return o.createElement(a.Panel,null,o.createElement(a.Panel.Header,{onClick:this.onToggle},o.createElement(a.Panel.Header.Left,null,o.createElement(a.Panel.Header.Title,null,"Single Sign On (SSO)"),o.createElement(a.Panel.Header.Hint,null,"Get set up with Google Apps, Azure, Okta, OneLogin, or your custom"," ",o.createElement(a.Link,{href:"https://docs.gitbook.com/organization-management/saml",target:"_blank",rel:"noopener noreferrer",kind:"text"},"SAML 2.0 solution"),".")),o.createElement(a.Panel.Header.Right,null,o.createElement(a.Panel.Toggle,{isCollapsed:r}))));return o.createElement(a.Panel,null,o.createElement(a.Panel.Header,null,o.createElement(a.Panel.Header.Left,null,o.createElement(a.Panel.Header.Title,null,"Single Sign On (SSO)"),o.createElement(a.Panel.Header.Hint,null,"Get set up with Google Apps, Azure, Okta, OneLogin, or your custom"," ",o.createElement(a.Link,{href:"https://docs.gitbook.com/organization-management/saml",target:"_blank",rel:"noopener noreferrer",kind:"text"},"SAML 2.0 solution"),".")),o.createElement(a.Panel.Header.Right,null,o.createElement(a.Panel.Toggle,{isCollapsed:r,onClick:this.onToggle}))),o.createElement(a.Panel.Body,null,o.createElement(i.default,{org:t,onClose:this.onToggle})))};return t}(o.Component);t.default=d},2687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l;var i=r(0);var u=y(i);var c=r(5);var s=r(1);var f=r(14);var p=r(3);var d=r(10);var m=r(2688);var h=v(m);function v(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=p.SAMLIdP.create();var S=(n=d.Connectors.database(function(e){var t=e.org;return{config:p.SAMLIdP.queryByOrg(t.uid).defaultsTo(null)}}),o=s.Form.withContext({getValueFromProps:function e(t){var r=t.config;return r||w}}),a=(0,c.connect)(),n(l=o(l=a(l=function(e){b(t,e);function t(r){g(this,t);var n=E(this,e.call(this,r));n.onSave=function(){var e=n.props,t=e.org,r=e.value,o=e.dispatch;o(d.Flux.organization.updateSAMLIdP(t,r));n.setState({editConfig:false,saved:true})};n.onChangeLabel=function(e){var t=n.props.onChange;var r=e.currentTarget.value;t(function(e){return e.merge({label:r})})};n.onChangeSSOUrl=function(e){var t=n.props.onChange;var r=e.currentTarget.value;t(function(e){return e.merge({ssoURL:r})})};n.onChangeEntityID=function(e){var t=n.props.onChange;var r=e.currentTarget.value;t(function(e){return e.merge({entityID:r})})};n.onCertificateFile=function(e){var t=n.props.onChange;var r=new FileReader;r.onload=function(e){if(2!=e.target.readyState||e.target.error)return;t(function(t){return t.merge({certificate:e.target.result})})};r.readAsText(e[0])};n.onClickUploadCert=function(e){e.preventDefault();n.uploader&&f.FileUploader.promptFile(n.uploader)};n.onClickEditMetadata=function(){n.setState({editConfig:true})};n.onClickDisable=function(){var e=n.props,t=e.org,r=e.config,o=e.dispatch;r&&o(d.Flux.organization.disableSAML(t,r))};n.state={editConfig:!r.config,saved:false};return n}t.prototype.render=function e(){var t=this;var r=this.props,n=r.org,o=r.config,a=r.value;var l=this.state,i=l.editConfig,c=l.saved;var p=a.ssoURL&&a.entityID&&a.certificate&&a.label&&(!o||o.ssoURL!=a.ssoURL||o.entityID!=a.entityID||o.certificate!=a.certificate||o.label!=a.label);if(!i)return u.createElement(s.Form,null,c&&u.createElement(s.Alert,{styles:[s.Alert.STYLES.success]},"Your Identity Provider configuration has been saved on GitBook, to finalize enter these metadata on your IdP side:"),u.createElement(h.default,{org:n}),u.createElement(s.Form.Actions,null,u.createElement(s.Button.Toolbar,null,u.createElement(s.Button,{type:"button",kind:"secondary",onClick:this.onClickDisable},u.createElement("span",null,"Disable")),u.createElement(s.Button,{type:"button",kind:"secondary",onClick:this.onClickEditMetadata},u.createElement("span",null,"Edit configuration")))));return u.createElement(s.Form,null,u.createElement(f.FileUploader,{ref:function e(r){t.uploader=r},onFiles:this.onCertificateFile}),u.createElement(s.Form.Group,{title:"Provider Label"},u.createElement(s.Form.Input,{type:"text",placeholder:"Google, OneLogin, Okta",value:a.label,onChange:this.onChangeLabel}),u.createElement(s.Form.Hint,null,"Do you have a nickname for your SSO system? Add it to the Sign in Button!")),u.createElement(s.Form.Group,{title:"SAML SSO URL"},u.createElement(s.Form.Input,{type:"text",placeholder:"https://company-app.okta.com/apps/company/abc123",value:a.ssoURL,onChange:this.onChangeSSOUrl})),u.createElement(s.Form.Group,{title:"Identity Provider Issuer (Entity ID)"},u.createElement(s.Form.Input,{type:"text",placeholder:"https://okta.com/abc123",value:a.entityID,onChange:this.onChangeEntityID})),u.createElement(s.Form.Group,{title:"Public Certificate"},u.createElement(s.Button,{kind:"secondary",styles:[s.Button.STYLES.small],onClick:this.onClickUploadCert},"Upload"),u.createElement(s.Form.Hint,null,"Select and upload your entire x.509 certificate here.")),u.createElement(s.Form.Actions,null,u.createElement(s.Button,{onClick:this.onSave,disabled:!p},u.createElement("span",null,"Save"))))};return t}(u.Component))||l)||l)||l);t.default=S},2688:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=p(a);var i=r(107);var u=f(i);var c=r(5);var s=r(1);r(3);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(n=(0,c.connect)(function(e){var t=e.config;return{config:t}}),n(o=function(e){h(t,e);function t(){d(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.org,n=t.config;var o=(0,u.default)(n.urls.website,"saml",r.uid);var a=(0,u.default)(o,"assert");var i=(0,u.default)(o,"login");var c=(0,u.default)(o,"metadata.xml");var f=(0,u.default)(n.urls.website,"login",r.baseDomain);return l.createElement(l.Fragment,null,l.createElement(s.Form.Group,{title:"Start URL"},l.createElement(s.Form.Input,{readOnly:true,value:i})),l.createElement(s.Form.Group,{title:"ACS URL"},l.createElement(s.Form.Input,{readOnly:true,value:a})),l.createElement(s.Form.Group,{title:"Entity ID"},l.createElement(s.Form.Input,{readOnly:true,value:c})),l.createElement(s.Form.Group,{title:"Name-id format"},l.createElement(s.Form.Input,{readOnly:true,value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"})),l.createElement(s.Form.Group,{title:"Sign-in URL"},l.createElement(s.Form.Input,{readOnly:true,value:f}),l.createElement(s.Form.Hint,null,"Share this url with your company employees.")))};return t}(l.Component))||o);t.default=v},2689:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(2690);var o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},2690:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var l=r(0);var i=g(l);var u=r(5);var c=r(13);var s=r(1);var f=r(3);var p=r(10);var d=r(2691);var m=y(d);var h=r(2692);var v=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(n=(0,u.connect)(),o=p.Connectors.database(function(e){var t=e.org;return{billingConfig:f.BillingConfig.queryByID(t.uid),orgUsage:f.OrgUsage.queryByID(t.uid)}}),n(a=(0,c.withRouter)(a=o(a=function(e){w(t,e);function t(){var r,n,o;E(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=b(this,e.call.apply(e,[this].concat(l))),n),n.state={displayConfirm:false,displayContactUs:false},n.displayConfirm=function(){n.setState({displayConfirm:true})},n.closeConfirm=function(){n.setState({displayConfirm:false})},n.displayContactUs=function(){n.setState({displayContactUs:true})},n.closeContactUs=function(){n.setState({displayContactUs:false})},r),b(n,o)}t.prototype.render=function e(){var t=this.props,r=t.org,n=t.billingConfig,o=t.orgUsage,a=t.user;var l=this.state,u=l.displayConfirm,c=l.displayContactUs;var f=(!n||"free"===n.plan)&&(!o||1===o.membersCount);return i.createElement(i.Fragment,null,i.createElement(s.Panel,null,i.createElement(s.Panel.Header,null,i.createElement(s.Panel.Header.Left,null,i.createElement(s.Panel.Header.Title,null,"Delete organization"),i.createElement(s.Panel.Header.Hint,null,"Once deleted, it will be gone forever. Please be certain."))),i.createElement(s.Panel.Body,null,a.isSiteAdmin||f?i.createElement(s.Button,{kind:"danger",onClick:this.displayConfirm},"Delete your organization"):i.createElement(s.Button,{kind:"danger",onClick:this.displayContactUs},"Contact us"))),u&&i.createElement(m.default,{org:r,onClose:this.closeConfirm}),c&&i.createElement(v.default,{onClose:this.closeContactUs}))};return t}(i.Component))||a)||a)||a);t.default=S},2691:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=f(a);var i=r(5);var u=r(112);var c=r(1);r(3);var s=r(78);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(n=(0,i.connect)(),n(o=(0,u.withRouter)(o=function(e){h(t,e);function t(){var r=this;var n,o,a;d(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=m(this,e.call.apply(e,[this].concat(i))),o),o.state={deleteInput:""},o.onConfirmDelete=p(regeneratorRuntime.mark(function e(){var t,n,a,l;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.org,a=t.history,l=t.dispatch;r.next=3;return l((0,s.deleteOrganization)(n));case 3:a.push("/");case 4:case"end":return r.stop()}},e,r)})),o.onInputChange=function(e){e.preventDefault();o.setState({deleteInput:e.currentTarget.value})},n),m(o,a)}t.prototype.render=function e(){var t=this.props,r=t.org,n=t.onClose;var o=this.state.deleteInput;return l.createElement(c.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:n},l.createElement(c.Modal,{size:c.Modal.SIZES.medium},l.createElement(c.Modal.Status,{styles:[c.Modal.Status.STYLES.warning]},"This action ",l.createElement("b",null,"CANNOT be undone"),". This will permanently delete the ",r.name," Organization."),l.createElement(c.Modal.Header,null,l.createElement(c.Modal.Title,null,"Are you sure you want to delete this ?")),l.createElement(c.Modal.Body,null,l.createElement(c.Form.Group,{title:"Please type in 'DELETE' to confirm"},l.createElement(c.Form.Input,{value:o,onChange:this.onInputChange}))),l.createElement(c.Modal.Footer,null,l.createElement(c.Button,{kind:"secondary",onClick:this.onConfirmDelete,disabled:"DELETE"!==o},"Yes, I'm sure"))))};return t}(l.Component))||o)||o);t.default=v},2692:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var o=i(n);var a=r(14);var l=r(1);function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){s(t,e);function t(){var r,n,o;u(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return o=(r=(n=c(this,e.call.apply(e,[this].concat(i))),n),n.onContactUs=function(){var e=n.props.onClose;(0,a.openSupportDialog)();e()},r),c(n,o)}t.prototype.render=function e(){var t=this.props.onClose;return o.createElement(l.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:t},o.createElement(l.Modal,{size:l.Modal.SIZES.small},o.createElement(l.Modal.Header,null,o.createElement(l.Modal.Title,null,"Delete your organization")),o.createElement(l.Modal.Body,null,o.createElement(l.Text,null,"Please contact us to delete the organization.")),o.createElement(l.Modal.Footer,null,o.createElement(l.Button,{kind:"cancel",onClick:t},"Cancel"),o.createElement(l.Button,{kind:"primary",onClick:this.onContactUs},"Contact us"))))};return t}(o.Component);t.default=f},2708:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PlanCardBusiness=t.PlanCardStartup=t.PlanCardFree=t.PlanCard=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,l,i,u,c,s,f,p,d;var m=r(0);var h=b(m);var v=r(2);var y=r(3);var g=r(1);var E=r(102);function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=(o=g.Skeleton.connectToSkeleton(),o(a=(i=l=function(e){P(t,e);function t(){var r,n,o;w(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=S(this,e.call.apply(e,[this].concat(l))),n),n.state={isHover:false},n.onMouseEnter=function(){n.setState({isHover:true})},n.onMouseLeave=function(){n.setState({isHover:false})},n.onSwitch=function(e){e.preventDefault();var t=n.props,r=t.billingConfig,o=t.type,a=t.onSwitchPlan;if(!r||!a||r.plan===o)return;a(o)},r),S(n,o)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.type,a=n.billingConfig,l=n.onSwitchPlan,i=n.isLoading;var u=this.state.isHover;var c=y.BILLING.BILLING_SPEC[o];var s=c.priceByMemberMonthly||c.price;var f=E.PLANS[o].title;var p=E.PLANS[o].priceInfo;var d=a?a.activePlan:"free";var m=!!a&&("free"===a.plan&&"free"!==a.activePlan);var v=(y.BillingConfig.isUpgrade(a.plan,o)||y.BillingConfig.isDowngrade(a.plan,o))&&l;var b=d===o&&!m&&!i;return h.createElement(g.View,{role:"button",tabIndex:0,styles:[r.card,v&&r.interactiveCard],onClick:v?this.onSwitch:null,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},h.createElement(g.View,{styles:[r.container,b&&r.active,g.View.PADDING.S300,g.View.PADDING.S400Vertical]},h.createElement(_,{title:f,price:s,priceInfo:p,active:b}),h.createElement(C,{plan:o,nbUsers:c.members,nbPublicSpaces:c.publicSpaces,nbPrivateSpaces:c.privateSpaces})),h.createElement(T,{isHover:u,previousPlan:a.plan,plan:o,active:b,disabled:!l}))};return t}(h.Component),l.defaultProps={billingConfig:null,onSwitchPlan:null},l.STYLES=v.StyleSheet.create({card:{display:"flex",flexDirection:"column",position:"relative",textAlign:"center",background:g.colors.WHITE,boxShadow:g.boxes.SHADOW_LOW},container:{flex:"1 0 auto",border:"1px solid "+g.colors.GREY_LIGHT,borderBottom:0,color:g.colors.GREY_BASE,borderTopLeftRadius:g.boxes.RADIUS_NORMAL,borderTopRightRadius:g.boxes.RADIUS_NORMAL},interactiveCard:{cursor:"pointer",":hover":{borderColor:g.colors.GREY_LIGHT,boxShadow:g.boxes.SHADOW_HIGH}},active:{backgroundColor:g.colors.BLUE_BASE,color:g.colors.BLUE_LIGHTER}}),i))||a);var _=(c=u=function(e){P(t,e);function t(){w(this,t);return S(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.title,a=n.price,l=n.priceInfo,i=n.active;return h.createElement(g.View,{styles:[r.header,i&&r.active]},h.createElement(g.View,{styles:[g.View.MARGIN.S100Bottom]},h.createElement(g.Text.TextH500,null,o)),h.createElement(g.View,null,h.createElement(g.Text.DisplayH800,null,a>0?h.createElement(g.Text.DisplayH800,null,h.createElement(g.Text.TextH400,{styles:[r.currency]},"$"),a,h.createElement(g.Text.TextH400,null,"/user")):0)),h.createElement(g.View,null,l&&h.createElement(g.View,null,h.createElement(g.Text.TextH300,{styles:[r.priceInfo,i&&r.priceInfoActive]},l))))};return t}(h.Component),u.STYLES=v.StyleSheet.create({currency:{verticalAlign:"text-top"},header:{color:g.colors.BLUE_BASE,minHeight:110},active:{backgroundColor:g.colors.BLUE_BASE,color:g.colors.WHITE},priceInfo:{color:g.colors.GREY_BASE},priceInfoActive:{color:g.colors.BLUE_LIGHTER}}),c);var C=(f=s=function(e){P(t,e);function t(){w(this,t);return S(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.nbUsers,a=n.nbPublicSpaces,l=n.nbPrivateSpaces,i=n.plan;if("v2_business"===i)return h.createElement(g.View,{styles:[r.body,g.View.MARGIN.S200Top]},h.createElement(g.View,null,h.createElement(g.Text.TextH300,null,"Startup plan ",h.createElement("b",null,"+"))),h.createElement(g.View,null,h.createElement(g.Text.TextH300,null,"Private Sharing")),h.createElement(g.View,null,h.createElement(g.Text.TextH300,null,"Advanced Branding")));return h.createElement(g.View,{styles:[r.body,g.View.MARGIN.S200Top]},h.createElement(g.View,null,h.createElement(g.Text.TextH300,null,h.createElement("b",null,Infinity===o?"Unlimited":o)," ","user",o>1&&"s")),h.createElement(g.View,null,h.createElement(g.Text.TextH300,null,h.createElement("b",null,Infinity===a?"Unlimited":a)," ","public space",a>1&&"s")),h.createElement(g.View,null,h.createElement(g.Text.TextH300,null,h.createElement("b",null,Infinity===l?"Unlimited":l)," ","private space",l>1&&"s")))};return t}(h.Component),s.STYLES=v.StyleSheet.create({body:{marginBottom:"auto"}}),f);var T=(d=p=function(e){P(t,e);function t(){w(this,t);return S(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=this.props.isHover;var n=t.STYLES;var o=this.props,a=o.active,l=o.disabled,i=o.previousPlan,u=o.plan;if(a)return h.createElement(g.View,{styles:[n.footer,n.active]},h.createElement(g.Text,null,"Current Plan"));if(l)return h.createElement(g.View,{styles:[n.footer]},h.createElement(g.Text,null,"Coming Soon"));if(y.BillingConfig.isUpgrade(i,u))return h.createElement(g.View,{styles:[n.footer,n.upgrade]},h.createElement(g.Text,null,"Upgrade"));if(r&&y.BillingConfig.isDowngrade(i,u))return h.createElement(g.View,{styles:[n.footer]},h.createElement(g.Text,null,"Downgrade"));return h.createElement(g.View,{styles:[n.footer,n.emptyFooter]})};return t}(h.Component),p.STYLES=v.StyleSheet.create({active:{backgroundColor:g.colors.BLUE_BASE,color:g.colors.WHITE,borderTop:"solid 1px "+g.colors.BLUE_LIGHT},emptyFooter:{borderTop:0},footer:{minHeight:45,padding:g.spacing.S100+"px "+g.spacing.S300+"px",textAlign:"center",border:"solid 1px "+g.colors.GREY_LIGHT,color:g.colors.GREY_BASE},upgrade:{border:"solid 1px "+g.colors.BLUE_BASE,color:g.colors.BLUE_BASE}}),d);var x=function e(t){return h.createElement(O,n({},t,{type:"free"}))};var k=function e(t){return h.createElement(O,n({},t,{type:"v2_startup"}))};var j=function e(t){return h.createElement(O,n({},t,{type:"v2_business",onSwitchPlan:null}))};t.PlanCard=O;t.PlanCardFree=x;t.PlanCardStartup=k;t.PlanCardBusiness=j},519:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=s(a);var i=r(2);var u=r(1);var c=r(7);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(o=n=function(e){m(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.title,a=n.status,i=n.children,s=n.error,p=f(n,["title","status","children","error"]);return l.createElement(u.Modal,p,a&&!s&&l.createElement(u.Modal.Status,{styles:[u.Modal.Status.STYLES.info]},a),s&&l.createElement(u.Modal.Status,{styles:[u.Modal.Status.STYLES.danger]},s.message),l.createElement(u.Modal.Header,{styles:[r.header]},l.createElement(u.Modal.Title,{styles:[r.headerTitle]},o),l.createElement(u.View,{styles:[r.gitbookLogo]},l.createElement(c.Logo,null))),i)};return t}(l.Component),n.STYLES=i.StyleSheet.create({header:{display:"flex",flexDirection:"row",alignItems:"center"},headerTitle:{flex:1},gitbookLogo:{fontSize:"42px",color:u.colors.BLUE_BASE}}),o);t.default=h},928:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,l;var i=r(0);var u=O(i);var c=r(13);var s=r(5);var f=r(3);var p=r(10);var d=r(14);var m=r(153);var h=r(2634);var v=P(h);var y=r(2640);var g=P(y);var E=r(2642);var b=P(E);var w=r(2644);var S=P(w);function P(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=(o=(0,s.connect)(function(e){var t=e.user;return{user:t}}),a=p.Connectors.database(function(e){var t=e.org;return{migrationStatus:f.MigrationStatus.queryByOrgID(t.uid).defaultsTo(m.mockedMigrationStatus)}}),o(l=a(l=function(e){T(t,e);function t(){_(this,t);return C(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this;var r=this.props,o=r.match,a=r.migrationStatus,l=r.user,i=r.membership;if(!a||!(i&&i.canAdmin&&!a.confirmed||l&&l.isSiteAdmin))return u.createElement(d.ErrorPage.NotFound,null);return u.createElement(c.Switch,null,u.createElement(c.Route,{path:o.url+"/preview",render:function e(r){return u.createElement(g.default,n({},t.props,r))}}),u.createElement(c.Route,{path:o.url+"/github",render:function e(r){return u.createElement(b.default,n({},t.props,r))}}),u.createElement(c.Route,{path:o.url+"/status",render:function e(r){return u.createElement(v.default,n({},t.props,r))}}),u.createElement(c.Route,{path:o.url+"/rollback",render:function e(r){return u.createElement(S.default,n({},t.props,r))}}),u.createElement(d.ErrorPage.NotFound,null))};return t}(u.Component))||l)||l);t.default=x},929:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=s(a);var i=r(2);var u=r(1);var c=r(14);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=n=function(e){d(t,e);function t(){f(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.error;if(!n)return null;return l.createElement(u.Modal.Status,{styles:[u.Modal.Status.STYLES.danger,r.errorAlert]},"An error happened while attempting to upgrade your content,"," ",l.createElement(u.Link,{kind:"underline",onClick:c.openSupportDialog},"get in touch")," ","with our team.")};return t}(l.Component),n.STYLES=i.StyleSheet.create({errorAlert:{marginBottom:u.spacing.S200}}),o);t.default=m},930:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l;var i=r(0);var u=M(i);var c=r(90);var s=I(c);var f=r(2);var p=r(5);var d=r(1);var m=r(14);var h=r(7);var v=r(2645);var y=I(v);var g=r(2646);var E=I(g);var b=r(2647);var w=I(b);var S=r(2648);var P=I(S);var O=r(2649);var _=I(O);var C=r(2650);var T=I(C);var x=r(2651);var k=I(x);var j=r(929);var L=I(j);function I(e){return e&&e.__esModule?e:{default:e}}function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function B(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=(n=(0,p.connect)(function(e,t){var r=e.config;var n=t.location;return{queryParameters:s.default.parse(n.search.slice(1))}}),n(o=(l=a=function(e){B(t,e);function t(){var r,n,o;F(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=A(this,e.call.apply(e,[this].concat(l))),n),n.state={fetching:false,error:null},n.startMigration=function(){n.setState({fetching:true})},n.onError=function(e){n.setState({error:e,fetching:false})},r),A(n,o)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.queryParameters,o=n.orgID,a=n.userID,l=n.secret;var i=this.state,c=i.fetching,s=i.error;if(!o||!a||!l)return u.createElement(m.ErrorPage.NotFound,null);return u.createElement(d.Modal,{size:d.Modal.SIZES.large},u.createElement(d.Modal.Header,{styles:r.header},u.createElement(L.default,{error:s}),u.createElement(d.Modal.Title,null,"Upgrade to the new GitBook.com")),u.createElement(d.Modal.Body,{styles:r.body},u.createElement(d.View,{styles:r.grid},u.createElement(k.default,{title:"Blazing Fast Search",illustration:{alt:"Fast Search",src:y.default},content:"Find exactly what you're looking for in seconds"}),u.createElement(k.default,{title:"Beautiful WYSIWYG",illustration:{alt:"WYSIWYG",src:E.default},content:"A powerful yet elegantly simple editor for your entire team"}),u.createElement(k.default,{title:"Smart Insights",illustration:{alt:"Insights",src:w.default},content:"To understand your users and improve your content"}),u.createElement(k.default,{title:"Simple Branding",illustration:{alt:"Branding and custom domain",src:P.default},content:"Customize your logo, design and domain in a few clicks"}),u.createElement(d.View,{styles:[d.View.PADDING.S100Horizontal]},u.createElement(d.Text.HeadingH400,{styles:[r.docsHint]},"And much more"),u.createElement(d.Text.TextH300,{styles:r.light},"Learn more about the new GitBook")),u.createElement(d.View,{styles:[d.View.PADDING.S100Horizontal]},u.createElement(d.Text.UIH300,{styles:[r.docsHint]},u.createElement(d.Link,{kind:"primary",styles:[r.docsLink],href:"//docs.gitbook.com/what-is-new/feature-highlights",target:"_blank"},"What","'","s new?"," ",u.createElement(h.IconArrowRight,{styles:[r.docsLinkIcon]}))),u.createElement(d.Text.UIH300,{styles:[r.docsHint]},u.createElement(d.Link,{kind:"primary",styles:[r.docsLink],href:"//docs.gitbook.com/what-is-new/important-differences",target:"_blank"},"What","'","s different?"," ",u.createElement(h.IconArrowRight,{styles:[r.docsLinkIcon]}))))),u.createElement("img",{alt:"Upgrade to the new GitBook.com",src:_.default,className:(0,f.css)(r.screenshot)})),u.createElement(d.Modal.Footer,null,u.createElement(d.View,null),u.createElement(d.View,null,u.createElement(d.Button,{href:"https://docs.gitbook.com/faq",target:"_blank",component:"a",kind:"link"},"Learn more"),u.createElement(d.Button,{kind:"primary",onClick:this.startMigration},c?u.createElement(T.default,{orgID:o,userID:a,secret:l,onError:this.onError}):"Start upgrade"))))};return t}(u.Component),a.STYLES=f.StyleSheet.create({header:{paddingBottom:0},body:{display:"flex",flexDirection:"row",alignItems:"center",borderTop:"none"},screenshot:{maxWidth:315,marginTop:-40,marginRight:-40,marginBottom:-40},grid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridRowGap:40,gridColumnGap:40},light:{color:d.colors.GREY_BASE},docsHint:{marginBottom:d.spacing.S100},docsLink:{textDecoration:"none"},docsLinkIcon:{fontSize:d.font.SIZE_MEDIUM_LARGE,marginLeft:d.spacing.S100}}),l))||o);t.default=R},931:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var l=r(0);var i=f(l);var u=r(5);var c=r(10);var s=r(3);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(n=(0,u.connect)(function(e){var t=e.user;return{live:t.live}}),o=c.Connectors.database(function(e){var t=e.spaceID;return{space:s.Space.queryByID(t).setOptions({ignoreErrors:true})}}),n(a=o(a=function(e){m(t,e);function t(){var r,n,o;p(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=d(this,e.call.apply(e,[this].concat(l))),n),n.attemptRedirect=function(){var e=n.props,t=e.dispatch,r=e.org,o=e.space,a=e.pathname,l=e.live;if(!l)return;var i=a||"";t(r&&o?c.Flux.auth.redirectToSpace({org:r,space:o,pathname:i}):r?c.Flux.auth.redirectToOrg({org:r,pathname:i}):c.Flux.auth.redirectToWebsite(i))},r),d(n,o)}t.prototype.componentDidMount=function e(){this.attemptRedirect()};t.prototype.componentDidUpdate=function e(){this.attemptRedirect()};t.prototype.render=function e(){return null};return t}(i.Component))||a)||a);t.default=h},932:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,l;var i=r(0);var u=m(i);var c=r(5);var s=r(2);var f=r(1);var p=r(7);var d=r(10);function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var l=t[o](a);var i=l.value}catch(e){r(e);return}if(!l.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(n=(0,c.connect)(),n(o=(l=a=function(e){g(t,e);function t(){var r=this;var n,o,a;v(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=(n=(o=y(this,e.call.apply(e,[this].concat(i))),o),o.onClickGoogle=function(){var e=h(regeneratorRuntime.mark(function e(t){var n,a,l,i;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.props,a=n.dispatch,l=n.onLoading,i=n.onError;l(true);r.prev=3;r.next=6;return a(d.Flux.user.signInWithGoogle());case 6:r.next=12;break;case 8:r.prev=8;r.t0=r["catch"](3);i(r.t0);l(false);case 12:case"end":return r.stop()}},e,r,[[3,8]])}));return function(t){return e.apply(this,arguments)}}(),o.onClickGitHub=function(){var e=h(regeneratorRuntime.mark(function e(t){var n,a,l,i;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.props,a=n.dispatch,l=n.onLoading,i=n.onError;l(true);r.prev=3;r.next=6;return a(d.Flux.user.signInWithGitHub());case 6:r.next=12;break;case 8:r.prev=8;r.t0=r["catch"](3);i(r.t0);l(false);case 12:case"end":return r.stop()}},e,r,[[3,8]])}));return function(t){return e.apply(this,arguments)}}(),n),y(o,a)}t.prototype.render=function e(){var r=this.props.disabled;var n=t.STYLES;return u.createElement(f.Modal.Footer,{label:"Or sign in with"},u.createElement(f.View,{styles:[n.oauthButtonWrapper,f.View.PADDING.S100Right]},u.createElement(f.Button,{kind:"secondary",disabled:r,styles:[f.Button.STYLES.block],onClick:this.onClickGoogle},u.createElement(p.IconGoogleLogo,{color:"svg"})," Google")),u.createElement(f.View,{styles:[n.oauthButtonWrapper,f.View.PADDING.S100Left]},u.createElement(f.Button,{kind:"secondary",disabled:r,styles:[f.Button.STYLES.block],onClick:this.onClickGitHub},u.createElement(p.IconGitHubLogo,{styles:[n.githubLogo]})," GitHub")))};return t}(u.Component),a.STYLES=s.StyleSheet.create({githubLogo:{color:"#24292e",fontSize:18},oauthButtonWrapper:{flex:1}}),l))||o);t.default=E},933:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r(0);var l=j(a);var i=r(26);var u=k(i);var c=r(5);var s=r(13);var f=r(1);r(3);var p=r(14);var d=r(520);var m=k(d);var h=r(2671);var v=k(h);var y=r(2672);var g=k(y);var E=r(2674);var b=k(E);var w=r(2675);var S=k(w);var P=r(2676);var O=k(P);var _=r(2677);var C=k(_);var T=r(2678);var x=k(T);function k(e){return e&&e.__esModule?e:{default:e}}function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function M(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var F=(n=(0,c.connect)(function(e){var t=e.user;return{user:t}}),n(o=function(e){M(t,e);function t(){L(this,t);return I(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.user;if(!t.isLoggedIn)return l.createElement(s.Redirect,{to:"/login"});return l.createElement(l.Fragment,null,l.createElement(p.LegacyBanner,null),l.createElement(m.default,{active:{route:m.default.ROUTES.ACCOUNT,title:"Account"}},l.createElement(u.default,{title:"Account Settings"}),l.createElement(f.TabsPage.Header,null,l.createElement(f.TabsPage.Header.Title,null,"Account Settings"),l.createElement(f.TabsPage.Header.Desc,null,"Use these settings to make GitBook your own. Control your email and notifications settings.")),l.createElement(v.default,{user:t}),l.createElement(b.default,{user:t}),l.createElement(g.default,{user:t}),l.createElement(S.default,{user:t}),l.createElement(O.default,{user:t}),l.createElement(C.default,{user:t}),l.createElement(x.default,{user:t})))};return t}(l.Component))||o);t.default=F},934:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,l,i;var u=r(0);var c=b(u);var s=r(5);var f=r(1);var p=r(13);var d=r(7);var m=r(2);var h=r(10);var v=r(519);var y=E(v);var g=r(115);function E(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=m.StyleSheet.create({popup:{minWidth:400},separator:{position:"relative",borderBottom:"1px solid #f1f1f1",margin:"20px 0"},separatorTitle:{position:"absolute",top:0,left:"50%",transform:"translate(-50%, -50%)",color:f.colors.TEXT_MUTED,background:"#fff",padding:"0 10px"},oAuthButton:{fontWeight:f.font.WEIGHT_NORMAL,borderColor:"#ccc",marginBottom:10,":last-of-type":{marginBottom:0}},githubLogo:{color:"#24292e",fontSize:18},forgotPassword:{textAlign:"center",margin:f.boxes.PADDING_NORMAL},forgotPasswordText:{color:f.colors.BLUE_BASE}});var _=(o=(0,s.connect)(),o(a=function(e){P(t,e);function t(){w(this,t);return S(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.user,o=t.onSuccess;return c.createElement(f.Popup,n({closeOnEsc:true,closeOnOutsideClick:true},this.props),c.createElement("div",{className:(0,m.css)(O.popup)},c.createElement(y.default,{title:"Confirm your identity"},c.createElement(f.Modal.Body,null,c.createElement(C,{onSuccess:o,user:r})))))};return t}(c.Component))||a);var C=(l=(0,s.connect)(),l(i=function(e){P(t,e);function t(){var r,n,o;w(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=(r=(n=S(this,e.call.apply(e,[this].concat(l))),n),n.state={error:null,password:""},n.onError=function(e){(0,g.handleException)(e,function(){n.setState({error:e})})},n.onSubmit=function(){var e=n.props,t=e.dispatch,r=e.user,o=e.onSuccess;var a=n.state.password;t(h.Flux.user.reauthenticate(r.email,a)).then(function(){o()}).catch(n.onError)},n.onClickGitHub=function(e){e.preventDefault();var t=n.props,r=t.dispatch,o=t.onSuccess;r(h.Flux.user.reauthenticateWithGithub()).then(function(){o()}).catch(n.onError)},n.onClickGoogle=function(e){e.preventDefault();var t=n.props,r=t.dispatch,o=t.onSuccess;r(h.Flux.user.reauthenticateWithGoogle()).then(function(){o()}).catch(n.onError)},n.onPasswordChange=function(e){n.setState({password:e.currentTarget.value})},r),S(n,o)}t.prototype.componentDidMount=function e(){var t=this;setTimeout(function(){t.passwordInput&&t.passwordInput.focus()},0)};t.prototype.render=function e(){var t=this;var r=this.state,n=r.error,o=r.password;var a=this.props.user;return c.createElement(f.Form,{onSubmit:this.onSubmit},n&&c.createElement(f.Alert,{styles:[f.Alert.STYLES.danger]},n.message),a.hasPassword&&c.createElement("div",null,c.createElement(f.Form.Group,{title:"Password"},c.createElement(f.Form.Input,{type:"password",value:o,inputRef:function e(r){t.passwordInput=r},onChange:this.onPasswordChange})),c.createElement(f.Form.Actions,null,c.createElement(f.Form.Button,{styles:[f.Button.STYLES.block]},c.createElement("span",null,"Confirm"))),c.createElement("div",{className:(0,m.css)(O.forgotPassword)},c.createElement(p.Link,{className:(0,m.css)(O.forgotPasswordText),to:"/forgot"},c.createElement("span",null,"Forgot Password ?")))),!a.hasPassword&&a.hasGoogleProvider&&c.createElement(f.Button,{kind:"secondary",styles:[f.Button.STYLES.block,O.oAuthButton],onClick:this.onClickGoogle},c.createElement(d.IconGoogleLogo,{color:"svg"})," ",c.createElement("span",null,"Reauthenticate with Google")),!a.hasPassword&&a.hasGithubProvider&&c.createElement(f.Button,{kind:"secondary",styles:[f.Button.STYLES.block,O.githubButton,O.oAuthButton],onClick:this.onClickGitHub},c.createElement(d.IconGitHubLogo,{styles:[O.githubLogo]})," ",c.createElement("span",null,"Reauthenticate with Github")))};return t}(c.Component))||i);t.default=_}});